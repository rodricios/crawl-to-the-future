window.NYTADX={},NYTADX.positions=["TopAd","Top5","Middle1C","HP","Bar1","Box1","Spon2","MiddleRight","MiddleRight1","MiddleRight2","MiddleRight3","MiddleRight4","MiddleRight5","MiddleRight6","MiddleRight7","MiddleRight8","MiddleRight9","MiddleRight10","MiddleRight11","MiddleRight12","MiddleRight13","MiddleRight14","MiddleRight15","Slideshow_int","Slideshow_end","SponLink"],NYTADX.buildAdx=function(keywords,sensitivity,isBlocking){var host="www.nytimes.com";/sbx|stg/.test(window.location.host)?host="www.nytimes.com":/dev/.test(window.location.host)&&(host="www.dev.nytimes.com");var width=function(){return document.documentElement&&document.documentElement.clientWidth?document.documentElement.clientWidth:window.self&&window.self.innerWidth?window.self.innerWidth:document.body?document.body.clientWidth:0}(),getParams=function(){var i,param,len,urlParams,urlString=window.location.search,params={};if(0===urlString.length)return!1;for(urlParams=urlString.substring(1).split("&"),i=0,len=urlParams.length;len>i;i+=1)param=urlParams[i].split("="),params[param[0]]=param[1]&&param[1].indexOf(",")>=0?param[1].split(","):param[1]||"";return params}(),getPage=function(){var path=location.pathname,campaign=getParams.adx_campaign||"www.nytimes.com";return sensitivity?"www.nytimes.com/"+sensitivity:(path=path.replace(/\d{4}/,"yr").replace(/\d{2}/,"mo").replace(/\d{2}/,"day"),campaign+path)},getKeywords=function(){return keywords.push("nyt5"),960>=width&&keywords.push("smallviewport"),"1"===getParams.rico&&keywords.push(getParams.keywords),"undefined"!=typeof getParams.hp&&keywords.push("hp"),getParams["ad-keywords"]&&keywords.push(getParams["ad-keywords"]),encodeURIComponent(keywords.join(","))},getAdxSettings=function(){for(var param,deliveryProofParams=["adxforce","debug"],settings=["autoconfirm=0","interstitials=1","cpp=1","v=3","attributes=nyt5"],i=deliveryProofParams.length-1;i>=0;i-=1)param=getParams[deliveryProofParams[i]],"undefined"!=typeof param&&settings.push(deliveryProofParams[i]+"="+(param||"1"));return settings.join("&")},constructUrl=function(){return"http://"+host+"/adx/bin/adxrun.html?jsonp=NYTADX.processAdx&page="+getPage()+"&positions="+NYTADX.positions.join(",")+"&"+getAdxSettings()+"&keywords="+getKeywords()};(isBlocking===!0||"undefined"==typeof isBlocking)&&document.write('<script src="'+constructUrl()+'"></script>')},NYTADX.processAdx=function(response){var rootEl=document.getElementsByTagName("html")[0],ads=response.ads||{},hasAds=function(){var ads=response.ads||{};if(Object.keys)return 0!==Object.keys(ads).length;var prop,keyCount=0;for(prop in ads)keyCount++;return 0!==keyCount};hasAds()||(rootEl.className+=" no-ads"),ads.XXL?rootEl.className+=" has-xxl":ads.MiddleRight&&"blank"!==ads.MiddleRight.classification&&"true"===ads.MiddleRight.isDirectlySold&&(rootEl.className+=300===parseInt(ads.MiddleRight.width,10)&&600===parseInt(ads.MiddleRight.height,10)?" has-half-page":" has-big-ad"),ads.TopAd&&"blank"!==ads.TopAd.classification&&(rootEl.className+=" has-top-ad"),ads&&(NYTADX.response=response)};