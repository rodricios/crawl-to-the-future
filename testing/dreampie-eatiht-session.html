<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="DreamPie Format" content="1">
<title>DreamPie History</title>
<style>
body {
  white-space: pre-wrap;
  font-family: Courier New;
  font-size: 10240;
  color: #ffffff;
  background-color: #000000;
}
span.folded {
 display: none;
}
span.commandsep {
 display: none;
}
span.command-defs {
}
span.command {
}
span.output {
}
span.fold-message {
  color: #a7a7a7;
  background-color: #003b6c;
}
span.message {
  color: #ffff00;
}
span.prompt {
  color: #e400b6;
}
span.exception {
  color: #ff8080;
}
span.result-ind {
  color: #0000ff;
}
span.result {
  color: #bcffff;
}
span.stderr {
  color: #ff8080;
}
span.stdout {
  color: #bcffff;
}
span.stdin {
}
span.error {
  background-color: #ff0000;
}
span.bracket-3 {
  color: #ffabab;
}
span.bracket-2 {
  color: #dfabff;
}
span.bracket-1 {
  color: #abffab;
}
span.bracket-match {
  background-color: #00008b;
}
span.comment {
  color: #c9a3a0;
}
span.number {
  color: #aeacff;
}
span.string {
  color: #00e400;
}
span.builtin {
  color: #efcfcf;
}
span.keyword {
  color: #ff7700;
}
</style>
</head>
<body><span class="message">Python 2.7.6 (default, Nov 10 2013, 19:24:24) [MSC v.1500 64 bit (AMD64)] on win32
Type "copyright", "credits" or "license()" for more information.
DreamPie 1.2.1
</span><span class="command"><span class="prompt">&gt;&gt;&gt; </span><span class="keyword">import</span> re <span class="comment">#for tokenizing</span>
<span class="prompt">... </span><span class="keyword">import</span> collections <span class="comment">#for multiset/histogram</span>
<span class="prompt">... </span><span class="keyword">import</span> os
<span class="prompt">... </span><span class="keyword">try</span>:
<span class="prompt">... </span>    <span class="keyword">from</span> StringIO <span class="keyword">import</span> StringIO
<span class="prompt">... </span><span class="keyword">except</span> <span class="builtin">ImportError</span>:
<span class="prompt">... </span>    <span class="keyword">from</span> io <span class="keyword">import</span> StringIO
<span class="prompt">... </span>
<span class="prompt">... </span><span class="keyword">import</span> lxml.html
<span class="prompt">... </span>
<span class="prompt">... </span><span class="keyword">try</span>:
<span class="prompt">... </span>    <span class="builtin">range</span> = <span class="builtin">xrange</span>
<span class="prompt">... </span><span class="keyword">except</span>:
<span class="prompt">... </span>    <span class="keyword">pass</span>
<span class="prompt">... </span>
<span class="prompt">... </span><span class="keyword">def</span> histsum(hist): <span class="keyword">return</span> <span class="builtin">sum</span>(hist.values())
<span class="prompt">... </span>
<span class="prompt">... </span>
<span class="prompt">... </span><span class="comment">#get every non-html word on page (ie. "//text()") as f-distribution</span>
<span class="prompt">... </span><span class="keyword">def</span> tokens_to_hist_from_universe(data_filepath):
<span class="prompt">... </span>
<span class="prompt">... </span>    <span class="keyword">with</span> <span class="builtin">open</span>(data_filepath,<span class="string">'r'</span>,encoding=<span class="string">"utf8"</span>) <span class="keyword">as</span> data_file:
<span class="prompt">... </span>
<span class="prompt">... </span>        <span class="keyword">try</span>:
<span class="prompt">... </span>            parsed_goldhtml = lxml.html.parse(data_file,
<span class="prompt">... </span>                            lxml.html.HTMLParser(encoding=<span class="string">"utf-8"</span>))
<span class="prompt">... </span>        <span class="keyword">except</span>:
<span class="prompt">... </span>            <span class="keyword">print</span>(<span class="builtin">str</span>(data_file.read()))
<span class="prompt">... </span>        tokenized_content = collections.Counter()
<span class="prompt">... </span>
<span class="prompt">... </span>        content = <span class="string">""</span>.join(parsed_goldhtml.xpath(<span class="string">'//text()'</span>))
<span class="prompt">... </span>
<span class="prompt">... </span>        tokenized_content.update(re.split(<span class="string">r'\W+'</span>, content))
<span class="prompt">... </span>
<span class="prompt">... </span>    <span class="keyword">return</span> tokenized_content
<span class="prompt">... </span>
<span class="prompt">... </span>
<span class="prompt">... </span><span class="comment">#get every word from gold std. as f-distribution</span>
<span class="prompt">... </span><span class="keyword">def</span> tokens_to_hist_goldstd(test_filepath):
<span class="prompt">... </span>
<span class="prompt">... </span>    <span class="keyword">with</span> <span class="builtin">open</span>(os.path.abspath(test_filepath), <span class="string">'r'</span>,encoding=<span class="string">"latin1"</span>) <span class="keyword">as</span> f:
<span class="prompt">... </span>
<span class="prompt">... </span>        <span class="comment">#print("test_filepath",os.path.abspath(test_filepath))</span>
<span class="prompt">... </span>        content = <span class="builtin">str</span>(f.read())
<span class="prompt">... </span>
<span class="prompt">... </span>        tokenized_content = collections.Counter()
<span class="prompt">... </span>
<span class="prompt">... </span>        tokenized_content.update(re.split(<span class="string">r'\W+'</span>, content))
<span class="prompt">... </span>
<span class="prompt">... </span>        <span class="keyword">return</span> tokenized_content
<span class="prompt">... </span>
<span class="prompt">... </span>
<span class="prompt">... </span><span class="comment">#get every extracted (predicted) word as f-distribution</span>
<span class="prompt">... </span><span class="keyword">def</span> tokens_to_hist_extractor(extract, data_filepath):
</span><span class="command-defs"><span class="command"><span class="prompt">... </span>    <span class="keyword">try</span>:
<span class="prompt">... </span>        content = extract(data_filepath)
<span class="prompt">... </span>    <span class="keyword">except</span> <span class="builtin">Exception</span>:
<span class="prompt">... </span>        <span class="keyword">print</span>(data_filepath)
<span class="prompt">... </span>        <span class="keyword">raise</span>
<span class="prompt">... </span>        <span class="comment">#raise Exception("\"exception\" method needs to be implemented")</span>
<span class="prompt">... </span>
<span class="prompt">... </span>    tokenized_content = collections.Counter()
<span class="prompt">... </span>    tokenized_content.update(re.split(<span class="string">r'\W+'</span>, content))
<span class="prompt">... </span>
<span class="prompt">... </span>    <span class="keyword">return</span> tokenized_content
<span class="prompt">... </span>
<span class="prompt">... </span>
</span></span><span class="command"><span class="prompt">... </span><span class="keyword">def</span> calc_praf(goldstd,predicted,universe):
<span class="prompt">... </span>
<span class="prompt">... </span>    TP = predicted &amp; goldstd
<span class="prompt">... </span>
<span class="prompt">... </span>    FP = predicted - goldstd
<span class="prompt">... </span>
<span class="prompt">... </span>    FN = (universe - predicted) &amp; goldstd
<span class="prompt">... </span>
<span class="prompt">... </span>    TN = (universe - predicted) &amp; (universe - goldstd)
<span class="prompt">... </span>
<span class="prompt">... </span>    precision = (histsum(TP)*<span class="number">1.0</span>)/histsum(TP+FP)
<span class="prompt">... </span>
<span class="prompt">... </span>    recall = (histsum(TP)*<span class="number">1.0</span>)/histsum(TP+FN)
<span class="prompt">... </span>
<span class="prompt">... </span>    accuracy = (histsum(TP+TN)*<span class="number">1.0</span>)/histsum(TP+FP+FN+TN)
<span class="prompt">... </span>    <span class="keyword">try</span>:
<span class="prompt">... </span>        f1 = <span class="number">2</span> * (((precision*recall)*<span class="number">1.0</span>)/(precision+recall))
<span class="prompt">... </span>    <span class="keyword">except</span> <span class="builtin">ZeroDivisionError</span>:
<span class="prompt">... </span>        f1 = <span class="number">0</span>
<span class="prompt">... </span>        <span class="comment">#print(precision,recall, accuracy)</span>
<span class="prompt">... </span>        <span class="comment">#raise</span>
<span class="prompt">... </span>    <span class="keyword">return</span> {<span class="string">'p'</span>:precision,<span class="string">'r'</span>:recall,<span class="string">'a'</span>:accuracy,<span class="string">'f1'</span>:f1}
<span class="prompt">... </span>
<span class="prompt">... </span>
<span class="prompt">... </span><span class="keyword">def</span> prep_data_for_measurements(directory, extractor,
<span class="prompt">... </span>                        goldfile_ext=<span class="string">'.txt'</span>,
<span class="prompt">... </span>                        testfile_ext=<span class="string">'.html'</span>,
<span class="prompt">... </span>                        pickle_output_name = <span class="builtin">None</span>):
<span class="prompt">... </span>    <span class="string">'''Given a directory, process the files (gold standard) in the following
</span><span class="prompt">... </span><span class="string">        steps:
</span><span class="prompt">... </span><span class="string">    1. Build dictionary of file names to file paths to gold std files and test file
</span><span class="prompt">... </span><span class="string">
</span><span class="prompt">... </span><span class="string">    2. For each file name, get associated "universe" values (all possible outcomes W)
</span><span class="prompt">... </span><span class="string">
</span><span class="prompt">... </span><span class="string">    3. For each file name, get goldstd histogram (G)
</span><span class="prompt">... </span><span class="string">
</span><span class="prompt">... </span><span class="string">    4. For each file name, get extractor's output (C)
</span><span class="prompt">... </span><span class="string">    '''</span>
<span class="prompt">... </span>    <span class="comment">#Step 1</span>
<span class="prompt">... </span>    filenames =  <span class="builtin">set</span>([re.sub((<span class="string">"\\"</span>+ goldfile_ext+<span class="string">"|"</span>+<span class="string">"\\"</span>+testfile_ext),<span class="string">""</span>,name)
<span class="prompt">... </span>                    <span class="keyword">for</span> name <span class="keyword">in</span> os.listdir(directory) ])
<span class="prompt">... </span>
<span class="prompt">... </span>    <span class="keyword">print</span>(<span class="string">"prep_data_for_measurements"</span>,filenames[<span class="number">0</span>])
<span class="prompt">... </span>
<span class="prompt">... </span>    golden_dict = { name:
<span class="prompt">... </span>                    {
<span class="prompt">... </span>                        <span class="string">'domain'</span>: os.path.split(os.path.split(directory)[<span class="number">0</span>])[<span class="number">1</span>],
<span class="prompt">... </span>                        <span class="string">'year'</span>: os.path.split(directory)[<span class="number">1</span>],
<span class="prompt">... </span>                        <span class="string">'goldpath'</span>:os.path.join(directory, name+goldfile_ext),
<span class="prompt">... </span>                        <span class="string">'testpath'</span>:os.path.join(directory, name+testfile_ext)
<span class="prompt">... </span>                    } <span class="keyword">for</span> name <span class="keyword">in</span> filenames }
<span class="prompt">... </span>    <span class="comment">#print(textfile_names)</span>
<span class="prompt">... </span>
<span class="prompt">... </span>
<span class="prompt">... </span>    <span class="keyword">for</span> key, val <span class="keyword">in</span> golden_dict.items():
<span class="prompt">... </span>        content = tokens_to_hist_extractor(extractor, os.path.abspath(val[<span class="string">'testpath'</span>]))
<span class="prompt">... </span>
<span class="prompt">... </span>        universe = tokens_to_hist_from_universe(os.path.abspath(val[<span class="string">'testpath'</span>]))
<span class="prompt">... </span>
<span class="prompt">... </span>        goldstd = tokens_to_hist_goldstd(os.path.abspath(val[<span class="string">'goldpath'</span>]))
<span class="prompt">... </span>
<span class="prompt">... </span>        val[<span class="string">'measurements'</span>] = calc_praf(goldstd,content,universe)
<span class="prompt">... </span>
<span class="prompt">... </span>    <span class="string">'''
</span><span class="prompt">... </span><span class="string">    #Step 2
</span><span class="prompt">... </span><span class="string">    for key, val in golden_dict.items():
</span><span class="prompt">... </span><span class="string">        #print()
</span><span class="prompt">... </span><span class="string">        print(val['testpath'])
</span><span class="prompt">... </span><span class="string">        val['W'] = tokens_to_hist_from_universe(os.path.abspath(val['testpath']))
</span><span class="prompt">... </span><span class="string">
</span><span class="prompt">... </span><span class="string">        #print(val['W'])
</span><span class="prompt">... </span><span class="string">
</span><span class="prompt">... </span><span class="string">    #Step 3
</span><span class="prompt">... </span><span class="string">    try:
</span><span class="prompt">... </span><span class="string">        for key, val in golden_dict.items():
</span><span class="prompt">... </span><span class="string">            val['G'] = tokens_to_hist_goldstd(os.path.abspath(val['goldpath']))
</span><span class="prompt">... </span><span class="string">    except Exception as e:
</span><span class="prompt">... </span><span class="string">        print(val['goldpath'])
</span><span class="prompt">... </span><span class="string">        raise
</span><span class="prompt">... </span><span class="string">
</span><span class="prompt">... </span><span class="string">    #Step 4
</span><span class="prompt">... </span><span class="string">    for key, val in golden_dict.items():
</span><span class="prompt">... </span><span class="string">        val['C'] = tokens_to_hist_extractor(extractor, os.path.abspath(val['testpath']))
</span><span class="prompt">... </span><span class="string">    '''</span>
<span class="prompt">... </span>    <span class="keyword">return</span> golden_dict
<span class="prompt">... </span>
<span class="prompt">... </span>
<span class="prompt">... </span><span class="keyword">def</span> get_measurements(prep_data):
</span><span class="command-defs"><span class="command"><span class="prompt">... </span>    <span class="keyword">for</span> key, val <span class="keyword">in</span> prep_data.items():
<span class="prompt">... </span>        val[<span class="string">'measurements'</span>] = calc_praf(val[<span class="string">'G'</span>],val[<span class="string">'C'</span>],val[<span class="string">'W'</span>])
<span class="prompt">... </span>
<span class="prompt">... </span>
</span></span><span class="command"><span class="prompt">... </span><span class="keyword">def</span> listsubdir(directory):
</span><span class="command-defs"><span class="command"><span class="prompt">... </span>    <span class="keyword">return</span> [os.path.join(d, f) <span class="keyword">for</span> d <span class="keyword">in</span> directory <span class="keyword">for</span> f <span class="keyword">in</span> os.listdir(d)
<span class="prompt">... </span>            <span class="keyword">if</span> os.path.isdir(os.path.join(d, f))]
<span class="prompt">... </span>
</span></span><span class="command"><span class="prompt">... </span><span class="keyword">def</span> main():
<span class="prompt">... </span>    <span class="comment"># my code here</span>
<span class="prompt">... </span>    <span class="keyword">import</span> eatiht
<span class="prompt">... </span>    dataset_path = [<span class="string">'C:/Users/rodrigo/Desktop/crawl-to-the-future-master/crawl-to-the-future-master/dataset'</span>]
<span class="prompt">... </span>
<span class="prompt">... </span>    folders = listsubdir(listsubdir(dataset_path))
<span class="prompt">... </span>
<span class="prompt">... </span>    years = {}
<span class="prompt">... </span>    domains = {}
<span class="prompt">... </span>
<span class="prompt">... </span>    exhaustive_test = []
<span class="prompt">... </span>    <span class="keyword">for</span> folder <span class="keyword">in</span> folders:
<span class="prompt">... </span>        domainpath,year =  os.path.split(folder)
<span class="prompt">... </span>        domain = os.path.split(domainpath)[<span class="number">1</span>]
<span class="prompt">... </span>        prep_data = prep_data_for_measurements(os.path.abspath(folder),eatiht)
<span class="prompt">... </span>        <span class="comment">#get_measurements(prep_data)</span>
<span class="prompt">... </span>        exhaustive_test.append(prep_data)
<span class="prompt">... </span>
<span class="prompt">... </span>    <span class="comment">#prep_data = prep_data_for_measurements(os.path.abspath(dataset_path),eatiht)</span>
<span class="prompt">... </span>
<span class="prompt">... </span>    <span class="comment">#get_measurements(prep_data)</span>
<span class="prompt">... </span>
<span class="prompt">... </span>
<span class="prompt">... </span>    <span class="string">"""for key, val in W.items():
</span><span class="prompt">... </span><span class="string">        print(key, val)
</span><span class="prompt">... </span><span class="string">        print()
</span><span class="prompt">... </span><span class="string">    """</span>
<span class="prompt">... </span>
<span class="prompt">... </span><span class="keyword">if</span> <span class="builtin">__name__</span> == <span class="string">"__main__"</span>:
<span class="prompt">... </span>    main()
</span><span class="commandsep"></span><span class="output"><span class="exception">Traceback (most recent call last):
  File "&lt;pyshell#0&gt;", line 193, in &lt;module&gt;
    main()
  File "&lt;pyshell#0&gt;", line 169, in main
    folders = listsubdir(listsubdir(dataset_path))
  File "&lt;pyshell#0&gt;", line 161, in listsubdir
    return [os.path.join(d, f) for d in directory for f in os.listdir(d)
WindowsError: [Error 3] The system cannot find the path specified: 'C:/Users/rodrigo/Desktop/crawl-to-the-future-master/crawl-to-the-future-master/dataset/*.*'
</span></span><span class="command"><span class="prompt">&gt;&gt;&gt; </span><span class="keyword">import</span> re <span class="comment">#for tokenizing</span>
<span class="prompt">... </span><span class="keyword">import</span> collections <span class="comment">#for multiset/histogram</span>
<span class="prompt">... </span><span class="keyword">import</span> os
<span class="prompt">... </span><span class="keyword">try</span>:
<span class="prompt">... </span>    <span class="keyword">from</span> StringIO <span class="keyword">import</span> StringIO
<span class="prompt">... </span><span class="keyword">except</span> <span class="builtin">ImportError</span>:
<span class="prompt">... </span>    <span class="keyword">from</span> io <span class="keyword">import</span> StringIO
<span class="prompt">... </span>
<span class="prompt">... </span><span class="keyword">import</span> lxml.html
<span class="prompt">... </span>
<span class="prompt">... </span><span class="keyword">try</span>:
<span class="prompt">... </span>    <span class="builtin">range</span> = <span class="builtin">xrange</span>
<span class="prompt">... </span><span class="keyword">except</span>:
<span class="prompt">... </span>    <span class="keyword">pass</span>
<span class="prompt">... </span>
<span class="prompt">... </span><span class="keyword">def</span> histsum(hist): <span class="keyword">return</span> <span class="builtin">sum</span>(hist.values())
<span class="prompt">... </span>
<span class="prompt">... </span>
<span class="prompt">... </span><span class="comment">#get every non-html word on page (ie. "//text()") as f-distribution</span>
<span class="prompt">... </span><span class="keyword">def</span> tokens_to_hist_from_universe(data_filepath):
<span class="prompt">... </span>
<span class="prompt">... </span>    <span class="keyword">with</span> <span class="builtin">open</span>(data_filepath,<span class="string">'r'</span>,encoding=<span class="string">"utf8"</span>) <span class="keyword">as</span> data_file:
<span class="prompt">... </span>
<span class="prompt">... </span>        <span class="keyword">try</span>:
<span class="prompt">... </span>            parsed_goldhtml = lxml.html.parse(data_file,
<span class="prompt">... </span>                            lxml.html.HTMLParser(encoding=<span class="string">"utf-8"</span>))
<span class="prompt">... </span>        <span class="keyword">except</span>:
<span class="prompt">... </span>            <span class="keyword">print</span>(<span class="builtin">str</span>(data_file.read()))
<span class="prompt">... </span>        tokenized_content = collections.Counter()
<span class="prompt">... </span>
<span class="prompt">... </span>        content = <span class="string">""</span>.join(parsed_goldhtml.xpath(<span class="string">'//text()'</span>))
<span class="prompt">... </span>
<span class="prompt">... </span>        tokenized_content.update(re.split(<span class="string">r'\W+'</span>, content))
<span class="prompt">... </span>
<span class="prompt">... </span>    <span class="keyword">return</span> tokenized_content
<span class="prompt">... </span>
<span class="prompt">... </span>
<span class="prompt">... </span><span class="comment">#get every word from gold std. as f-distribution</span>
<span class="prompt">... </span><span class="keyword">def</span> tokens_to_hist_goldstd(test_filepath):
<span class="prompt">... </span>
<span class="prompt">... </span>    <span class="keyword">with</span> <span class="builtin">open</span>(os.path.abspath(test_filepath), <span class="string">'r'</span>,encoding=<span class="string">"latin1"</span>) <span class="keyword">as</span> f:
<span class="prompt">... </span>
<span class="prompt">... </span>        <span class="comment">#print("test_filepath",os.path.abspath(test_filepath))</span>
<span class="prompt">... </span>        content = <span class="builtin">str</span>(f.read())
<span class="prompt">... </span>
<span class="prompt">... </span>        tokenized_content = collections.Counter()
<span class="prompt">... </span>
<span class="prompt">... </span>        tokenized_content.update(re.split(<span class="string">r'\W+'</span>, content))
<span class="prompt">... </span>
<span class="prompt">... </span>        <span class="keyword">return</span> tokenized_content
<span class="prompt">... </span>
<span class="prompt">... </span>
<span class="prompt">... </span><span class="comment">#get every extracted (predicted) word as f-distribution</span>
<span class="prompt">... </span><span class="keyword">def</span> tokens_to_hist_extractor(extract, data_filepath):
</span><span class="command-defs"><span class="command"><span class="prompt">... </span>    <span class="keyword">try</span>:
<span class="prompt">... </span>        content = extract(data_filepath)
<span class="prompt">... </span>    <span class="keyword">except</span> <span class="builtin">Exception</span>:
<span class="prompt">... </span>        <span class="keyword">print</span>(data_filepath)
<span class="prompt">... </span>        <span class="keyword">raise</span>
<span class="prompt">... </span>        <span class="comment">#raise Exception("\"exception\" method needs to be implemented")</span>
<span class="prompt">... </span>
<span class="prompt">... </span>    tokenized_content = collections.Counter()
<span class="prompt">... </span>    tokenized_content.update(re.split(<span class="string">r'\W+'</span>, content))
<span class="prompt">... </span>
<span class="prompt">... </span>    <span class="keyword">return</span> tokenized_content
<span class="prompt">... </span>
<span class="prompt">... </span>
</span></span><span class="command"><span class="prompt">... </span><span class="keyword">def</span> calc_praf(goldstd,predicted,universe):
<span class="prompt">... </span>
<span class="prompt">... </span>    TP = predicted &amp; goldstd
<span class="prompt">... </span>
<span class="prompt">... </span>    FP = predicted - goldstd
<span class="prompt">... </span>
<span class="prompt">... </span>    FN = (universe - predicted) &amp; goldstd
<span class="prompt">... </span>
<span class="prompt">... </span>    TN = (universe - predicted) &amp; (universe - goldstd)
<span class="prompt">... </span>
<span class="prompt">... </span>    precision = (histsum(TP)*<span class="number">1.0</span>)/histsum(TP+FP)
<span class="prompt">... </span>
<span class="prompt">... </span>    recall = (histsum(TP)*<span class="number">1.0</span>)/histsum(TP+FN)
<span class="prompt">... </span>
<span class="prompt">... </span>    accuracy = (histsum(TP+TN)*<span class="number">1.0</span>)/histsum(TP+FP+FN+TN)
<span class="prompt">... </span>    <span class="keyword">try</span>:
<span class="prompt">... </span>        f1 = <span class="number">2</span> * (((precision*recall)*<span class="number">1.0</span>)/(precision+recall))
<span class="prompt">... </span>    <span class="keyword">except</span> <span class="builtin">ZeroDivisionError</span>:
<span class="prompt">... </span>        f1 = <span class="number">0</span>
<span class="prompt">... </span>        <span class="comment">#print(precision,recall, accuracy)</span>
<span class="prompt">... </span>        <span class="comment">#raise</span>
<span class="prompt">... </span>    <span class="keyword">return</span> {<span class="string">'p'</span>:precision,<span class="string">'r'</span>:recall,<span class="string">'a'</span>:accuracy,<span class="string">'f1'</span>:f1}
<span class="prompt">... </span>
<span class="prompt">... </span>
<span class="prompt">... </span><span class="keyword">def</span> prep_data_for_measurements(directory, extractor,
<span class="prompt">... </span>                        goldfile_ext=<span class="string">'.txt'</span>,
<span class="prompt">... </span>                        testfile_ext=<span class="string">'.html'</span>,
<span class="prompt">... </span>                        pickle_output_name = <span class="builtin">None</span>):
<span class="prompt">... </span>    <span class="string">'''Given a directory, process the files (gold standard) in the following
</span><span class="prompt">... </span><span class="string">        steps:
</span><span class="prompt">... </span><span class="string">    1. Build dictionary of file names to file paths to gold std files and test file
</span><span class="prompt">... </span><span class="string">
</span><span class="prompt">... </span><span class="string">    2. For each file name, get associated "universe" values (all possible outcomes W)
</span><span class="prompt">... </span><span class="string">
</span><span class="prompt">... </span><span class="string">    3. For each file name, get goldstd histogram (G)
</span><span class="prompt">... </span><span class="string">
</span><span class="prompt">... </span><span class="string">    4. For each file name, get extractor's output (C)
</span><span class="prompt">... </span><span class="string">    '''</span>
<span class="prompt">... </span>    <span class="comment">#Step 1</span>
<span class="prompt">... </span>    filenames =  <span class="builtin">set</span>([re.sub((<span class="string">"\\"</span>+ goldfile_ext+<span class="string">"|"</span>+<span class="string">"\\"</span>+testfile_ext),<span class="string">""</span>,name)
<span class="prompt">... </span>                    <span class="keyword">for</span> name <span class="keyword">in</span> os.listdir(directory) ])
<span class="prompt">... </span>
<span class="prompt">... </span>    <span class="keyword">print</span>(<span class="string">"prep_data_for_measurements"</span>,filenames[<span class="number">0</span>])
<span class="prompt">... </span>
<span class="prompt">... </span>    golden_dict = { name:
<span class="prompt">... </span>                    {
<span class="prompt">... </span>                        <span class="string">'domain'</span>: os.path.split(os.path.split(directory)[<span class="number">0</span>])[<span class="number">1</span>],
<span class="prompt">... </span>                        <span class="string">'year'</span>: os.path.split(directory)[<span class="number">1</span>],
<span class="prompt">... </span>                        <span class="string">'goldpath'</span>:os.path.join(directory, name+goldfile_ext),
<span class="prompt">... </span>                        <span class="string">'testpath'</span>:os.path.join(directory, name+testfile_ext)
<span class="prompt">... </span>                    } <span class="keyword">for</span> name <span class="keyword">in</span> filenames }
<span class="prompt">... </span>    <span class="comment">#print(textfile_names)</span>
<span class="prompt">... </span>
<span class="prompt">... </span>
<span class="prompt">... </span>    <span class="keyword">for</span> key, val <span class="keyword">in</span> golden_dict.items():
<span class="prompt">... </span>        content = tokens_to_hist_extractor(extractor, os.path.abspath(val[<span class="string">'testpath'</span>]))
<span class="prompt">... </span>
<span class="prompt">... </span>        universe = tokens_to_hist_from_universe(os.path.abspath(val[<span class="string">'testpath'</span>]))
<span class="prompt">... </span>
<span class="prompt">... </span>        goldstd = tokens_to_hist_goldstd(os.path.abspath(val[<span class="string">'goldpath'</span>]))
<span class="prompt">... </span>
<span class="prompt">... </span>        val[<span class="string">'measurements'</span>] = calc_praf(goldstd,content,universe)
<span class="prompt">... </span>
<span class="prompt">... </span>    <span class="string">'''
</span><span class="prompt">... </span><span class="string">    #Step 2
</span><span class="prompt">... </span><span class="string">    for key, val in golden_dict.items():
</span><span class="prompt">... </span><span class="string">        #print()
</span><span class="prompt">... </span><span class="string">        print(val['testpath'])
</span><span class="prompt">... </span><span class="string">        val['W'] = tokens_to_hist_from_universe(os.path.abspath(val['testpath']))
</span><span class="prompt">... </span><span class="string">
</span><span class="prompt">... </span><span class="string">        #print(val['W'])
</span><span class="prompt">... </span><span class="string">
</span><span class="prompt">... </span><span class="string">    #Step 3
</span><span class="prompt">... </span><span class="string">    try:
</span><span class="prompt">... </span><span class="string">        for key, val in golden_dict.items():
</span><span class="prompt">... </span><span class="string">            val['G'] = tokens_to_hist_goldstd(os.path.abspath(val['goldpath']))
</span><span class="prompt">... </span><span class="string">    except Exception as e:
</span><span class="prompt">... </span><span class="string">        print(val['goldpath'])
</span><span class="prompt">... </span><span class="string">        raise
</span><span class="prompt">... </span><span class="string">
</span><span class="prompt">... </span><span class="string">    #Step 4
</span><span class="prompt">... </span><span class="string">    for key, val in golden_dict.items():
</span><span class="prompt">... </span><span class="string">        val['C'] = tokens_to_hist_extractor(extractor, os.path.abspath(val['testpath']))
</span><span class="prompt">... </span><span class="string">    '''</span>
<span class="prompt">... </span>    <span class="keyword">return</span> golden_dict
<span class="prompt">... </span>
<span class="prompt">... </span>
<span class="prompt">... </span><span class="keyword">def</span> get_measurements(prep_data):
</span><span class="command-defs"><span class="command"><span class="prompt">... </span>    <span class="keyword">for</span> key, val <span class="keyword">in</span> prep_data.items():
<span class="prompt">... </span>        val[<span class="string">'measurements'</span>] = calc_praf(val[<span class="string">'G'</span>],val[<span class="string">'C'</span>],val[<span class="string">'W'</span>])
<span class="prompt">... </span>
<span class="prompt">... </span>
</span></span><span class="command"><span class="prompt">... </span><span class="keyword">def</span> listsubdir(directory):
</span><span class="command-defs"><span class="command"><span class="prompt">... </span>    <span class="keyword">return</span> [os.path.join(d, f) <span class="keyword">for</span> d <span class="keyword">in</span> directory <span class="keyword">for</span> f <span class="keyword">in</span> os.listdir(d)
<span class="prompt">... </span>            <span class="keyword">if</span> os.path.isdir(os.path.join(d, f))]</span></span><span class="command">
</span><span class="commandsep"></span><span class="command"><span class="prompt">&gt;&gt;&gt; </span><span class="keyword">import</span> eatiht
<span class="prompt">... </span>dataset_path = [<span class="string">'C:/Users/rodrigo/Desktop/crawl-to-the-future-master/crawl-to-the-future-master/dataset'</span>]
<span class="prompt">... </span>
<span class="prompt">... </span>folders = listsubdir(listsubdir(dataset_path))
</span><span class="commandsep"></span><span class="output"><span class="exception">Traceback (most recent call last):
  File "&lt;pyshell#2&gt;", line 4, in &lt;module&gt;
    folders = listsubdir(listsubdir(dataset_path))
  File "&lt;pyshell#1&gt;", line 161, in listsubdir
    return [os.path.join(d, f) for d in directory for f in os.listdir(d)
WindowsError: [Error 3] The system cannot find the path specified: 'C:/Users/rodrigo/Desktop/crawl-to-the-future-master/crawl-to-the-future-master/dataset/*.*'
</span></span><span class="command"><span class="prompt">&gt;&gt;&gt; </span><span class="keyword">import</span> eatiht
<span class="prompt">... </span>dataset_path = [<span class="string">'C:/crawlToTheFuture/crawl-to-the-future-master/dataset'</span>]
<span class="prompt">... </span>
<span class="prompt">... </span>folders = listsubdir(listsubdir(dataset_path))
</span><span class="commandsep"></span><span class="output"><span class="exception">Traceback (most recent call last):
  File "&lt;pyshell#3&gt;", line 4, in &lt;module&gt;
    folders = listsubdir(listsubdir(dataset_path))
  File "&lt;pyshell#1&gt;", line 161, in listsubdir
    return [os.path.join(d, f) for d in directory for f in os.listdir(d)
WindowsError: [Error 3] The system cannot find the path specified: 'C:/crawlToTheFuture/crawl-to-the-future-master/dataset/*.*'
</span></span><span class="command"><span class="prompt">&gt;&gt;&gt; </span><span class="keyword">import</span> eatiht
<span class="prompt">... </span>dataset_path = [<span class="string">'C:/crawlToTheFuture/crawl-to-the-future/dataset/'</span>]
<span class="prompt">... </span>
<span class="prompt">... </span>folders = listsubdir(listsubdir(dataset_path))
</span><span class="commandsep"></span><span class="command"><span class="prompt">&gt;&gt;&gt; </span>folders
</span><span class="commandsep"></span><span class="output"><span class="result-ind">0: </span><span class="result">['C:/crawlToTheFuture/crawl-to-the-future/dataset/entertainment.msn.com\\2000</span></span><span class="folded"><span class="output"><span class="result">',
 'C:/crawlToTheFuture/crawl-to-the-future/dataset/entertainment.msn.com\\2005',
 'C:/crawlToTheFuture/crawl-to-the-future/dataset/entertainment.msn.com\\2010',
 'C:/crawlToTheFuture/crawl-to-the-future/dataset/entertainment.msn.com\\2015',
 'C:/crawlToTheFuture/crawl-to-the-future/dataset/news.bbc.co.uk\\2000',
 'C:/crawlToTheFuture/crawl-to-the-future/dataset/news.bbc.co.uk\\2005',
 'C:/crawlToTheFuture/crawl-to-the-future/dataset/news.bbc.co.uk\\2010',
 'C:/crawlToTheFuture/crawl-to-the-future/dataset/news.bbc.co.uk\\2015',
 'C:/crawlToTheFuture/crawl-to-the-future/dataset/news.yahoo.com\\2000',
 'C:/crawlToTheFuture/crawl-to-the-future/dataset/news.yahoo.com\\2005',
 'C:/crawlToTheFuture/crawl-to-the-future/dataset/news.yahoo.com\\2010',
 'C:/crawlToTheFuture/crawl-to-the-future/dataset/news.yahoo.com\\2015',
 'C:/crawlToTheFuture/crawl-to-the-future/dataset/thenation.com\\2000',
 'C:/crawlToTheFuture/crawl-to-the-future/dataset/thenation.com\\2005',
 'C:/crawlToTheFuture/crawl-to-the-future/dataset/thenation.com\\2010',
 'C:/crawlToTheFuture/crawl-to-the-future/dataset/thenation.com\\2015',
 'C:/crawlToTheFuture/crawl-to-the-future/dataset/www.cnn.com\\2000',
 'C:/crawlToTheFuture/crawl-to-the-future/dataset/www.cnn.com\\2005',
 'C:/crawlToTheFuture/crawl-to-the-future/dataset/www.cnn.com\\2010',
 'C:/crawlToTheFuture/crawl-to-the-future/dataset/www.cnn.com\\2015',
 'C:/crawlToTheFuture/crawl-to-the-future/dataset/www.esquire.com\\2000',
 'C:/crawlToTheFuture/crawl-to-the-future/dataset/www.esquire.com\\2005',
 'C:/crawlToTheFuture/crawl-to-the-future/dataset/www.esquire.com\\2010',
 'C:/crawlToTheFuture/crawl-to-the-future/dataset/www.esquire.com\\2015',
 'C:/crawlToTheFuture/crawl-to-the-future/dataset/www.forbes.com\\2000',
 'C:/crawlToTheFuture/crawl-to-the-future/dataset/www.forbes.com\\2005',
 'C:/crawlToTheFuture/crawl-to-the-future/dataset/www.forbes.com\\2010',
 'C:/crawlToTheFuture/crawl-to-the-future/dataset/www.forbes.com\\2015',
 'C:/crawlToTheFuture/crawl-to-the-future/dataset/www.foxnews.com\\2000',
 'C:/crawlToTheFuture/crawl-to-the-future/dataset/www.foxnews.com\\2005',
 'C:/crawlToTheFuture/crawl-to-the-future/dataset/www.foxnews.com\\2010',
 'C:/crawlToTheFuture/crawl-to-the-future/dataset/www.foxnews.com\\2015',
 'C:/crawlToTheFuture/crawl-to-the-future/dataset/www.latimes.com\\2000',
 'C:/crawlToTheFuture/crawl-to-the-future/dataset/www.latimes.com\\2005',
 'C:/crawlToTheFuture/crawl-to-the-future/dataset/www.latimes.com\\2010',
 'C:/crawlToTheFuture/crawl-to-the-future/dataset/www.latimes.com\\2015',
 'C:/crawlToTheFuture/crawl-to-the-future/dataset/www.nymag.com\\2000',
 'C:/crawlToTheFuture/crawl-to-the-future/dataset/www.nymag.com\\2005',
 'C:/crawlToTheFuture/crawl-to-the-future/dataset/www.nymag.com\\2010',
 'C:/crawlToTheFuture/crawl-to-the-future/dataset/www.nymag.com\\2015']
</span></span></span><span class="fold-message">[About 39 more lines. Double-click to unfold]
</span><span class="command"><span class="prompt">&gt;&gt;&gt; </span>exhaustive_test = []
<span class="prompt">... </span><span class="keyword">for</span> folder <span class="keyword">in</span> folders:
<span class="prompt">... </span>    domainpath,year =  os.path.split(folder)
<span class="prompt">... </span>    domain = os.path.split(domainpath)[<span class="number">1</span>]
<span class="prompt">... </span>    prep_data = prep_data_for_measurements(os.path.abspath(folder),eatiht)
<span class="prompt">... </span>    <span class="comment">#get_measurements(prep_data)</span>
<span class="prompt">... </span>    exhaustive_test.append(prep_data)
</span><span class="commandsep"></span><span class="output"><span class="exception">Traceback (most recent call last):
  File "&lt;pyshell#6&gt;", line 6, in &lt;module&gt;
    prep_data = prep_data_for_measurements(os.path.abspath(folder),eatiht)
  File "&lt;pyshell#1&gt;", line 110, in prep_data_for_measurements
    print("prep_data_for_measurements",filenames[0])
TypeError: 'set' object does not support indexing
</span></span><span class="command"><span class="prompt">&gt;&gt;&gt; </span><span class="keyword">import</span> re <span class="comment">#for tokenizing</span>
<span class="prompt">... </span><span class="keyword">import</span> collections <span class="comment">#for multiset/histogram</span>
<span class="prompt">... </span><span class="keyword">import</span> os
<span class="prompt">... </span><span class="keyword">try</span>:
<span class="prompt">... </span>    <span class="keyword">from</span> StringIO <span class="keyword">import</span> StringIO
<span class="prompt">... </span><span class="keyword">except</span> <span class="builtin">ImportError</span>:
<span class="prompt">... </span>    <span class="keyword">from</span> io <span class="keyword">import</span> StringIO
<span class="prompt">... </span>
<span class="prompt">... </span><span class="keyword">import</span> lxml.html
<span class="prompt">... </span>
<span class="prompt">... </span><span class="keyword">try</span>:
<span class="prompt">... </span>    <span class="builtin">range</span> = <span class="builtin">xrange</span>
<span class="prompt">... </span><span class="keyword">except</span>:
<span class="prompt">... </span>    <span class="keyword">pass</span>
<span class="prompt">... </span>
<span class="prompt">... </span><span class="keyword">def</span> histsum(hist): <span class="keyword">return</span> <span class="builtin">sum</span>(hist.values())
<span class="prompt">... </span>
<span class="prompt">... </span>
<span class="prompt">... </span><span class="comment">#get every non-html word on page (ie. "//text()") as f-distribution</span>
<span class="prompt">... </span><span class="keyword">def</span> tokens_to_hist_from_universe(data_filepath):
<span class="prompt">... </span>
<span class="prompt">... </span>    <span class="keyword">with</span> <span class="builtin">open</span>(data_filepath,<span class="string">'r'</span>,encoding=<span class="string">"utf8"</span>) <span class="keyword">as</span> data_file:
<span class="prompt">... </span>
<span class="prompt">... </span>        <span class="keyword">try</span>:
<span class="prompt">... </span>            parsed_goldhtml = lxml.html.parse(data_file,
<span class="prompt">... </span>                            lxml.html.HTMLParser(encoding=<span class="string">"utf-8"</span>))
<span class="prompt">... </span>        <span class="keyword">except</span>:
<span class="prompt">... </span>            <span class="keyword">print</span>(<span class="builtin">str</span>(data_file.read()))
<span class="prompt">... </span>        tokenized_content = collections.Counter()
<span class="prompt">... </span>
<span class="prompt">... </span>        content = <span class="string">""</span>.join(parsed_goldhtml.xpath(<span class="string">'//text()'</span>))
<span class="prompt">... </span>
<span class="prompt">... </span>        tokenized_content.update(re.split(<span class="string">r'\W+'</span>, content))
<span class="prompt">... </span>
<span class="prompt">... </span>    <span class="keyword">return</span> tokenized_content
<span class="prompt">... </span>
<span class="prompt">... </span>
<span class="prompt">... </span><span class="comment">#get every word from gold std. as f-distribution</span>
<span class="prompt">... </span><span class="keyword">def</span> tokens_to_hist_goldstd(test_filepath):
<span class="prompt">... </span>
<span class="prompt">... </span>    <span class="keyword">with</span> <span class="builtin">open</span>(os.path.abspath(test_filepath), <span class="string">'r'</span>,encoding=<span class="string">"latin1"</span>) <span class="keyword">as</span> f:
<span class="prompt">... </span>
<span class="prompt">... </span>        <span class="comment">#print("test_filepath",os.path.abspath(test_filepath))</span>
<span class="prompt">... </span>        content = <span class="builtin">str</span>(f.read())
<span class="prompt">... </span>
<span class="prompt">... </span>        tokenized_content = collections.Counter()
<span class="prompt">... </span>
<span class="prompt">... </span>        tokenized_content.update(re.split(<span class="string">r'\W+'</span>, content))
<span class="prompt">... </span>
<span class="prompt">... </span>        <span class="keyword">return</span> tokenized_content
<span class="prompt">... </span>
<span class="prompt">... </span>
<span class="prompt">... </span><span class="comment">#get every extracted (predicted) word as f-distribution</span>
<span class="prompt">... </span><span class="keyword">def</span> tokens_to_hist_extractor(extract, data_filepath):
</span><span class="command-defs"><span class="command"><span class="prompt">... </span>    <span class="keyword">try</span>:
<span class="prompt">... </span>        content = extract(data_filepath)
<span class="prompt">... </span>    <span class="keyword">except</span> <span class="builtin">Exception</span>:
<span class="prompt">... </span>        <span class="keyword">print</span>(data_filepath)
<span class="prompt">... </span>        <span class="keyword">raise</span>
<span class="prompt">... </span>        <span class="comment">#raise Exception("\"exception\" method needs to be implemented")</span>
<span class="prompt">... </span>
<span class="prompt">... </span>    tokenized_content = collections.Counter()
<span class="prompt">... </span>    tokenized_content.update(re.split(<span class="string">r'\W+'</span>, content))
<span class="prompt">... </span>
<span class="prompt">... </span>    <span class="keyword">return</span> tokenized_content
<span class="prompt">... </span>
<span class="prompt">... </span>
</span></span><span class="command"><span class="prompt">... </span><span class="keyword">def</span> calc_praf(goldstd,predicted,universe):
<span class="prompt">... </span>
<span class="prompt">... </span>    TP = predicted &amp; goldstd
<span class="prompt">... </span>
<span class="prompt">... </span>    FP = predicted - goldstd
<span class="prompt">... </span>
<span class="prompt">... </span>    FN = (universe - predicted) &amp; goldstd
<span class="prompt">... </span>
<span class="prompt">... </span>    TN = (universe - predicted) &amp; (universe - goldstd)
<span class="prompt">... </span>
<span class="prompt">... </span>    precision = (histsum(TP)*<span class="number">1.0</span>)/histsum(TP+FP)
<span class="prompt">... </span>
<span class="prompt">... </span>    recall = (histsum(TP)*<span class="number">1.0</span>)/histsum(TP+FN)
<span class="prompt">... </span>
<span class="prompt">... </span>    accuracy = (histsum(TP+TN)*<span class="number">1.0</span>)/histsum(TP+FP+FN+TN)
<span class="prompt">... </span>    <span class="keyword">try</span>:
<span class="prompt">... </span>        f1 = <span class="number">2</span> * (((precision*recall)*<span class="number">1.0</span>)/(precision+recall))
<span class="prompt">... </span>    <span class="keyword">except</span> <span class="builtin">ZeroDivisionError</span>:
<span class="prompt">... </span>        f1 = <span class="number">0</span>
<span class="prompt">... </span>        <span class="comment">#print(precision,recall, accuracy)</span>
<span class="prompt">... </span>        <span class="comment">#raise</span>
<span class="prompt">... </span>    <span class="keyword">return</span> {<span class="string">'p'</span>:precision,<span class="string">'r'</span>:recall,<span class="string">'a'</span>:accuracy,<span class="string">'f1'</span>:f1}
<span class="prompt">... </span>
<span class="prompt">... </span>
<span class="prompt">... </span><span class="keyword">def</span> prep_data_for_measurements(directory, extractor,
<span class="prompt">... </span>                        goldfile_ext=<span class="string">'.txt'</span>,
<span class="prompt">... </span>                        testfile_ext=<span class="string">'.html'</span>,
<span class="prompt">... </span>                        pickle_output_name = <span class="builtin">None</span>):
<span class="prompt">... </span>    <span class="string">'''Given a directory, process the files (gold standard) in the following
</span><span class="prompt">... </span><span class="string">        steps:
</span><span class="prompt">... </span><span class="string">    1. Build dictionary of file names to file paths to gold std files and test file
</span><span class="prompt">... </span><span class="string">
</span><span class="prompt">... </span><span class="string">    2. For each file name, get associated "universe" values (all possible outcomes W)
</span><span class="prompt">... </span><span class="string">
</span><span class="prompt">... </span><span class="string">    3. For each file name, get goldstd histogram (G)
</span><span class="prompt">... </span><span class="string">
</span><span class="prompt">... </span><span class="string">    4. For each file name, get extractor's output (C)
</span><span class="prompt">... </span><span class="string">    '''</span>
<span class="prompt">... </span>    <span class="comment">#Step 1</span>
<span class="prompt">... </span>    filenames =  <span class="builtin">set</span>([re.sub((<span class="string">"\\"</span>+ goldfile_ext+<span class="string">"|"</span>+<span class="string">"\\"</span>+testfile_ext),<span class="string">""</span>,name)
<span class="prompt">... </span>                    <span class="keyword">for</span> name <span class="keyword">in</span> os.listdir(directory) ])
<span class="prompt">... </span>
<span class="prompt">... </span>    <span class="comment">#print("prep_data_for_measurements",filenames[0])</span>
<span class="prompt">... </span>
<span class="prompt">... </span>    golden_dict = { name:
<span class="prompt">... </span>                    {
<span class="prompt">... </span>                        <span class="string">'domain'</span>: os.path.split(os.path.split(directory)[<span class="number">0</span>])[<span class="number">1</span>],
<span class="prompt">... </span>                        <span class="string">'year'</span>: os.path.split(directory)[<span class="number">1</span>],
<span class="prompt">... </span>                        <span class="string">'goldpath'</span>:os.path.join(directory, name+goldfile_ext),
<span class="prompt">... </span>                        <span class="string">'testpath'</span>:os.path.join(directory, name+testfile_ext)
<span class="prompt">... </span>                    } <span class="keyword">for</span> name <span class="keyword">in</span> filenames }
<span class="prompt">... </span>    <span class="comment">#print(textfile_names)</span>
<span class="prompt">... </span>
<span class="prompt">... </span>
<span class="prompt">... </span>    <span class="keyword">for</span> key, val <span class="keyword">in</span> golden_dict.items():
<span class="prompt">... </span>        content = tokens_to_hist_extractor(extractor, os.path.abspath(val[<span class="string">'testpath'</span>]))
<span class="prompt">... </span>
<span class="prompt">... </span>        universe = tokens_to_hist_from_universe(os.path.abspath(val[<span class="string">'testpath'</span>]))
<span class="prompt">... </span>
<span class="prompt">... </span>        goldstd = tokens_to_hist_goldstd(os.path.abspath(val[<span class="string">'goldpath'</span>]))
<span class="prompt">... </span>
<span class="prompt">... </span>        val[<span class="string">'measurements'</span>] = calc_praf(goldstd,content,universe)
<span class="prompt">... </span>
<span class="prompt">... </span>    <span class="string">'''
</span><span class="prompt">... </span><span class="string">    #Step 2
</span><span class="prompt">... </span><span class="string">    for key, val in golden_dict.items():
</span><span class="prompt">... </span><span class="string">        #print()
</span><span class="prompt">... </span><span class="string">        print(val['testpath'])
</span><span class="prompt">... </span><span class="string">        val['W'] = tokens_to_hist_from_universe(os.path.abspath(val['testpath']))
</span><span class="prompt">... </span><span class="string">
</span><span class="prompt">... </span><span class="string">        #print(val['W'])
</span><span class="prompt">... </span><span class="string">
</span><span class="prompt">... </span><span class="string">    #Step 3
</span><span class="prompt">... </span><span class="string">    try:
</span><span class="prompt">... </span><span class="string">        for key, val in golden_dict.items():
</span><span class="prompt">... </span><span class="string">            val['G'] = tokens_to_hist_goldstd(os.path.abspath(val['goldpath']))
</span><span class="prompt">... </span><span class="string">    except Exception as e:
</span><span class="prompt">... </span><span class="string">        print(val['goldpath'])
</span><span class="prompt">... </span><span class="string">        raise
</span><span class="prompt">... </span><span class="string">
</span><span class="prompt">... </span><span class="string">    #Step 4
</span><span class="prompt">... </span><span class="string">    for key, val in golden_dict.items():
</span><span class="prompt">... </span><span class="string">        val['C'] = tokens_to_hist_extractor(extractor, os.path.abspath(val['testpath']))
</span><span class="prompt">... </span><span class="string">    '''</span>
<span class="prompt">... </span>    <span class="keyword">return</span> golden_dict
<span class="prompt">... </span>
<span class="prompt">... </span>
<span class="prompt">... </span><span class="keyword">def</span> get_measurements(prep_data):
</span><span class="command-defs"><span class="command"><span class="prompt">... </span>    <span class="keyword">for</span> key, val <span class="keyword">in</span> prep_data.items():
<span class="prompt">... </span>        val[<span class="string">'measurements'</span>] = calc_praf(val[<span class="string">'G'</span>],val[<span class="string">'C'</span>],val[<span class="string">'W'</span>])
<span class="prompt">... </span>
<span class="prompt">... </span>
</span></span><span class="command"><span class="prompt">... </span><span class="keyword">def</span> listsubdir(directory):
</span><span class="command-defs"><span class="command"><span class="prompt">... </span>    <span class="keyword">return</span> [os.path.join(d, f) <span class="keyword">for</span> d <span class="keyword">in</span> directory <span class="keyword">for</span> f <span class="keyword">in</span> os.listdir(d)
<span class="prompt">... </span>            <span class="keyword">if</span> os.path.isdir(os.path.join(d, f))]</span></span><span class="command">
</span><span class="commandsep"></span><span class="command"><span class="prompt">&gt;&gt;&gt; </span>exhaustive_test = []
<span class="prompt">... </span><span class="keyword">for</span> folder <span class="keyword">in</span> folders:
<span class="prompt">... </span>    domainpath,year =  os.path.split(folder)
<span class="prompt">... </span>    domain = os.path.split(domainpath)[<span class="number">1</span>]
<span class="prompt">... </span>    prep_data = prep_data_for_measurements(os.path.abspath(folder),eatiht)
<span class="prompt">... </span>    <span class="comment">#get_measurements(prep_data)</span>
<span class="prompt">... </span>    exhaustive_test.append(prep_data)
</span><span class="commandsep"></span><span class="output"><span class="stdout">C:\crawlToTheFuture\crawl-to-the-future\dataset\entertainment.msn.com\2000\20001110075800_www_entertainment_msn_com_tv_gist_fri02_asp.html
</span><span class="exception">Traceback (most recent call last):
  File "&lt;pyshell#8&gt;", line 5, in &lt;module&gt;
    prep_data = prep_data_for_measurements(os.path.abspath(folder),eatiht)
  File "&lt;pyshell#7&gt;", line 123, in prep_data_for_measurements
    content = tokens_to_hist_extractor(extractor, os.path.abspath(val['testpath']))
  File "&lt;pyshell#7&gt;", line 56, in tokens_to_hist_extractor
    content = extract(data_filepath)
TypeError: 'module' object is not callable
</span></span><span class="command"><span class="prompt">&gt;&gt;&gt; </span>exhaustive_test = []
<span class="prompt">... </span><span class="keyword">for</span> folder <span class="keyword">in</span> folders:
<span class="prompt">... </span>    domainpath,year =  os.path.split(folder)
<span class="prompt">... </span>    domain = os.path.split(domainpath)[<span class="number">1</span>]
<span class="prompt">... </span>    prep_data = prep_data_for_measurements(os.path.abspath(folder),eatiht.etv2.extract)
<span class="prompt">... </span>    <span class="comment">#get_measurements(prep_data)</span>
<span class="prompt">... </span>    exhaustive_test.append(prep_data)
</span><span class="commandsep"></span><span class="output"><span class="exception">Traceback (most recent call last):
  File "&lt;pyshell#9&gt;", line 5, in &lt;module&gt;
    prep_data = prep_data_for_measurements(os.path.abspath(folder),eatiht.etv2.extract)
  File "&lt;pyshell#7&gt;", line 123, in prep_data_for_measurements
    content = tokens_to_hist_extractor(extractor, os.path.abspath(val['testpath']))
  File "&lt;pyshell#7&gt;", line 63, in tokens_to_hist_extractor
    tokenized_content.update(re.split(r'\W+', content))
  File "c:\python27\lib\re.py", line 167, in split
    return _compile(pattern, flags).split(string, maxsplit)
TypeError: expected string or buffer
</span></span><span class="command"><span class="prompt">&gt;&gt;&gt; </span><span class="comment">#get every extracted (predicted) word as f-distribution</span>
<span class="prompt">... </span><span class="keyword">def</span> tokens_to_hist_extractor(extract, data_filepath):
</span><span class="command-defs"><span class="command"><span class="prompt">... </span>    <span class="keyword">try</span>:
<span class="prompt">... </span>        content = extract(data_filepath)
<span class="prompt">... </span>    <span class="keyword">except</span> <span class="builtin">Exception</span>:
<span class="prompt">... </span>        <span class="keyword">print</span>(data_filepath)
<span class="prompt">... </span>        <span class="keyword">raise</span>
<span class="prompt">... </span>        <span class="comment">#raise Exception("\"exception\" method needs to be implemented")</span>
<span class="prompt">... </span>
<span class="prompt">... </span>    tokenized_content = collections.Counter()
<span class="prompt">... </span>    <span class="keyword">try</span>:
<span class="prompt">... </span>        tokenized_content.update(re.split(<span class="string">r'\W+'</span>, content))
<span class="prompt">... </span>    <span class="keyword">except</span>:
<span class="prompt">... </span>        <span class="keyword">print</span>(content)
<span class="prompt">... </span>    <span class="keyword">return</span> tokenized_content</span></span><span class="command">
</span><span class="commandsep"></span><span class="command"><span class="prompt">&gt;&gt;&gt; </span>exhaustive_test = []
<span class="prompt">... </span><span class="keyword">for</span> folder <span class="keyword">in</span> folders:
<span class="prompt">... </span>    domainpath,year =  os.path.split(folder)
<span class="prompt">... </span>    domain = os.path.split(domainpath)[<span class="number">1</span>]
<span class="prompt">... </span>    prep_data = prep_data_for_measurements(os.path.abspath(folder),eatiht.etv2.extract)
<span class="prompt">... </span>    <span class="comment">#get_measurements(prep_data)</span>
<span class="prompt">... </span>    exhaustive_test.append(prep_data)
</span><span class="commandsep"></span><span class="output"><span class="stdout">&lt;eatiht.eatiht_trees.TextNodeTree object at 0x00000000036D7CF8&gt;
</span><span class="exception">Traceback (most recent call last):
  File "&lt;pyshell#11&gt;", line 5, in &lt;module&gt;
    prep_data = prep_data_for_measurements(os.path.abspath(folder),eatiht.etv2.extract)
  File "&lt;pyshell#7&gt;", line 125, in prep_data_for_measurements
    universe = tokens_to_hist_from_universe(os.path.abspath(val['testpath']))
  File "&lt;pyshell#7&gt;", line 22, in tokens_to_hist_from_universe
    with open(data_filepath,'r',encoding="utf8") as data_file:
TypeError: 'encoding' is an invalid keyword argument for this function
</span></span><span class="command"><span class="prompt">&gt;&gt;&gt; </span>exhaustive_test = []
<span class="prompt">... </span><span class="keyword">for</span> folder <span class="keyword">in</span> folders:
<span class="prompt">... </span>    domainpath,year =  os.path.split(folder)
<span class="prompt">... </span>    domain = os.path.split(domainpath)[<span class="number">1</span>]
<span class="prompt">... </span>    prep_data = prep_data_for_measurements(os.path.abspath(folder),<span class="keyword">lambda</span> x: eatiht.etv2.extract(x).get_text())
<span class="prompt">... </span>    <span class="comment">#get_measurements(prep_data)</span>
<span class="prompt">... </span>    exhaustive_test.append(prep_data)
</span><span class="commandsep"></span><span class="output"><span class="exception">Traceback (most recent call last):
  File "&lt;pyshell#12&gt;", line 5, in &lt;module&gt;
    prep_data = prep_data_for_measurements(os.path.abspath(folder),lambda x: eatiht.etv2.extract(x).get_text())
  File "&lt;pyshell#7&gt;", line 125, in prep_data_for_measurements
    universe = tokens_to_hist_from_universe(os.path.abspath(val['testpath']))
  File "&lt;pyshell#7&gt;", line 22, in tokens_to_hist_from_universe
    with open(data_filepath,'r',encoding="utf8") as data_file:
TypeError: 'encoding' is an invalid keyword argument for this function
</span></span><span class="command"><span class="prompt">&gt;&gt;&gt; </span><span class="comment">#get every non-html word on page (ie. "//text()") as f-distribution</span>
<span class="prompt">... </span><span class="keyword">def</span> tokens_to_hist_from_universe(data_filepath):
<span class="prompt">... </span>
<span class="prompt">... </span>    <span class="keyword">with</span> <span class="builtin">open</span>(data_filepath,<span class="string">'r'</span>) <span class="keyword">as</span> data_file:
<span class="prompt">... </span>
<span class="prompt">... </span>        <span class="keyword">try</span>:
<span class="prompt">... </span>            parsed_goldhtml = lxml.html.parse(data_file,
<span class="prompt">... </span>                            lxml.html.HTMLParser(encoding=<span class="string">"utf-8"</span>))
<span class="prompt">... </span>        <span class="keyword">except</span>:
<span class="prompt">... </span>            <span class="keyword">print</span>(<span class="builtin">str</span>(data_file.read()))
<span class="prompt">... </span>        tokenized_content = collections.Counter()
<span class="prompt">... </span>
<span class="prompt">... </span>        content = <span class="string">""</span>.join(parsed_goldhtml.xpath(<span class="string">'//text()'</span>))
<span class="prompt">... </span>
<span class="prompt">... </span>        tokenized_content.update(re.split(<span class="string">r'\W+'</span>, content))
<span class="prompt">... </span>
<span class="prompt">... </span>    <span class="keyword">return</span> tokenized_content
<span class="prompt">... </span>
<span class="prompt">... </span>
<span class="prompt">... </span><span class="comment">#get every word from gold std. as f-distribution</span>
<span class="prompt">... </span><span class="keyword">def</span> tokens_to_hist_goldstd(test_filepath):
<span class="prompt">... </span>
<span class="prompt">... </span>    <span class="keyword">with</span> <span class="builtin">open</span>(os.path.abspath(test_filepath), <span class="string">'r'</span>) <span class="keyword">as</span> f:
<span class="prompt">... </span>
<span class="prompt">... </span>        <span class="comment">#print("test_filepath",os.path.abspath(test_filepath))</span>
<span class="prompt">... </span>        content = <span class="builtin">str</span>(f.read())
<span class="prompt">... </span>
<span class="prompt">... </span>        tokenized_content = collections.Counter()
<span class="prompt">... </span>
<span class="prompt">... </span>        tokenized_content.update(re.split(<span class="string">r'\W+'</span>, content))
<span class="prompt">... </span>
<span class="prompt">... </span>        <span class="keyword">return</span> tokenized_content
</span><span class="commandsep"></span><span class="command"><span class="prompt">&gt;&gt;&gt; </span>exhaustive_test = []
<span class="prompt">... </span><span class="keyword">for</span> folder <span class="keyword">in</span> folders:
<span class="prompt">... </span>    domainpath,year =  os.path.split(folder)
<span class="prompt">... </span>    domain = os.path.split(domainpath)[<span class="number">1</span>]
<span class="prompt">... </span>    prep_data = prep_data_for_measurements(os.path.abspath(folder),<span class="keyword">lambda</span> x: eatiht.etv2.extract(x).get_text())
<span class="prompt">... </span>    <span class="comment">#get_measurements(prep_data)</span>
<span class="prompt">... </span>    exhaustive_test.append(prep_data)
</span><span class="commandsep"></span><span class="output"><span class="stdout">C:\crawlToTheFuture\crawl-to-the-future\dataset\www.esquire.com\2000\Esquire Women Women We Love Gallery - Carrie-Anne Moss.html
</span><span class="exception">Traceback (most recent call last):
  File "&lt;pyshell#14&gt;", line 5, in &lt;module&gt;
    prep_data = prep_data_for_measurements(os.path.abspath(folder),lambda x: eatiht.etv2.extract(x).get_text())
  File "&lt;pyshell#7&gt;", line 123, in prep_data_for_measurements
    content = tokens_to_hist_extractor(extractor, os.path.abspath(val['testpath']))
  File "&lt;pyshell#10&gt;", line 4, in tokens_to_hist_extractor
    content = extract(data_filepath)
  File "&lt;pyshell#14&gt;", line 5, in &lt;lambda&gt;
    prep_data = prep_data_for_measurements(os.path.abspath(folder),lambda x: eatiht.etv2.extract(x).get_text())
  File "c:\users\rodrigo\desktop\eatiht_project\eatiht\eatiht\etv2.py", line 214, in extract
    subtrees = get_textnode_subtrees(html_tree)
  File "c:\users\rodrigo\desktop\eatiht_project\eatiht\eatiht\etv2.py", line 203, in get_textnode_subtrees
    " custom xpath, min_str_length value, or both")
Exception: No text nodes satisfied the xpath:

//body                        //*[not(                            self::script or                             self::noscript or                             self::style or                             self::i or                             self::b or                             self::strong or                             self::span or                             self::a)]                             /text()[string-length(normalize-space()) &gt; 20]/..

This can be due to user's custom xpath, min_str_length value, or both
</span></span><span class="command"><span class="prompt">&gt;&gt;&gt; </span>exhaustive_test = []
<span class="prompt">... </span><span class="keyword">for</span> folder <span class="keyword">in</span> folders:
<span class="prompt">... </span>    domainpath,year =  os.path.split(folder)
<span class="prompt">... </span>    domain = os.path.split(domainpath)[<span class="number">1</span>]
<span class="prompt">... </span>    prep_data = prep_data_for_measurements(os.path.abspath(folder),<span class="keyword">lambda</span> x: eatiht.extract(x).get_text())
<span class="prompt">... </span>    <span class="comment">#get_measurements(prep_data)</span>
<span class="prompt">... </span>    exhaustive_test.append(prep_data)
</span><span class="commandsep"></span><span class="output"><span class="stdout">C:\crawlToTheFuture\crawl-to-the-future\dataset\entertainment.msn.com\2000\20001</span></span><span class="folded"><span class="output"><span class="stdout">110075800_www_entertainment_msn_com_tv_gist_fri02_asp.html
</span><span class="exception">Traceback (most recent call last):
  File "&lt;pyshell#15&gt;", line 5, in &lt;module&gt;
    prep_data = prep_data_for_measurements(os.path.abspath(folder),lambda x: eatiht.extract(x).get_text())
  File "&lt;pyshell#7&gt;", line 123, in prep_data_for_measurements
    content = tokens_to_hist_extractor(extractor, os.path.abspath(val['testpath']))
  File "&lt;pyshell#10&gt;", line 4, in tokens_to_hist_extractor
    content = extract(data_filepath)
  File "&lt;pyshell#15&gt;", line 5, in &lt;lambda&gt;
    prep_data = prep_data_for_measurements(os.path.abspath(folder),lambda x: eatiht.extract(x).get_text())
AttributeError: 'unicode' object has no attribute 'get_text'
</span></span></span><span class="fold-message">[About 10 more lines. Double-click to unfold]
</span><span class="command"><span class="prompt">&gt;&gt;&gt; </span>exhaustive_test = []
<span class="prompt">... </span><span class="keyword">for</span> folder <span class="keyword">in</span> folders:
<span class="prompt">... </span>    domainpath,year =  os.path.split(folder)
<span class="prompt">... </span>    domain = os.path.split(domainpath)[<span class="number">1</span>]
<span class="prompt">... </span>    prep_data = prep_data_for_measurements(os.path.abspath(folder),<span class="keyword">lambda</span> x: eatiht.extract(x))
<span class="prompt">... </span>    <span class="comment">#get_measurements(prep_data)</span>
<span class="prompt">... </span>    exhaustive_test.append(prep_data)
</span><span class="commandsep"></span><span class="output"><span class="stdout">C:\crawlToTheFuture\crawl-to-the-future\dataset\entertainment.msn.com\2005\20050525031445_entertainment_msn_com_movies_movie_aspx_m_553499.html
</span><span class="exception">Traceback (most recent call last):
  File "&lt;pyshell#16&gt;", line 5, in &lt;module&gt;
    prep_data = prep_data_for_measurements(os.path.abspath(folder),lambda x: eatiht.extract(x))
  File "&lt;pyshell#7&gt;", line 123, in prep_data_for_measurements
    content = tokens_to_hist_extractor(extractor, os.path.abspath(val['testpath']))
  File "&lt;pyshell#10&gt;", line 4, in tokens_to_hist_extractor
    content = extract(data_filepath)
  File "&lt;pyshell#16&gt;", line 5, in &lt;lambda&gt;
    prep_data = prep_data_for_measurements(os.path.abspath(folder),lambda x: eatiht.extract(x))
  File "c:\users\rodrigo\desktop\eatiht_project\eatiht\eatiht\eatiht.py", line 199, in extract
    max_path = hist[0]
IndexError: list index out of range
</span></span><span class="command"><span class="prompt">&gt;&gt;&gt; </span></span>
<span class="message">==================== New Session ====================
</span><span class="command"><span class="prompt">&gt;&gt;&gt; </span><span class="keyword">import</span> re <span class="comment">#for tokenizing</span>
<span class="prompt">... </span><span class="keyword">import</span> collections <span class="comment">#for multiset/histogram</span>
<span class="prompt">... </span><span class="keyword">import</span> os
<span class="prompt">... </span><span class="keyword">try</span>:
<span class="prompt">... </span>    <span class="keyword">from</span> StringIO <span class="keyword">import</span> StringIO
<span class="prompt">... </span><span class="keyword">except</span> <span class="builtin">ImportError</span>:
<span class="prompt">... </span>    <span class="keyword">from</span> io <span class="keyword">import</span> StringIO
<span class="prompt">... </span>
<span class="prompt">... </span><span class="keyword">import</span> lxml.html
<span class="prompt">... </span>
<span class="prompt">... </span><span class="keyword">try</span>:
<span class="prompt">... </span>    <span class="builtin">range</span> = <span class="builtin">xrange</span>
<span class="prompt">... </span><span class="keyword">except</span>:
<span class="prompt">... </span>    <span class="keyword">pass</span>
<span class="prompt">... </span>
<span class="prompt">... </span><span class="keyword">def</span> histsum(hist): <span class="keyword">return</span> <span class="builtin">sum</span>(hist.values())
<span class="prompt">... </span>
<span class="prompt">... </span>
<span class="prompt">... </span><span class="comment">#get every non-html word on page (ie. "//text()") as f-distribution</span>
<span class="prompt">... </span><span class="keyword">def</span> tokens_to_hist_from_universe(data_filepath):
<span class="prompt">... </span>
<span class="prompt">... </span>    <span class="keyword">with</span> <span class="builtin">open</span>(data_filepath,<span class="string">'r'</span>) <span class="keyword">as</span> data_file:
<span class="prompt">... </span>
<span class="prompt">... </span>        <span class="keyword">try</span>:
<span class="prompt">... </span>            parsed_goldhtml = lxml.html.parse(data_file,
<span class="prompt">... </span>                            lxml.html.HTMLParser(encoding=<span class="string">"utf-8"</span>))
<span class="prompt">... </span>        <span class="keyword">except</span>:
<span class="prompt">... </span>            <span class="keyword">print</span>(<span class="builtin">str</span>(data_file.read()))
<span class="prompt">... </span>        tokenized_content = collections.Counter()
<span class="prompt">... </span>
<span class="prompt">... </span>        content = <span class="string">""</span>.join(parsed_goldhtml.xpath(<span class="string">'//text()'</span>))
<span class="prompt">... </span>
<span class="prompt">... </span>        tokenized_content.update(re.split(<span class="string">r'\W+'</span>, content))
<span class="prompt">... </span>
<span class="prompt">... </span>    <span class="keyword">return</span> tokenized_content
<span class="prompt">... </span>
<span class="prompt">... </span>
<span class="prompt">... </span><span class="comment">#get every word from gold std. as f-distribution</span>
<span class="prompt">... </span><span class="keyword">def</span> tokens_to_hist_goldstd(test_filepath):
<span class="prompt">... </span>
<span class="prompt">... </span>    <span class="keyword">with</span> <span class="builtin">open</span>(os.path.abspath(test_filepath), <span class="string">'r'</span>) <span class="keyword">as</span> f:
<span class="prompt">... </span>
<span class="prompt">... </span>        <span class="comment">#print("test_filepath",os.path.abspath(test_filepath))</span>
<span class="prompt">... </span>        content = <span class="builtin">str</span>(f.read())
<span class="prompt">... </span>
<span class="prompt">... </span>        tokenized_content = collections.Counter()
<span class="prompt">... </span>
<span class="prompt">... </span>        tokenized_content.update(re.split(<span class="string">r'\W+'</span>, content))
<span class="prompt">... </span>
<span class="prompt">... </span>        <span class="keyword">return</span> tokenized_content
<span class="prompt">... </span>
<span class="prompt">... </span>
<span class="prompt">... </span><span class="comment">#get every extracted (predicted) word as f-distribution</span>
<span class="prompt">... </span><span class="keyword">def</span> tokens_to_hist_extractor(extract, data_filepath):
</span><span class="command-defs"><span class="command"><span class="prompt">... </span>    <span class="keyword">try</span>:
<span class="prompt">... </span>        content = extract(data_filepath)
<span class="prompt">... </span>    <span class="keyword">except</span> <span class="builtin">Exception</span>:
<span class="prompt">... </span>        <span class="keyword">print</span>(data_filepath)
<span class="prompt">... </span>        <span class="keyword">raise</span>
<span class="prompt">... </span>        <span class="comment">#raise Exception("\"exception\" method needs to be implemented")</span>
<span class="prompt">... </span>
<span class="prompt">... </span>    tokenized_content = collections.Counter()
<span class="prompt">... </span>    <span class="keyword">try</span>:
<span class="prompt">... </span>        tokenized_content.update(re.split(<span class="string">r'\W+'</span>, content))
<span class="prompt">... </span>    <span class="keyword">except</span>:
<span class="prompt">... </span>        <span class="keyword">print</span>(content)
<span class="prompt">... </span>    <span class="keyword">return</span> tokenized_content
<span class="prompt">... </span>
<span class="prompt">... </span>
</span></span><span class="command"><span class="prompt">... </span><span class="keyword">def</span> calc_praf(goldstd,predicted,universe):
<span class="prompt">... </span>
<span class="prompt">... </span>    TP = predicted &amp; goldstd
<span class="prompt">... </span>
<span class="prompt">... </span>    FP = predicted - goldstd
<span class="prompt">... </span>
<span class="prompt">... </span>    FN = (universe - predicted) &amp; goldstd
<span class="prompt">... </span>
<span class="prompt">... </span>    TN = (universe - predicted) &amp; (universe - goldstd)
<span class="prompt">... </span>
<span class="prompt">... </span>    precision = (histsum(TP)*<span class="number">1.0</span>)/histsum(TP+FP)
<span class="prompt">... </span>
<span class="prompt">... </span>    recall = (histsum(TP)*<span class="number">1.0</span>)/histsum(TP+FN)
<span class="prompt">... </span>
<span class="prompt">... </span>    accuracy = (histsum(TP+TN)*<span class="number">1.0</span>)/histsum(TP+FP+FN+TN)
<span class="prompt">... </span>    <span class="keyword">try</span>:
<span class="prompt">... </span>        f1 = <span class="number">2</span> * (((precision*recall)*<span class="number">1.0</span>)/(precision+recall))
<span class="prompt">... </span>    <span class="keyword">except</span> <span class="builtin">ZeroDivisionError</span>:
<span class="prompt">... </span>        f1 = <span class="number">0</span>
<span class="prompt">... </span>        <span class="comment">#print(precision,recall, accuracy)</span>
<span class="prompt">... </span>        <span class="comment">#raise</span>
<span class="prompt">... </span>    <span class="keyword">return</span> {<span class="string">'p'</span>:precision,<span class="string">'r'</span>:recall,<span class="string">'a'</span>:accuracy,<span class="string">'f1'</span>:f1}
<span class="prompt">... </span>
<span class="prompt">... </span>
<span class="prompt">... </span><span class="keyword">def</span> prep_data_for_measurements(directory, extractor,
<span class="prompt">... </span>                        goldfile_ext=<span class="string">'.txt'</span>,
<span class="prompt">... </span>                        testfile_ext=<span class="string">'.html'</span>,
<span class="prompt">... </span>                        pickle_output_name = <span class="builtin">None</span>):
<span class="prompt">... </span>    <span class="string">'''Given a directory, process the files (gold standard) in the following
</span><span class="prompt">... </span><span class="string">        steps:
</span><span class="prompt">... </span><span class="string">    1. Build dictionary of file names to file paths to gold std files and test file
</span><span class="prompt">... </span><span class="string">
</span><span class="prompt">... </span><span class="string">    2. For each file name, get associated "universe" values (all possible outcomes W)
</span><span class="prompt">... </span><span class="string">
</span><span class="prompt">... </span><span class="string">    3. For each file name, get goldstd histogram (G)
</span><span class="prompt">... </span><span class="string">
</span><span class="prompt">... </span><span class="string">    4. For each file name, get extractor's output (C)
</span><span class="prompt">... </span><span class="string">    '''</span>
<span class="prompt">... </span>    <span class="comment">#Step 1</span>
<span class="prompt">... </span>    filenames =  <span class="builtin">set</span>([re.sub((<span class="string">"\\"</span>+ goldfile_ext+<span class="string">"|"</span>+<span class="string">"\\"</span>+testfile_ext),<span class="string">""</span>,name)
<span class="prompt">... </span>                    <span class="keyword">for</span> name <span class="keyword">in</span> os.listdir(directory) ])
<span class="prompt">... </span>
<span class="prompt">... </span>    <span class="keyword">print</span>(<span class="string">"prep_data_for_measurements"</span>,filenames[<span class="number">0</span>])
<span class="prompt">... </span>
<span class="prompt">... </span>    golden_dict = { name:
<span class="prompt">... </span>                    {
<span class="prompt">... </span>                        <span class="string">'domain'</span>: os.path.split(os.path.split(directory)[<span class="number">0</span>])[<span class="number">1</span>],
<span class="prompt">... </span>                        <span class="string">'year'</span>: os.path.split(directory)[<span class="number">1</span>],
<span class="prompt">... </span>                        <span class="string">'goldpath'</span>:os.path.join(directory, name+goldfile_ext),
<span class="prompt">... </span>                        <span class="string">'testpath'</span>:os.path.join(directory, name+testfile_ext)
<span class="prompt">... </span>                    } <span class="keyword">for</span> name <span class="keyword">in</span> filenames }
<span class="prompt">... </span>    <span class="comment">#print(textfile_names)</span>
<span class="prompt">... </span>
<span class="prompt">... </span>
<span class="prompt">... </span>    <span class="keyword">for</span> key, val <span class="keyword">in</span> golden_dict.items():
<span class="prompt">... </span>        content = tokens_to_hist_extractor(extractor, os.path.abspath(val[<span class="string">'testpath'</span>]))
<span class="prompt">... </span>
<span class="prompt">... </span>        universe = tokens_to_hist_from_universe(os.path.abspath(val[<span class="string">'testpath'</span>]))
<span class="prompt">... </span>
<span class="prompt">... </span>        goldstd = tokens_to_hist_goldstd(os.path.abspath(val[<span class="string">'goldpath'</span>]))
<span class="prompt">... </span>
<span class="prompt">... </span>        val[<span class="string">'measurements'</span>] = calc_praf(goldstd,content,universe)
<span class="prompt">... </span>
<span class="prompt">... </span>    <span class="string">'''
</span><span class="prompt">... </span><span class="string">    #Step 2
</span><span class="prompt">... </span><span class="string">    for key, val in golden_dict.items():
</span><span class="prompt">... </span><span class="string">        #print()
</span><span class="prompt">... </span><span class="string">        print(val['testpath'])
</span><span class="prompt">... </span><span class="string">        val['W'] = tokens_to_hist_from_universe(os.path.abspath(val['testpath']))
</span><span class="prompt">... </span><span class="string">
</span><span class="prompt">... </span><span class="string">        #print(val['W'])
</span><span class="prompt">... </span><span class="string">
</span><span class="prompt">... </span><span class="string">    #Step 3
</span><span class="prompt">... </span><span class="string">    try:
</span><span class="prompt">... </span><span class="string">        for key, val in golden_dict.items():
</span><span class="prompt">... </span><span class="string">            val['G'] = tokens_to_hist_goldstd(os.path.abspath(val['goldpath']))
</span><span class="prompt">... </span><span class="string">    except Exception as e:
</span><span class="prompt">... </span><span class="string">        print(val['goldpath'])
</span><span class="prompt">... </span><span class="string">        raise
</span><span class="prompt">... </span><span class="string">
</span><span class="prompt">... </span><span class="string">    #Step 4
</span><span class="prompt">... </span><span class="string">    for key, val in golden_dict.items():
</span><span class="prompt">... </span><span class="string">        val['C'] = tokens_to_hist_extractor(extractor, os.path.abspath(val['testpath']))
</span><span class="prompt">... </span><span class="string">    '''</span>
<span class="prompt">... </span>    <span class="keyword">return</span> golden_dict
<span class="prompt">... </span>
<span class="prompt">... </span>
<span class="prompt">... </span><span class="keyword">def</span> get_measurements(prep_data):
</span><span class="command-defs"><span class="command"><span class="prompt">... </span>    <span class="keyword">for</span> key, val <span class="keyword">in</span> prep_data.items():
<span class="prompt">... </span>        val[<span class="string">'measurements'</span>] = calc_praf(val[<span class="string">'G'</span>],val[<span class="string">'C'</span>],val[<span class="string">'W'</span>])
<span class="prompt">... </span>
<span class="prompt">... </span>
</span></span><span class="command"><span class="prompt">... </span><span class="keyword">def</span> listsubdir(directory):
</span><span class="command-defs"><span class="command"><span class="prompt">... </span>    <span class="keyword">return</span> [os.path.join(d, f) <span class="keyword">for</span> d <span class="keyword">in</span> directory <span class="keyword">for</span> f <span class="keyword">in</span> os.listdir(d)
<span class="prompt">... </span>            <span class="keyword">if</span> os.path.isdir(os.path.join(d, f))]</span></span><span class="command">
</span><span class="commandsep"></span><span class="command"><span class="prompt">&gt;&gt;&gt; </span>exhaustive_test = []
<span class="prompt">... </span><span class="keyword">for</span> folder <span class="keyword">in</span> folders:
<span class="prompt">... </span>    domainpath,year =  os.path.split(folder)
<span class="prompt">... </span>    domain = os.path.split(domainpath)[<span class="number">1</span>]
<span class="prompt">... </span>    prep_data = prep_data_for_measurements(os.path.abspath(folder),<span class="keyword">lambda</span> x: eatiht.extract(x))
<span class="prompt">... </span>    <span class="comment">#get_measurements(prep_data)</span>
<span class="prompt">... </span>    exhaustive_test.append(prep_data)
</span><span class="commandsep"></span><span class="output"><span class="exception">Traceback (most recent call last):
  File "&lt;pyshell#1&gt;", line 2, in &lt;module&gt;
    for folder in folders:
NameError: name 'folders' is not defined
</span></span><span class="command"><span class="prompt">&gt;&gt;&gt; </span><span class="keyword">import</span> eatiht
<span class="prompt">... </span>dataset_path = [<span class="string">'C:/crawlToTheFuture/crawl-to-the-future/dataset/'</span>]
<span class="prompt">... </span>
<span class="prompt">... </span>folders = listsubdir(listsubdir(dataset_path))
<span class="prompt">... </span>
<span class="prompt">... </span>exhaustive_test = []
<span class="prompt">... </span><span class="keyword">for</span> folder <span class="keyword">in</span> folders:
<span class="prompt">... </span>    domainpath,year =  os.path.split(folder)
<span class="prompt">... </span>    domain = os.path.split(domainpath)[<span class="number">1</span>]
<span class="prompt">... </span>    prep_data = prep_data_for_measurements(os.path.abspath(folder),<span class="keyword">lambda</span> x: eatiht.extract(x))
<span class="prompt">... </span>    <span class="comment">#get_measurements(prep_data)</span>
<span class="prompt">... </span>    exhaustive_test.append(prep_data)
</span><span class="commandsep"></span><span class="output"><span class="exception">Traceback (most recent call last):
  File "&lt;pyshell#2&gt;", line 10, in &lt;module&gt;
    prep_data = prep_data_for_measurements(os.path.abspath(folder),lambda x: eatiht.extract(x))
  File "&lt;pyshell#0&gt;", line 112, in prep_data_for_measurements
    print("prep_data_for_measurements",filenames[0])
TypeError: 'set' object does not support indexing
</span></span><span class="command"><span class="prompt">&gt;&gt;&gt; </span><span class="keyword">import</span> re <span class="comment">#for tokenizing</span>
<span class="prompt">... </span><span class="keyword">import</span> collections <span class="comment">#for multiset/histogram</span>
<span class="prompt">... </span><span class="keyword">import</span> os
<span class="prompt">... </span><span class="keyword">try</span>:
<span class="prompt">... </span>    <span class="keyword">from</span> StringIO <span class="keyword">import</span> StringIO
<span class="prompt">... </span><span class="keyword">except</span> <span class="builtin">ImportError</span>:
<span class="prompt">... </span>    <span class="keyword">from</span> io <span class="keyword">import</span> StringIO
<span class="prompt">... </span>
<span class="prompt">... </span><span class="keyword">import</span> lxml.html
<span class="prompt">... </span>
<span class="prompt">... </span><span class="keyword">try</span>:
<span class="prompt">... </span>    <span class="builtin">range</span> = <span class="builtin">xrange</span>
<span class="prompt">... </span><span class="keyword">except</span>:
<span class="prompt">... </span>    <span class="keyword">pass</span>
<span class="prompt">... </span>
<span class="prompt">... </span><span class="keyword">def</span> histsum(hist): <span class="keyword">return</span> <span class="builtin">sum</span>(hist.values())
<span class="prompt">... </span>
<span class="prompt">... </span>
<span class="prompt">... </span><span class="comment">#get every non-html word on page (ie. "//text()") as f-distribution</span>
<span class="prompt">... </span><span class="keyword">def</span> tokens_to_hist_from_universe(data_filepath):
<span class="prompt">... </span>
<span class="prompt">... </span>    <span class="keyword">with</span> <span class="builtin">open</span>(data_filepath,<span class="string">'r'</span>) <span class="keyword">as</span> data_file:
<span class="prompt">... </span>
<span class="prompt">... </span>        <span class="keyword">try</span>:
<span class="prompt">... </span>            parsed_goldhtml = lxml.html.parse(data_file,
<span class="prompt">... </span>                            lxml.html.HTMLParser(encoding=<span class="string">"utf-8"</span>))
<span class="prompt">... </span>        <span class="keyword">except</span>:
<span class="prompt">... </span>            <span class="keyword">print</span>(<span class="builtin">str</span>(data_file.read()))
<span class="prompt">... </span>        tokenized_content = collections.Counter()
<span class="prompt">... </span>
<span class="prompt">... </span>        content = <span class="string">""</span>.join(parsed_goldhtml.xpath(<span class="string">'//text()'</span>))
<span class="prompt">... </span>
<span class="prompt">... </span>        tokenized_content.update(re.split(<span class="string">r'\W+'</span>, content))
<span class="prompt">... </span>
<span class="prompt">... </span>    <span class="keyword">return</span> tokenized_content
<span class="prompt">... </span>
<span class="prompt">... </span>
<span class="prompt">... </span><span class="comment">#get every word from gold std. as f-distribution</span>
<span class="prompt">... </span><span class="keyword">def</span> tokens_to_hist_goldstd(test_filepath):
<span class="prompt">... </span>
<span class="prompt">... </span>    <span class="keyword">with</span> <span class="builtin">open</span>(os.path.abspath(test_filepath), <span class="string">'r'</span>) <span class="keyword">as</span> f:
<span class="prompt">... </span>
<span class="prompt">... </span>        <span class="comment">#print("test_filepath",os.path.abspath(test_filepath))</span>
<span class="prompt">... </span>        content = <span class="builtin">str</span>(f.read())
<span class="prompt">... </span>
<span class="prompt">... </span>        tokenized_content = collections.Counter()
<span class="prompt">... </span>
<span class="prompt">... </span>        tokenized_content.update(re.split(<span class="string">r'\W+'</span>, content))
<span class="prompt">... </span>
<span class="prompt">... </span>        <span class="keyword">return</span> tokenized_content
<span class="prompt">... </span>
<span class="prompt">... </span>
<span class="prompt">... </span><span class="comment">#get every extracted (predicted) word as f-distribution</span>
<span class="prompt">... </span><span class="keyword">def</span> tokens_to_hist_extractor(extract, data_filepath):
</span><span class="command-defs"><span class="command"><span class="prompt">... </span>    <span class="keyword">try</span>:
<span class="prompt">... </span>        content = extract(data_filepath)
<span class="prompt">... </span>    <span class="keyword">except</span> <span class="builtin">Exception</span>:
<span class="prompt">... </span>        <span class="keyword">print</span>(data_filepath)
<span class="prompt">... </span>        <span class="keyword">raise</span>
<span class="prompt">... </span>        <span class="comment">#raise Exception("\"exception\" method needs to be implemented")</span>
<span class="prompt">... </span>
<span class="prompt">... </span>    tokenized_content = collections.Counter()
<span class="prompt">... </span>    <span class="keyword">try</span>:
<span class="prompt">... </span>        tokenized_content.update(re.split(<span class="string">r'\W+'</span>, content))
<span class="prompt">... </span>    <span class="keyword">except</span>:
<span class="prompt">... </span>        <span class="keyword">print</span>(content)
<span class="prompt">... </span>    <span class="keyword">return</span> tokenized_content
<span class="prompt">... </span>
<span class="prompt">... </span>
</span></span><span class="command"><span class="prompt">... </span><span class="keyword">def</span> calc_praf(goldstd,predicted,universe):
<span class="prompt">... </span>
<span class="prompt">... </span>    TP = predicted &amp; goldstd
<span class="prompt">... </span>
<span class="prompt">... </span>    FP = predicted - goldstd
<span class="prompt">... </span>
<span class="prompt">... </span>    FN = (universe - predicted) &amp; goldstd
<span class="prompt">... </span>
<span class="prompt">... </span>    TN = (universe - predicted) &amp; (universe - goldstd)
<span class="prompt">... </span>
<span class="prompt">... </span>    precision = (histsum(TP)*<span class="number">1.0</span>)/histsum(TP+FP)
<span class="prompt">... </span>
<span class="prompt">... </span>    recall = (histsum(TP)*<span class="number">1.0</span>)/histsum(TP+FN)
<span class="prompt">... </span>
<span class="prompt">... </span>    accuracy = (histsum(TP+TN)*<span class="number">1.0</span>)/histsum(TP+FP+FN+TN)
<span class="prompt">... </span>    <span class="keyword">try</span>:
<span class="prompt">... </span>        f1 = <span class="number">2</span> * (((precision*recall)*<span class="number">1.0</span>)/(precision+recall))
<span class="prompt">... </span>    <span class="keyword">except</span> <span class="builtin">ZeroDivisionError</span>:
<span class="prompt">... </span>        f1 = <span class="number">0</span>
<span class="prompt">... </span>        <span class="comment">#print(precision,recall, accuracy)</span>
<span class="prompt">... </span>        <span class="comment">#raise</span>
<span class="prompt">... </span>    <span class="keyword">return</span> {<span class="string">'p'</span>:precision,<span class="string">'r'</span>:recall,<span class="string">'a'</span>:accuracy,<span class="string">'f1'</span>:f1}
<span class="prompt">... </span>
<span class="prompt">... </span>
<span class="prompt">... </span><span class="keyword">def</span> prep_data_for_measurements(directory, extractor,
<span class="prompt">... </span>                        goldfile_ext=<span class="string">'.txt'</span>,
<span class="prompt">... </span>                        testfile_ext=<span class="string">'.html'</span>,
<span class="prompt">... </span>                        pickle_output_name = <span class="builtin">None</span>):
<span class="prompt">... </span>    <span class="string">'''Given a directory, process the files (gold standard) in the following
</span><span class="prompt">... </span><span class="string">        steps:
</span><span class="prompt">... </span><span class="string">    1. Build dictionary of file names to file paths to gold std files and test file
</span><span class="prompt">... </span><span class="string">
</span><span class="prompt">... </span><span class="string">    2. For each file name, get associated "universe" values (all possible outcomes W)
</span><span class="prompt">... </span><span class="string">
</span><span class="prompt">... </span><span class="string">    3. For each file name, get goldstd histogram (G)
</span><span class="prompt">... </span><span class="string">
</span><span class="prompt">... </span><span class="string">    4. For each file name, get extractor's output (C)
</span><span class="prompt">... </span><span class="string">    '''</span>
<span class="prompt">... </span>    <span class="comment">#Step 1</span>
<span class="prompt">... </span>    filenames =  <span class="builtin">set</span>([re.sub((<span class="string">"\\"</span>+ goldfile_ext+<span class="string">"|"</span>+<span class="string">"\\"</span>+testfile_ext),<span class="string">""</span>,name)
<span class="prompt">... </span>                    <span class="keyword">for</span> name <span class="keyword">in</span> os.listdir(directory) ])
<span class="prompt">... </span>
<span class="prompt">... </span>    <span class="comment">#print("prep_data_for_measurements",filenames[0])</span>
<span class="prompt">... </span>
<span class="prompt">... </span>    golden_dict = { name:
<span class="prompt">... </span>                    {
<span class="prompt">... </span>                        <span class="string">'domain'</span>: os.path.split(os.path.split(directory)[<span class="number">0</span>])[<span class="number">1</span>],
<span class="prompt">... </span>                        <span class="string">'year'</span>: os.path.split(directory)[<span class="number">1</span>],
<span class="prompt">... </span>                        <span class="string">'goldpath'</span>:os.path.join(directory, name+goldfile_ext),
<span class="prompt">... </span>                        <span class="string">'testpath'</span>:os.path.join(directory, name+testfile_ext)
<span class="prompt">... </span>                    } <span class="keyword">for</span> name <span class="keyword">in</span> filenames }
<span class="prompt">... </span>    <span class="comment">#print(textfile_names)</span>
<span class="prompt">... </span>
<span class="prompt">... </span>
<span class="prompt">... </span>    <span class="keyword">for</span> key, val <span class="keyword">in</span> golden_dict.items():
<span class="prompt">... </span>        content = tokens_to_hist_extractor(extractor, os.path.abspath(val[<span class="string">'testpath'</span>]))
<span class="prompt">... </span>
<span class="prompt">... </span>        universe = tokens_to_hist_from_universe(os.path.abspath(val[<span class="string">'testpath'</span>]))
<span class="prompt">... </span>
<span class="prompt">... </span>        goldstd = tokens_to_hist_goldstd(os.path.abspath(val[<span class="string">'goldpath'</span>]))
<span class="prompt">... </span>
<span class="prompt">... </span>        val[<span class="string">'measurements'</span>] = calc_praf(goldstd,content,universe)
<span class="prompt">... </span>
<span class="prompt">... </span>    <span class="string">'''
</span><span class="prompt">... </span><span class="string">    #Step 2
</span><span class="prompt">... </span><span class="string">    for key, val in golden_dict.items():
</span><span class="prompt">... </span><span class="string">        #print()
</span><span class="prompt">... </span><span class="string">        print(val['testpath'])
</span><span class="prompt">... </span><span class="string">        val['W'] = tokens_to_hist_from_universe(os.path.abspath(val['testpath']))
</span><span class="prompt">... </span><span class="string">
</span><span class="prompt">... </span><span class="string">        #print(val['W'])
</span><span class="prompt">... </span><span class="string">
</span><span class="prompt">... </span><span class="string">    #Step 3
</span><span class="prompt">... </span><span class="string">    try:
</span><span class="prompt">... </span><span class="string">        for key, val in golden_dict.items():
</span><span class="prompt">... </span><span class="string">            val['G'] = tokens_to_hist_goldstd(os.path.abspath(val['goldpath']))
</span><span class="prompt">... </span><span class="string">    except Exception as e:
</span><span class="prompt">... </span><span class="string">        print(val['goldpath'])
</span><span class="prompt">... </span><span class="string">        raise
</span><span class="prompt">... </span><span class="string">
</span><span class="prompt">... </span><span class="string">    #Step 4
</span><span class="prompt">... </span><span class="string">    for key, val in golden_dict.items():
</span><span class="prompt">... </span><span class="string">        val['C'] = tokens_to_hist_extractor(extractor, os.path.abspath(val['testpath']))
</span><span class="prompt">... </span><span class="string">    '''</span>
<span class="prompt">... </span>    <span class="keyword">return</span> golden_dict
<span class="prompt">... </span>
<span class="prompt">... </span>
<span class="prompt">... </span><span class="keyword">def</span> get_measurements(prep_data):
</span><span class="command-defs"><span class="command"><span class="prompt">... </span>    <span class="keyword">for</span> key, val <span class="keyword">in</span> prep_data.items():
<span class="prompt">... </span>        val[<span class="string">'measurements'</span>] = calc_praf(val[<span class="string">'G'</span>],val[<span class="string">'C'</span>],val[<span class="string">'W'</span>])
<span class="prompt">... </span>
<span class="prompt">... </span>
</span></span><span class="command"><span class="prompt">... </span><span class="keyword">def</span> listsubdir(directory):
</span><span class="command-defs"><span class="command"><span class="prompt">... </span>    <span class="keyword">return</span> [os.path.join(d, f) <span class="keyword">for</span> d <span class="keyword">in</span> directory <span class="keyword">for</span> f <span class="keyword">in</span> os.listdir(d)
<span class="prompt">... </span>            <span class="keyword">if</span> os.path.isdir(os.path.join(d, f))]</span></span><span class="command">
</span><span class="commandsep"></span><span class="command"><span class="prompt">&gt;&gt;&gt; </span><span class="keyword">import</span> eatiht
<span class="prompt">... </span>dataset_path = [<span class="string">'C:/crawlToTheFuture/crawl-to-the-future/dataset/'</span>]
<span class="prompt">... </span>
<span class="prompt">... </span>folders = listsubdir(listsubdir(dataset_path))
<span class="prompt">... </span>
<span class="prompt">... </span>exhaustive_test = []
<span class="prompt">... </span><span class="keyword">for</span> folder <span class="keyword">in</span> folders:
<span class="prompt">... </span>    domainpath,year =  os.path.split(folder)
<span class="prompt">... </span>    domain = os.path.split(domainpath)[<span class="number">1</span>]
<span class="prompt">... </span>    prep_data = prep_data_for_measurements(os.path.abspath(folder),<span class="keyword">lambda</span> x: eatiht.extract(x))
<span class="prompt">... </span>    <span class="comment">#get_measurements(prep_data)</span>
<span class="prompt">... </span>    exhaustive_test.append(prep_data)
</span><span class="commandsep"></span><span class="output"><span class="stdout">C:\crawlToTheFuture\crawl-to-the-future\dataset\entertainment.msn.com\2005\20050525031445_entertainment_msn_com_movies_movie_aspx_m_553499.html
</span><span class="exception">Traceback (most recent call last):
  File "&lt;pyshell#4&gt;", line 10, in &lt;module&gt;
    prep_data = prep_data_for_measurements(os.path.abspath(folder),lambda x: eatiht.extract(x))
  File "&lt;pyshell#3&gt;", line 125, in prep_data_for_measurements
    content = tokens_to_hist_extractor(extractor, os.path.abspath(val['testpath']))
  File "&lt;pyshell#3&gt;", line 56, in tokens_to_hist_extractor
    content = extract(data_filepath)
  File "&lt;pyshell#4&gt;", line 10, in &lt;lambda&gt;
    prep_data = prep_data_for_measurements(os.path.abspath(folder),lambda x: eatiht.extract(x))
  File "c:\users\rodrigo\desktop\eatiht_project\eatiht\eatiht\eatiht.py", line 199, in extract
    max_path = hist[0]
IndexError: list index out of range
</span></span><span class="command"><span class="prompt">&gt;&gt;&gt; </span><span class="keyword">import</span> eatiht
<span class="prompt">... </span>dataset_path = [<span class="string">'C:/crawlToTheFuture/crawl-to-the-future/dataset/'</span>]
<span class="prompt">... </span>
<span class="prompt">... </span>folders = listsubdir(listsubdir(dataset_path))
<span class="prompt">... </span>
<span class="prompt">... </span>exhaustive_test = []
<span class="prompt">... </span><span class="keyword">for</span> folder <span class="keyword">in</span> folders:
<span class="prompt">... </span>    domainpath,year =  os.path.split(folder)
<span class="prompt">... </span>    domain = os.path.split(domainpath)[<span class="number">1</span>]
<span class="prompt">... </span>    prep_data = prep_data_for_measurements(os.path.abspath(folder),<span class="keyword">lambda</span> x: eatiht.extract(x))
<span class="prompt">... </span>    <span class="comment">#get_measurements(prep_data)</span>
<span class="prompt">... </span>    exhaustive_test.append(prep_data)
</span><span class="commandsep"></span><span class="output"><span class="stdout">C:\crawlToTheFuture\crawl-to-the-future\dataset\entertainment.msn.com\2005\20050525031445_entertainment_msn_com_movies_movie_aspx_m_553499.html
</span><span class="exception">Traceback (most recent call last):
  File "&lt;pyshell#5&gt;", line 10, in &lt;module&gt;
    prep_data = prep_data_for_measurements(os.path.abspath(folder),lambda x: eatiht.extract(x))
  File "&lt;pyshell#3&gt;", line 125, in prep_data_for_measurements
    content = tokens_to_hist_extractor(extractor, os.path.abspath(val['testpath']))
  File "&lt;pyshell#3&gt;", line 56, in tokens_to_hist_extractor
    content = extract(data_filepath)
  File "&lt;pyshell#5&gt;", line 10, in &lt;lambda&gt;
    prep_data = prep_data_for_measurements(os.path.abspath(folder),lambda x: eatiht.extract(x))
  File "c:\users\rodrigo\desktop\eatiht_project\eatiht\eatiht\eatiht.py", line 199, in extract
    max_path = hist[0]
IndexError: list index out of range
</span></span><span class="command"><span class="prompt">&gt;&gt;&gt; </span><span class="builtin">len</span>(exhaustive_test)
</span><span class="commandsep"></span><span class="output"><span class="result-ind">0: </span><span class="result">1
</span></span><span class="command"><span class="prompt">&gt;&gt;&gt; </span>exhaustive_test[<span class="number">0</span>]
</span><span class="commandsep"></span><span class="output"><span class="result-ind">1: </span><span class="result">{'20001018072019_www_entertainment_msn_com_Especial_1013_bratpack_asp': {'dom</span></span><span class="folded"><span class="output"><span class="result">ain': 'entertainment.msn.com',
                                                                         'goldpath': 'C:\\crawlToTheFuture\\crawl-to-the-future\\dataset\\entertainment.msn.com\\2000\\20001018072019_www_entertainment_msn_com_Especial_1013_bratpack_asp.txt',
                                                                         'measurements': {'a': 0.9653679653679653,
                                                                                          'f1': 0.8963730569948186,
                                                                                          'p': 0.9942528735632183,
                                                                                          'r': 0.8160377358490566},
                                                                         'testpath': 'C:\\crawlToTheFuture\\crawl-to-the-future\\dataset\\entertainment.msn.com\\2000\\20001018072019_www_entertainment_msn_com_Especial_1013_bratpack_asp.html',
                                                                         'year': '2000'},
 '20001018072019_www_entertainment_msn_com_celebs_eonline_r_1013_fashion_asp': {'domain': 'entertainment.msn.com',
                                                                                'goldpath': 'C:\\crawlToTheFuture\\crawl-to-the-future\\dataset\\entertainment.msn.com\\2000\\20001018072019_www_entertainment_msn_com_celebs_eonline_r_1013_fashion_asp.txt',
                                                                                'measurements': {'a': 0.9434343434343434,
                                                                                                 'f1': 0.03448275862068966,
                                                                                                 'p': 0.125,
                                                                                                 'r': 0.02},
                                                                                'testpath': 'C:\\crawlToTheFuture\\crawl-to-the-future\\dataset\\entertainment.msn.com\\2000\\20001018072019_www_entertainment_msn_com_celebs_eonline_r_1013_fashion_asp.html',
                                                                                'year': '2000'},
 '20001018072019_www_entertainment_msn_com_celebs_eonline_r_awfultruth_asp': {'domain': 'entertainment.msn.com',
                                                                              'goldpath': 'C:\\crawlToTheFuture\\crawl-to-the-future\\dataset\\entertainment.msn.com\\2000\\20001018072019_www_entertainment_msn_com_celebs_eonline_r_awfultruth_asp.txt',
                                                                              'measurements': {'a': 0.8103559870550162,
                                                                                               'f1': 0.7013251783893986,
                                                                                               'p': 0.5530546623794212,
                                                                                               'r': 0.958217270194986},
                                                                              'testpath': 'C:\\crawlToTheFuture\\crawl-to-the-future\\dataset\\entertainment.msn.com\\2000\\20001018072019_www_entertainment_msn_com_celebs_eonline_r_awfultruth_asp.html',
                                                                              'year': '2000'},
 '20001018072019_www_entertainment_msn_com_movies_video_video_asp': {'domain': 'entertainment.msn.com',
                                                                     'goldpath': 'C:\\crawlToTheFuture\\crawl-to-the-future\\dataset\\entertainment.msn.com\\2000\\20001018072019_www_entertainment_msn_com_movies_video_video_asp.txt',
                                                                     'measurements': {'a': 0.585404547858276,
                                                                                      'f1': 0.3146853146853147,
                                                                                      'p': 0.994475138121547,
                                                                                      'r': 0.18691588785046728},
                                                                     'testpath': 'C:\\crawlToTheFuture\\crawl-to-the-future\\dataset\\entertainment.msn.com\\2000\\20001018072019_www_entertainment_msn_com_movies_video_video_asp.html',
                                                                     'year': '2000'},
 '20001018072019_www_entertainment_msn_com_music_features_Topcds_asp': {'domain': 'entertainment.msn.com',
                                                                        'goldpath': 'C:\\crawlToTheFuture\\crawl-to-the-future\\dataset\\entertainment.msn.com\\2000\\20001018072019_www_entertainment_msn_com_music_features_Topcds_asp.txt',
                                                                        'measurements': {'a': 0.8034414295168762,
                                                                                         'f1': 0.7355298308103293,
                                                                                         'p': 0.602919708029197,
                                                                                         'r': 0.9429223744292238},
                                                                        'testpath': 'C:\\crawlToTheFuture\\crawl-to-the-future\\dataset\\entertainment.msn.com\\2000\\20001018072019_www_entertainment_msn_com_music_features_Topcds_asp.html',
                                                                        'year': '2000'},
 '20001018072019_www_entertainment_msn_com_news_eonline_1018_dlachey_asp': {'domain': 'entertainment.msn.com',
                                                                            'goldpath': 'C:\\crawlToTheFuture\\crawl-to-the-future\\dataset\\entertainment.msn.com\\2000\\20001018072019_www_entertainment_msn_com_news_eonline_1018_dlachey_asp.txt',
                                                                            'measurements': {'a': 0.9446467589220685,
                                                                                             'f1': 0.8782051282051281,
                                                                                             'p': 1.0,
                                                                                             'r': 0.7828571428571428},
                                                                            'testpath': 'C:\\crawlToTheFuture\\crawl-to-the-future\\dataset\\entertainment.msn.com\\2000\\20001018072019_www_entertainment_msn_com_news_eonline_1018_dlachey_asp.html',
                                                                            'year': '2000'},
 '20001018072019_www_entertainment_msn_com_news_eonline_DottedLine_asp': {'domain': 'entertainment.msn.com',
                                                                          'goldpath': 'C:\\crawlToTheFuture\\crawl-to-the-future\\dataset\\entertainment.msn.com\\2000\\20001018072019_www_entertainment_msn_com_news_eonline_DottedLine_asp.txt',
                                                                          'measurements': {'a': 0.8213141025641025,
                                                                                           'f1': 0.38567493112947654,
                                                                                           'p': 0.9859154929577465,
                                                                                           'r': 0.23972602739726026},
                                                                          'testpath': 'C:\\crawlToTheFuture\\crawl-to-the-future\\dataset\\entertainment.msn.com\\2000\\20001018072019_www_entertainment_msn_com_news_eonline_DottedLine_asp.html',
                                                                          'year': '2000'},
 '20001018072019_www_entertainment_msn_com_tv_gist_feature2_asp': {'domain': 'entertainment.msn.com',
                                                                   'goldpath': 'C:\\crawlToTheFuture\\crawl-to-the-future\\dataset\\entertainment.msn.com\\2000\\20001018072019_www_entertainment_msn_com_tv_gist_feature2_asp.txt',
                                                                   'measurements': {'a': 0.9532374100719424,
                                                                                    'f1': 0.9390815370196813,
                                                                                    'p': 0.99800796812749,
                                                                                    'r': 0.8867256637168142},
                                                                   'testpath': 'C:\\crawlToTheFuture\\crawl-to-the-future\\dataset\\entertainment.msn.com\\2000\\20001018072019_www_entertainment_msn_com_tv_gist_feature2_asp.html',
                                                                   'year': '2000'},
 '20001018072019_www_entertainment_msn_com_tv_gist_wed01_asp': {'domain': 'entertainment.msn.com',
                                                                'goldpath': 'C:\\crawlToTheFuture\\crawl-to-the-future\\dataset\\entertainment.msn.com\\2000\\20001018072019_www_entertainment_msn_com_tv_gist_wed01_asp.txt',
                                                                'measurements': {'a': 0.958670260557053,
                                                                                 'f1': 0.8647058823529412,
                                                                                 'p': 0.9932432432432432,
                                                                                 'r': 0.765625},
                                                                'testpath': 'C:\\crawlToTheFuture\\crawl-to-the-future\\dataset\\entertainment.msn.com\\2000\\20001018072019_www_entertainment_msn_com_tv_gist_wed01_asp.html',
                                                                'year': '2000'},
 '20001018072019_www_entertainment_msn_com_tv_gist_wed02_asp': {'domain': 'entertainment.msn.com',
                                                                'goldpath': 'C:\\crawlToTheFuture\\crawl-to-the-future\\dataset\\entertainment.msn.com\\2000\\20001018072019_www_entertainment_msn_com_tv_gist_wed02_asp.txt',
                                                                'measurements': {'a': 0.9830028328611898,
                                                                                 'f1': 0.9769230769230769,
                                                                                 'p': 0.9980353634577603,
                                                                                 'r': 0.9566854990583804},
                                                                'testpath': 'C:\\crawlToTheFuture\\crawl-to-the-future\\dataset\\entertainment.msn.com\\2000\\20001018072019_www_entertainment_msn_com_tv_gist_wed02_asp.html',
                                                                'year': '2000'},
 '20001018072019_www_entertainment_msn_com_tv_gist_wed03_asp': {'domain': 'entertainment.msn.com',
                                                                'goldpath': 'C:\\crawlToTheFuture\\crawl-to-the-future\\dataset\\entertainment.msn.com\\2000\\20001018072019_www_entertainment_msn_com_tv_gist_wed03_asp.txt',
                                                                'measurements': {'a': 0.979557069846678,
                                                                                 'f1': 0.9601328903654486,
                                                                                 'p': 0.996551724137931,
                                                                                 'r': 0.9262820512820513},
                                                                'testpath': 'C:\\crawlToTheFuture\\crawl-to-the-future\\dataset\\entertainment.msn.com\\2000\\20001018072019_www_entertainment_msn_com_tv_gist_wed03_asp.html',
                                                                'year': '2000'},
 '20001018072019_www_entertainment_msn_com_tv_gist_wed04_asp': {'domain': 'entertainment.msn.com',
                                                                'goldpath': 'C:\\crawlToTheFuture\\crawl-to-the-future\\dataset\\entertainment.msn.com\\2000\\20001018072019_www_entertainment_msn_com_tv_gist_wed04_asp.txt',
                                                                'measurements': {'a': 0.9716117216117216,
                                                                                 'f1': 0.9260143198090692,
                                                                                 'p': 0.9948717948717949,
                                                                                 'r': 0.8660714285714286},
                                                                'testpath': 'C:\\crawlToTheFuture\\crawl-to-the-future\\dataset\\entertainment.msn.com\\2000\\20001018072019_www_entertainment_msn_com_tv_gist_wed04_asp.html',
                                                                'year': '2000'},
 '20001110075800_entertainment_citysearch': {'domain': 'entertainment.msn.com',
                                             'goldpath': 'C:\\crawlToTheFuture\\crawl-to-the-future\\dataset\\entertainment.msn.com\\2000\\20001110075800_entertainment_citysearch.txt',
                                             'measurements': {'a': 0.974539069359087,
                                                              'f1': 0.9500860585197934,
                                                              'p': 0.9963898916967509,
                                                              'r': 0.9078947368421053},
                                             'testpath': 'C:\\crawlToTheFuture\\crawl-to-the-future\\dataset\\entertainment.msn.com\\2000\\20001110075800_entertainment_citysearch.html',
                                             'year': '2000'},
 '20001110075800_entertainment_citysearch_html': {'domain': 'entertainment.msn.com',
                                                  'goldpath': 'C:\\crawlToTheFuture\\crawl-to-the-future\\dataset\\entertainment.msn.com\\2000\\20001110075800_entertainment_citysearch_html.txt',
                                                  'measurements': {'a': 0.9315375982042648,
                                                                   'f1': 0.8407310704960835,
                                                                   'p': 0.9938271604938271,
                                                                   'r': 0.7285067873303167},
                                                  'testpath': 'C:\\crawlToTheFuture\\crawl-to-the-future\\dataset\\entertainment.msn.com\\2000\\20001110075800_entertainment_citysearch_html.html',
                                                  'year': '2000'},
 '20001110075800_www_entertainment_msn_com_celebs_eonline_i_1110_asandler_asp': {'domain': 'entertainment.msn.com',
                                                                                 'goldpath': 'C:\\crawlToTheFuture\\crawl-to-the-future\\dataset\\entertainment.msn.com\\2000\\20001110075800_www_entertainment_msn_com_celebs_eonline_i_1110_asandler_asp.txt',
                                                                                 'measurements': {'a': 0.7825428859737639,
                                                                                                  'f1': 0.7021423635107118,
                                                                                                  'p': 0.5619469026548672,
                                                                                                  'r': 0.9355432780847146},
                                                                                 'testpath': 'C:\\crawlToTheFuture\\crawl-to-the-future\\dataset\\entertainment.msn.com\\2000\\20001110075800_www_entertainment_msn_com_celebs_eonline_i_1110_asandler_asp.html',
                                                                                 'year': '2000'},
 '20001110075800_www_entertainment_msn_com_music_features_Topcds_asp': {'domain': 'entertainment.msn.com',
                                                                        'goldpath': 'C:\\crawlToTheFuture\\crawl-to-the-future\\dataset\\entertainment.msn.com\\2000\\20001110075800_www_entertainment_msn_com_music_features_Topcds_asp.txt',
                                                                        'measurements': {'a': 0.7508551881413911,
                                                                                         'f1': 0.7049291019581365,
                                                                                         'p': 0.558288770053476,
                                                                                         'r': 0.9560439560439561},
                                                                        'testpath': 'C:\\crawlToTheFuture\\crawl-to-the-future\\dataset\\entertainment.msn.com\\2000\\20001110075800_www_entertainment_msn_com_music_features_Topcds_asp.html',
                                                                        'year': '2000'},
 '20001110075800_www_entertainment_msn_com_music_features_feature3_asp': {'domain': 'entertainment.msn.com',
                                                                          'goldpath': 'C:\\crawlToTheFuture\\crawl-to-the-future\\dataset\\entertainment.msn.com\\2000\\20001110075800_www_entertainment_msn_com_music_features_feature3_asp.txt',
                                                                          'measurements': {'a': 0.7615700058582309,
                                                                                           'f1': 0.7082437275985664,
                                                                                           'p': 0.5588235294117647,
                                                                                           'r': 0.9667318982387475},
                                                                          'testpath': 'C:\\crawlToTheFuture\\crawl-to-the-future\\dataset\\entertainment.msn.com\\2000\\20001110075800_www_entertainment_msn_com_music_features_feature3_asp.html',
                                                                          'year': '2000'},
 '20001110075800_www_entertainment_msn_com_music_news_fri01_asp': {'domain': 'entertainment.msn.com',
                                                                   'goldpath': 'C:\\crawlToTheFuture\\crawl-to-the-future\\dataset\\entertainment.msn.com\\2000\\20001110075800_www_entertainment_msn_com_music_news_fri01_asp.txt',
                                                                   'measurements': {'a': 0.8416058394160584,
                                                                                    'f1': 0.6822840409956076,
                                                                                    'p': 0.5682926829268292,
                                                                                    'r': 0.8534798534798534},
                                                                   'testpath': 'C:\\crawlToTheFuture\\crawl-to-the-future\\dataset\\entertainment.msn.com\\2000\\20001110075800_www_entertainment_msn_com_music_news_fri01_asp.html',
                                                                   'year': '2000'},
 '20001110075800_www_entertainment_msn_com_news_eonline_1110_dragon_asp': {'domain': 'entertainment.msn.com',
                                                                           'goldpath': 'C:\\crawlToTheFuture\\crawl-to-the-future\\dataset\\entertainment.msn.com\\2000\\20001110075800_www_entertainment_msn_com_news_eonline_1110_dragon_asp.txt',
                                                                           'measurements': {'a': 0.9539078156312625,
                                                                                            'f1': 0.9159561510353229,
                                                                                            'p': 1.0,
                                                                                            'r': 0.8449438202247191},
                                                                           'testpath': 'C:\\crawlToTheFuture\\crawl-to-the-future\\dataset\\entertainment.msn.com\\2000\\20001110075800_www_entertainment_msn_com_news_eonline_1110_dragon_asp.html',
                                                                           'year': '2000'},
 '20001110075800_www_entertainment_msn_com_news_eonline_1110_spears_asp': {'domain': 'entertainment.msn.com',
                                                                           'goldpath': 'C:\\crawlToTheFuture\\crawl-to-the-future\\dataset\\entertainment.msn.com\\2000\\20001110075800_www_entertainment_msn_com_news_eonline_1110_spears_asp.txt',
                                                                           'measurements': {'a': 0.9407185628742515,
                                                                                            'f1': 0.9127753303964757,
                                                                                            'p': 1.0,
                                                                                            'r': 0.839546191247974},
                                                                           'testpath': 'C:\\crawlToTheFuture\\crawl-to-the-future\\dataset\\entertainment.msn.com\\2000\\20001110075800_www_entertainment_msn_com_news_eonline_1110_spears_asp.html',
                                                                           'year': '2000'},
 '20001110075800_www_entertainment_msn_com_tv_gist_fri01_asp': {'domain': 'entertainment.msn.com',
                                                                'goldpath': 'C:\\crawlToTheFuture\\crawl-to-the-future\\dataset\\entertainment.msn.com\\2000\\20001110075800_www_entertainment_msn_com_tv_gist_fri01_asp.txt',
                                                                'measurements': {'a': 0.8153526970954357,
                                                                                 'f1': 0.6810035842293907,
                                                                                 'p': 0.5438931297709924,
                                                                                 'r': 0.9105431309904153},
                                                                'testpath': 'C:\\crawlToTheFuture\\crawl-to-the-future\\dataset\\entertainment.msn.com\\2000\\20001110075800_www_entertainment_msn_com_tv_gist_fri01_asp.html',
                                                                'year': '2000'},
 '20001110075800_www_entertainment_msn_com_tv_gist_fri02_asp': {'domain': 'entertainment.msn.com',
                                                                'goldpath': 'C:\\crawlToTheFuture\\crawl-to-the-future\\dataset\\entertainment.msn.com\\2000\\20001110075800_www_entertainment_msn_com_tv_gist_fri02_asp.txt',
                                                                'measurements': {'a': 0.9023569023569024,
                                                                                 'f1': 0.7642276422764227,
                                                                                 'p': 0.6714285714285714,
                                                                                 'r': 0.8867924528301887},
                                                                'testpath': 'C:\\crawlToTheFuture\\crawl-to-the-future\\dataset\\entertainment.msn.com\\2000\\20001110075800_www_entertainment_msn_com_tv_gist_fri02_asp.html',
                                                                'year': '2000'},
 '20001206091000_entertainment_msn_com_holiday_tv_asp': {'domain': 'entertainment.msn.com',
                                                         'goldpath': 'C:\\crawlToTheFuture\\crawl-to-the-future\\dataset\\entertainment.msn.com\\2000\\20001206091000_entertainment_msn_com_holiday_tv_asp.txt',
                                                         'measurements': {'a': 0.6284981343283582,
                                                                          'f1': 0.6822262118491922,
                                                                          'p': 0.5216595485051861,
                                                                          'r': 0.9855907780979827},
                                                         'testpath': 'C:\\crawlToTheFuture\\crawl-to-the-future\\dataset\\entertainment.msn.com\\2000\\20001206091000_entertainment_msn_com_holiday_tv_asp.html',
                                                         'year': '2000'},
 '20001206091000_entertainment_msn_com_music_news_wed01_asp': {'domain': 'entertainment.msn.com',
                                                               'goldpath': 'C:\\crawlToTheFuture\\crawl-to-the-future\\dataset\\entertainment.msn.com\\2000\\20001206091000_entertainment_msn_com_music_news_wed01_asp.txt',
                                                               'measurements': {'a': 0.7470588235294118,
                                                                                'f1': 0.6840347361389445,
                                                                                'p': 0.5294725956566702,
                                                                                'r': 0.9660377358490566},
                                                               'testpath': 'C:\\crawlToTheFuture\\crawl-to-the-future\\dataset\\entertainment.msn.com\\2000\\20001206091000_entertainment_msn_com_music_news_wed01_asp.html',
                                                               'year': '2000'},
 '20001206091000_entertainment_msn_com_tv_gist_wed02_asp': {'domain': 'entertainment.msn.com',
                                                            'goldpath': 'C:\\crawlToTheFuture\\crawl-to-the-future\\dataset\\entertainment.msn.com\\2000\\20001206091000_entertainment_msn_com_tv_gist_wed02_asp.txt',
                                                            'measurements': {'a': 0.8515384615384616,
                                                                             'f1': 0.6941362916006338,
                                                                             'p': 0.5601023017902813,
                                                                             'r': 0.9125},
                                                            'testpath': 'C:\\crawlToTheFuture\\crawl-to-the-future\\dataset\\entertainment.msn.com\\2000\\20001206091000_entertainment_msn_com_tv_gist_wed02_asp.html',
                                                            'year': '2000'}}
</span></span></span><span class="fold-message">[About 338 more lines. Double-click to unfold]
</span><span class="command"><span class="prompt">&gt;&gt;&gt; </span>eatiht.extract(<span class="string">'c:/crawlToTheFuture/crawl-to-the-future/dataset/entertainment.msn.com/2005/20050525031445_entertainment_msn_com_movies_movie_aspx_m_553499.html'</span>)
</span><span class="commandsep"></span><span class="output"><span class="exception">Traceback (most recent call last):
  File "&lt;pyshell#8&gt;", line 1, in &lt;module&gt;
    eatiht.extract('c:/crawlToTheFuture/crawl-to-the-future/dataset/entertainment.msn.com/2005/20050525031445_entertainment_msn_com_movies_movie_aspx_m_553499.html')
  File "c:\users\rodrigo\desktop\eatiht_project\eatiht\eatiht\eatiht.py", line 199, in extract
    max_path = hist[0]
IndexError: list index out of range
</span></span><span class="command"><span class="prompt">&gt;&gt;&gt; </span></span>
<span class="message">==================== New Session ====================
</span><span class="command"><span class="prompt">&gt;&gt;&gt; </span><span class="keyword">import</span> re <span class="comment">#for tokenizing</span>
<span class="prompt">... </span><span class="keyword">import</span> collections <span class="comment">#for multiset/histogram</span>
<span class="prompt">... </span><span class="keyword">import</span> os
<span class="prompt">... </span><span class="keyword">try</span>:
<span class="prompt">... </span>    <span class="keyword">from</span> StringIO <span class="keyword">import</span> StringIO
<span class="prompt">... </span><span class="keyword">except</span> <span class="builtin">ImportError</span>:
<span class="prompt">... </span>    <span class="keyword">from</span> io <span class="keyword">import</span> StringIO
<span class="prompt">... </span>
<span class="prompt">... </span><span class="keyword">import</span> lxml.html
<span class="prompt">... </span>
<span class="prompt">... </span><span class="keyword">try</span>:
<span class="prompt">... </span>    <span class="builtin">range</span> = <span class="builtin">xrange</span>
<span class="prompt">... </span><span class="keyword">except</span>:
<span class="prompt">... </span>    <span class="keyword">pass</span>
<span class="prompt">... </span>
<span class="prompt">... </span><span class="keyword">def</span> histsum(hist): <span class="keyword">return</span> <span class="builtin">sum</span>(hist.values())
<span class="prompt">... </span>
<span class="prompt">... </span>
<span class="prompt">... </span><span class="comment">#get every non-html word on page (ie. "//text()") as f-distribution</span>
<span class="prompt">... </span><span class="keyword">def</span> tokens_to_hist_from_universe(data_filepath):
<span class="prompt">... </span>
<span class="prompt">... </span>    <span class="keyword">with</span> <span class="builtin">open</span>(data_filepath,<span class="string">'r'</span>) <span class="keyword">as</span> data_file:
<span class="prompt">... </span>
<span class="prompt">... </span>        <span class="keyword">try</span>:
<span class="prompt">... </span>            parsed_goldhtml = lxml.html.parse(data_file,
<span class="prompt">... </span>                            lxml.html.HTMLParser(encoding=<span class="string">"utf-8"</span>))
<span class="prompt">... </span>        <span class="keyword">except</span>:
<span class="prompt">... </span>            <span class="keyword">print</span>(<span class="builtin">str</span>(data_file.read()))
<span class="prompt">... </span>        tokenized_content = collections.Counter()
<span class="prompt">... </span>
<span class="prompt">... </span>        content = <span class="string">""</span>.join(parsed_goldhtml.xpath(<span class="string">'//text()'</span>))
<span class="prompt">... </span>
<span class="prompt">... </span>        tokenized_content.update(re.split(<span class="string">r'\W+'</span>, content))
<span class="prompt">... </span>
<span class="prompt">... </span>    <span class="keyword">return</span> tokenized_content
<span class="prompt">... </span>
<span class="prompt">... </span>
<span class="prompt">... </span><span class="comment">#get every word from gold std. as f-distribution</span>
<span class="prompt">... </span><span class="keyword">def</span> tokens_to_hist_goldstd(test_filepath):
<span class="prompt">... </span>
<span class="prompt">... </span>    <span class="keyword">with</span> <span class="builtin">open</span>(os.path.abspath(test_filepath), <span class="string">'r'</span>) <span class="keyword">as</span> f:
<span class="prompt">... </span>
<span class="prompt">... </span>        <span class="comment">#print("test_filepath",os.path.abspath(test_filepath))</span>
<span class="prompt">... </span>        content = <span class="builtin">str</span>(f.read())
<span class="prompt">... </span>
<span class="prompt">... </span>        tokenized_content = collections.Counter()
<span class="prompt">... </span>
<span class="prompt">... </span>        tokenized_content.update(re.split(<span class="string">r'\W+'</span>, content))
<span class="prompt">... </span>
<span class="prompt">... </span>        <span class="keyword">return</span> tokenized_content
<span class="prompt">... </span>
<span class="prompt">... </span>
<span class="prompt">... </span><span class="comment">#get every extracted (predicted) word as f-distribution</span>
<span class="prompt">... </span><span class="keyword">def</span> tokens_to_hist_extractor(extract, data_filepath):
</span><span class="command-defs"><span class="command"><span class="prompt">... </span>    <span class="keyword">try</span>:
<span class="prompt">... </span>        content = extract(data_filepath)
<span class="prompt">... </span>    <span class="keyword">except</span> <span class="builtin">Exception</span>:
<span class="prompt">... </span>        <span class="keyword">print</span>(data_filepath)
<span class="prompt">... </span>        <span class="keyword">raise</span>
<span class="prompt">... </span>        <span class="comment">#raise Exception("\"exception\" method needs to be implemented")</span>
<span class="prompt">... </span>
<span class="prompt">... </span>    tokenized_content = collections.Counter()
<span class="prompt">... </span>    <span class="keyword">try</span>:
<span class="prompt">... </span>        tokenized_content.update(re.split(<span class="string">r'\W+'</span>, content))
<span class="prompt">... </span>    <span class="keyword">except</span>:
<span class="prompt">... </span>        <span class="keyword">print</span>(content)
<span class="prompt">... </span>    <span class="keyword">return</span> tokenized_content
<span class="prompt">... </span>
<span class="prompt">... </span>
</span></span><span class="command"><span class="prompt">... </span><span class="keyword">def</span> calc_praf(goldstd,predicted,universe):
<span class="prompt">... </span>
<span class="prompt">... </span>    TP = predicted &amp; goldstd
<span class="prompt">... </span>
<span class="prompt">... </span>    FP = predicted - goldstd
<span class="prompt">... </span>
<span class="prompt">... </span>    FN = (universe - predicted) &amp; goldstd
<span class="prompt">... </span>
<span class="prompt">... </span>    TN = (universe - predicted) &amp; (universe - goldstd)
<span class="prompt">... </span>
<span class="prompt">... </span>    precision = (histsum(TP)*<span class="number">1.0</span>)/histsum(TP+FP)
<span class="prompt">... </span>
<span class="prompt">... </span>    recall = (histsum(TP)*<span class="number">1.0</span>)/histsum(TP+FN)
<span class="prompt">... </span>
<span class="prompt">... </span>    accuracy = (histsum(TP+TN)*<span class="number">1.0</span>)/histsum(TP+FP+FN+TN)
<span class="prompt">... </span>    <span class="keyword">try</span>:
<span class="prompt">... </span>        f1 = <span class="number">2</span> * (((precision*recall)*<span class="number">1.0</span>)/(precision+recall))
<span class="prompt">... </span>    <span class="keyword">except</span> <span class="builtin">ZeroDivisionError</span>:
<span class="prompt">... </span>        f1 = <span class="number">0</span>
<span class="prompt">... </span>        <span class="comment">#print(precision,recall, accuracy)</span>
<span class="prompt">... </span>        <span class="comment">#raise</span>
<span class="prompt">... </span>    <span class="keyword">return</span> {<span class="string">'p'</span>:precision,<span class="string">'r'</span>:recall,<span class="string">'a'</span>:accuracy,<span class="string">'f1'</span>:f1}
<span class="prompt">... </span>
<span class="prompt">... </span>
<span class="prompt">... </span><span class="keyword">def</span> prep_data_for_measurements(directory, extractor,
<span class="prompt">... </span>                        goldfile_ext=<span class="string">'.txt'</span>,
<span class="prompt">... </span>                        testfile_ext=<span class="string">'.html'</span>,
<span class="prompt">... </span>                        pickle_output_name = <span class="builtin">None</span>):
<span class="prompt">... </span>    <span class="string">'''Given a directory, process the files (gold standard) in the following
</span><span class="prompt">... </span><span class="string">        steps:
</span><span class="prompt">... </span><span class="string">    1. Build dictionary of file names to file paths to gold std files and test file
</span><span class="prompt">... </span><span class="string">
</span><span class="prompt">... </span><span class="string">    2. For each file name, get associated "universe" values (all possible outcomes W)
</span><span class="prompt">... </span><span class="string">
</span><span class="prompt">... </span><span class="string">    3. For each file name, get goldstd histogram (G)
</span><span class="prompt">... </span><span class="string">
</span><span class="prompt">... </span><span class="string">    4. For each file name, get extractor's output (C)
</span><span class="prompt">... </span><span class="string">    '''</span>
<span class="prompt">... </span>    <span class="comment">#Step 1</span>
<span class="prompt">... </span>    filenames =  <span class="builtin">set</span>([re.sub((<span class="string">"\\"</span>+ goldfile_ext+<span class="string">"|"</span>+<span class="string">"\\"</span>+testfile_ext),<span class="string">""</span>,name)
<span class="prompt">... </span>                    <span class="keyword">for</span> name <span class="keyword">in</span> os.listdir(directory) ])
<span class="prompt">... </span>
<span class="prompt">... </span>    <span class="comment">#print("prep_data_for_measurements",filenames[0])</span>
<span class="prompt">... </span>
<span class="prompt">... </span>    golden_dict = { name:
<span class="prompt">... </span>                    {
<span class="prompt">... </span>                        <span class="string">'domain'</span>: os.path.split(os.path.split(directory)[<span class="number">0</span>])[<span class="number">1</span>],
<span class="prompt">... </span>                        <span class="string">'year'</span>: os.path.split(directory)[<span class="number">1</span>],
<span class="prompt">... </span>                        <span class="string">'goldpath'</span>:os.path.join(directory, name+goldfile_ext),
<span class="prompt">... </span>                        <span class="string">'testpath'</span>:os.path.join(directory, name+testfile_ext)
<span class="prompt">... </span>                    } <span class="keyword">for</span> name <span class="keyword">in</span> filenames }
<span class="prompt">... </span>    <span class="comment">#print(textfile_names)</span>
<span class="prompt">... </span>
<span class="prompt">... </span>
<span class="prompt">... </span>    <span class="keyword">for</span> key, val <span class="keyword">in</span> golden_dict.items():
<span class="prompt">... </span>        content = tokens_to_hist_extractor(extractor, os.path.abspath(val[<span class="string">'testpath'</span>]))
<span class="prompt">... </span>
<span class="prompt">... </span>        universe = tokens_to_hist_from_universe(os.path.abspath(val[<span class="string">'testpath'</span>]))
<span class="prompt">... </span>
<span class="prompt">... </span>        goldstd = tokens_to_hist_goldstd(os.path.abspath(val[<span class="string">'goldpath'</span>]))
<span class="prompt">... </span>
<span class="prompt">... </span>        val[<span class="string">'measurements'</span>] = calc_praf(goldstd,content,universe)
<span class="prompt">... </span>
<span class="prompt">... </span>    <span class="string">'''
</span><span class="prompt">... </span><span class="string">    #Step 2
</span><span class="prompt">... </span><span class="string">    for key, val in golden_dict.items():
</span><span class="prompt">... </span><span class="string">        #print()
</span><span class="prompt">... </span><span class="string">        print(val['testpath'])
</span><span class="prompt">... </span><span class="string">        val['W'] = tokens_to_hist_from_universe(os.path.abspath(val['testpath']))
</span><span class="prompt">... </span><span class="string">
</span><span class="prompt">... </span><span class="string">        #print(val['W'])
</span><span class="prompt">... </span><span class="string">
</span><span class="prompt">... </span><span class="string">    #Step 3
</span><span class="prompt">... </span><span class="string">    try:
</span><span class="prompt">... </span><span class="string">        for key, val in golden_dict.items():
</span><span class="prompt">... </span><span class="string">            val['G'] = tokens_to_hist_goldstd(os.path.abspath(val['goldpath']))
</span><span class="prompt">... </span><span class="string">    except Exception as e:
</span><span class="prompt">... </span><span class="string">        print(val['goldpath'])
</span><span class="prompt">... </span><span class="string">        raise
</span><span class="prompt">... </span><span class="string">
</span><span class="prompt">... </span><span class="string">    #Step 4
</span><span class="prompt">... </span><span class="string">    for key, val in golden_dict.items():
</span><span class="prompt">... </span><span class="string">        val['C'] = tokens_to_hist_extractor(extractor, os.path.abspath(val['testpath']))
</span><span class="prompt">... </span><span class="string">    '''</span>
<span class="prompt">... </span>    <span class="keyword">return</span> golden_dict
<span class="prompt">... </span>
<span class="prompt">... </span>
<span class="prompt">... </span><span class="keyword">def</span> get_measurements(prep_data):
</span><span class="command-defs"><span class="command"><span class="prompt">... </span>    <span class="keyword">for</span> key, val <span class="keyword">in</span> prep_data.items():
<span class="prompt">... </span>        val[<span class="string">'measurements'</span>] = calc_praf(val[<span class="string">'G'</span>],val[<span class="string">'C'</span>],val[<span class="string">'W'</span>])
<span class="prompt">... </span>
<span class="prompt">... </span>
</span></span><span class="command"><span class="prompt">... </span><span class="keyword">def</span> listsubdir(directory):
</span><span class="command-defs"><span class="command"><span class="prompt">... </span>    <span class="keyword">return</span> [os.path.join(d, f) <span class="keyword">for</span> d <span class="keyword">in</span> directory <span class="keyword">for</span> f <span class="keyword">in</span> os.listdir(d)
<span class="prompt">... </span>            <span class="keyword">if</span> os.path.isdir(os.path.join(d, f))]</span></span><span class="command">
</span><span class="commandsep"></span><span class="command"><span class="prompt">&gt;&gt;&gt; </span><span class="keyword">import</span> eatiht
<span class="prompt">... </span>dataset_path = [<span class="string">'C:/crawlToTheFuture/crawl-to-the-future/dataset/'</span>]
<span class="prompt">... </span>
<span class="prompt">... </span>folders = listsubdir(listsubdir(dataset_path))
<span class="prompt">... </span>
<span class="prompt">... </span>exhaustive_test = []
<span class="prompt">... </span><span class="keyword">for</span> folder <span class="keyword">in</span> folders:
<span class="prompt">... </span>    domainpath,year =  os.path.split(folder)
<span class="prompt">... </span>    domain = os.path.split(domainpath)[<span class="number">1</span>]
<span class="prompt">... </span>    prep_data = prep_data_for_measurements(os.path.abspath(folder),<span class="keyword">lambda</span> x: eatiht.extract(x))
<span class="prompt">... </span>    <span class="comment">#get_measurements(prep_data)</span>
<span class="prompt">... </span>    exhaustive_test.append(prep_data)
</span><span class="commandsep"></span><span class="output"><span class="stdout">C:\crawlToTheFuture\crawl-to-the-future\dataset\entertainment.msn.com\2005\20050525031445_entertainment_msn_com_movies_movie_aspx_m_553499.html
</span><span class="exception">Traceback (most recent call last):
  File "&lt;pyshell#1&gt;", line 10, in &lt;module&gt;
    prep_data = prep_data_for_measurements(os.path.abspath(folder),lambda x: eatiht.extract(x))
  File "&lt;pyshell#0&gt;", line 125, in prep_data_for_measurements
    content = tokens_to_hist_extractor(extractor, os.path.abspath(val['testpath']))
  File "&lt;pyshell#0&gt;", line 56, in tokens_to_hist_extractor
    content = extract(data_filepath)
  File "&lt;pyshell#1&gt;", line 10, in &lt;lambda&gt;
    prep_data = prep_data_for_measurements(os.path.abspath(folder),lambda x: eatiht.extract(x))
  File "c:\python27\lib\site-packages\eatiht\eatiht.py", line 199, in extract
    max_path = hist[0]
IndexError: list index out of range
</span></span><span class="command"><span class="prompt">&gt;&gt;&gt; </span></span>
<span class="message">==================== New Session ====================
</span><span class="command"><span class="prompt">&gt;&gt;&gt; </span><span class="keyword">import</span> re <span class="comment">#for tokenizing</span>
<span class="prompt">... </span><span class="keyword">import</span> collections <span class="comment">#for multiset/histogram</span>
<span class="prompt">... </span><span class="keyword">import</span> os
<span class="prompt">... </span><span class="keyword">try</span>:
<span class="prompt">... </span>    <span class="keyword">from</span> StringIO <span class="keyword">import</span> StringIO
<span class="prompt">... </span><span class="keyword">except</span> <span class="builtin">ImportError</span>:
<span class="prompt">... </span>    <span class="keyword">from</span> io <span class="keyword">import</span> StringIO
<span class="prompt">... </span>
<span class="prompt">... </span><span class="keyword">import</span> lxml.html
<span class="prompt">... </span>
<span class="prompt">... </span><span class="keyword">try</span>:
<span class="prompt">... </span>    <span class="builtin">range</span> = <span class="builtin">xrange</span>
<span class="prompt">... </span><span class="keyword">except</span>:
<span class="prompt">... </span>    <span class="keyword">pass</span>
<span class="prompt">... </span>
<span class="prompt">... </span><span class="keyword">def</span> histsum(hist): <span class="keyword">return</span> <span class="builtin">sum</span>(hist.values())
<span class="prompt">... </span>
<span class="prompt">... </span>
<span class="prompt">... </span><span class="comment">#get every non-html word on page (ie. "//text()") as f-distribution</span>
<span class="prompt">... </span><span class="keyword">def</span> tokens_to_hist_from_universe(data_filepath):
<span class="prompt">... </span>
<span class="prompt">... </span>    <span class="keyword">with</span> <span class="builtin">open</span>(data_filepath,<span class="string">'r'</span>) <span class="keyword">as</span> data_file:
<span class="prompt">... </span>
<span class="prompt">... </span>        <span class="keyword">try</span>:
<span class="prompt">... </span>            parsed_goldhtml = lxml.html.parse(data_file,
<span class="prompt">... </span>                            lxml.html.HTMLParser(encoding=<span class="string">"utf-8"</span>))
<span class="prompt">... </span>        <span class="keyword">except</span>:
<span class="prompt">... </span>            <span class="keyword">print</span>(<span class="builtin">str</span>(data_file.read()))
<span class="prompt">... </span>        tokenized_content = collections.Counter()
<span class="prompt">... </span>
<span class="prompt">... </span>        content = <span class="string">""</span>.join(parsed_goldhtml.xpath(<span class="string">'//text()'</span>))
<span class="prompt">... </span>
<span class="prompt">... </span>        tokenized_content.update(re.split(<span class="string">r'\W+'</span>, content))
<span class="prompt">... </span>
<span class="prompt">... </span>    <span class="keyword">return</span> tokenized_content
<span class="prompt">... </span>
<span class="prompt">... </span>
<span class="prompt">... </span><span class="comment">#get every word from gold std. as f-distribution</span>
<span class="prompt">... </span><span class="keyword">def</span> tokens_to_hist_goldstd(test_filepath):
<span class="prompt">... </span>
<span class="prompt">... </span>    <span class="keyword">with</span> <span class="builtin">open</span>(os.path.abspath(test_filepath), <span class="string">'r'</span>) <span class="keyword">as</span> f:
<span class="prompt">... </span>
<span class="prompt">... </span>        <span class="comment">#print("test_filepath",os.path.abspath(test_filepath))</span>
<span class="prompt">... </span>        content = <span class="builtin">str</span>(f.read())
<span class="prompt">... </span>
<span class="prompt">... </span>        tokenized_content = collections.Counter()
<span class="prompt">... </span>
<span class="prompt">... </span>        tokenized_content.update(re.split(<span class="string">r'\W+'</span>, content))
<span class="prompt">... </span>
<span class="prompt">... </span>        <span class="keyword">return</span> tokenized_content
<span class="prompt">... </span>
<span class="prompt">... </span>
<span class="prompt">... </span><span class="comment">#get every extracted (predicted) word as f-distribution</span>
<span class="prompt">... </span><span class="keyword">def</span> tokens_to_hist_extractor(extract, data_filepath):
</span><span class="command-defs"><span class="command"><span class="prompt">... </span>    <span class="keyword">try</span>:
<span class="prompt">... </span>        content = extract(data_filepath)
<span class="prompt">... </span>    <span class="keyword">except</span> <span class="builtin">Exception</span>:
<span class="prompt">... </span>        <span class="keyword">print</span>(data_filepath)
<span class="prompt">... </span>        <span class="keyword">raise</span>
<span class="prompt">... </span>        <span class="comment">#raise Exception("\"exception\" method needs to be implemented")</span>
<span class="prompt">... </span>
<span class="prompt">... </span>    tokenized_content = collections.Counter()
<span class="prompt">... </span>    <span class="keyword">try</span>:
<span class="prompt">... </span>        tokenized_content.update(re.split(<span class="string">r'\W+'</span>, content))
<span class="prompt">... </span>    <span class="keyword">except</span>:
<span class="prompt">... </span>        <span class="keyword">print</span>(content)
<span class="prompt">... </span>    <span class="keyword">return</span> tokenized_content
<span class="prompt">... </span>
<span class="prompt">... </span>
</span></span><span class="command"><span class="prompt">... </span><span class="keyword">def</span> calc_praf(goldstd,predicted,universe):
<span class="prompt">... </span>
<span class="prompt">... </span>    TP = predicted &amp; goldstd
<span class="prompt">... </span>
<span class="prompt">... </span>    FP = predicted - goldstd
<span class="prompt">... </span>
<span class="prompt">... </span>    FN = (universe - predicted) &amp; goldstd
<span class="prompt">... </span>
<span class="prompt">... </span>    TN = (universe - predicted) &amp; (universe - goldstd)
<span class="prompt">... </span>
<span class="prompt">... </span>    precision = (histsum(TP)*<span class="number">1.0</span>)/histsum(TP+FP)
<span class="prompt">... </span>
<span class="prompt">... </span>    recall = (histsum(TP)*<span class="number">1.0</span>)/histsum(TP+FN)
<span class="prompt">... </span>
<span class="prompt">... </span>    accuracy = (histsum(TP+TN)*<span class="number">1.0</span>)/histsum(TP+FP+FN+TN)
<span class="prompt">... </span>    <span class="keyword">try</span>:
<span class="prompt">... </span>        f1 = <span class="number">2</span> * (((precision*recall)*<span class="number">1.0</span>)/(precision+recall))
<span class="prompt">... </span>    <span class="keyword">except</span> <span class="builtin">ZeroDivisionError</span>:
<span class="prompt">... </span>        f1 = <span class="number">0</span>
<span class="prompt">... </span>        <span class="comment">#print(precision,recall, accuracy)</span>
<span class="prompt">... </span>        <span class="comment">#raise</span>
<span class="prompt">... </span>    <span class="keyword">return</span> {<span class="string">'p'</span>:precision,<span class="string">'r'</span>:recall,<span class="string">'a'</span>:accuracy,<span class="string">'f1'</span>:f1}
<span class="prompt">... </span>
<span class="prompt">... </span>
<span class="prompt">... </span><span class="keyword">def</span> prep_data_for_measurements(directory, extractor,
<span class="prompt">... </span>                        goldfile_ext=<span class="string">'.txt'</span>,
<span class="prompt">... </span>                        testfile_ext=<span class="string">'.html'</span>,
<span class="prompt">... </span>                        pickle_output_name = <span class="builtin">None</span>):
<span class="prompt">... </span>    <span class="string">'''Given a directory, process the files (gold standard) in the following
</span><span class="prompt">... </span><span class="string">        steps:
</span><span class="prompt">... </span><span class="string">    1. Build dictionary of file names to file paths to gold std files and test file
</span><span class="prompt">... </span><span class="string">
</span><span class="prompt">... </span><span class="string">    2. For each file name, get associated "universe" values (all possible outcomes W)
</span><span class="prompt">... </span><span class="string">
</span><span class="prompt">... </span><span class="string">    3. For each file name, get goldstd histogram (G)
</span><span class="prompt">... </span><span class="string">
</span><span class="prompt">... </span><span class="string">    4. For each file name, get extractor's output (C)
</span><span class="prompt">... </span><span class="string">    '''</span>
<span class="prompt">... </span>    <span class="comment">#Step 1</span>
<span class="prompt">... </span>    filenames =  <span class="builtin">set</span>([re.sub((<span class="string">"\\"</span>+ goldfile_ext+<span class="string">"|"</span>+<span class="string">"\\"</span>+testfile_ext),<span class="string">""</span>,name)
<span class="prompt">... </span>                    <span class="keyword">for</span> name <span class="keyword">in</span> os.listdir(directory) ])
<span class="prompt">... </span>
<span class="prompt">... </span>    <span class="comment">#print("prep_data_for_measurements",filenames[0])</span>
<span class="prompt">... </span>
<span class="prompt">... </span>    golden_dict = { name:
<span class="prompt">... </span>                    {
<span class="prompt">... </span>                        <span class="string">'domain'</span>: os.path.split(os.path.split(directory)[<span class="number">0</span>])[<span class="number">1</span>],
<span class="prompt">... </span>                        <span class="string">'year'</span>: os.path.split(directory)[<span class="number">1</span>],
<span class="prompt">... </span>                        <span class="string">'goldpath'</span>:os.path.join(directory, name+goldfile_ext),
<span class="prompt">... </span>                        <span class="string">'testpath'</span>:os.path.join(directory, name+testfile_ext)
<span class="prompt">... </span>                    } <span class="keyword">for</span> name <span class="keyword">in</span> filenames }
<span class="prompt">... </span>    <span class="comment">#print(textfile_names)</span>
<span class="prompt">... </span>
<span class="prompt">... </span>
<span class="prompt">... </span>    <span class="keyword">for</span> key, val <span class="keyword">in</span> golden_dict.items():
<span class="prompt">... </span>        content = tokens_to_hist_extractor(extractor, os.path.abspath(val[<span class="string">'testpath'</span>]))
<span class="prompt">... </span>
<span class="prompt">... </span>        universe = tokens_to_hist_from_universe(os.path.abspath(val[<span class="string">'testpath'</span>]))
<span class="prompt">... </span>
<span class="prompt">... </span>        goldstd = tokens_to_hist_goldstd(os.path.abspath(val[<span class="string">'goldpath'</span>]))
<span class="prompt">... </span>
<span class="prompt">... </span>        val[<span class="string">'measurements'</span>] = calc_praf(goldstd,content,universe)
<span class="prompt">... </span>
<span class="prompt">... </span>    <span class="string">'''
</span><span class="prompt">... </span><span class="string">    #Step 2
</span><span class="prompt">... </span><span class="string">    for key, val in golden_dict.items():
</span><span class="prompt">... </span><span class="string">        #print()
</span><span class="prompt">... </span><span class="string">        print(val['testpath'])
</span><span class="prompt">... </span><span class="string">        val['W'] = tokens_to_hist_from_universe(os.path.abspath(val['testpath']))
</span><span class="prompt">... </span><span class="string">
</span><span class="prompt">... </span><span class="string">        #print(val['W'])
</span><span class="prompt">... </span><span class="string">
</span><span class="prompt">... </span><span class="string">    #Step 3
</span><span class="prompt">... </span><span class="string">    try:
</span><span class="prompt">... </span><span class="string">        for key, val in golden_dict.items():
</span><span class="prompt">... </span><span class="string">            val['G'] = tokens_to_hist_goldstd(os.path.abspath(val['goldpath']))
</span><span class="prompt">... </span><span class="string">    except Exception as e:
</span><span class="prompt">... </span><span class="string">        print(val['goldpath'])
</span><span class="prompt">... </span><span class="string">        raise
</span><span class="prompt">... </span><span class="string">
</span><span class="prompt">... </span><span class="string">    #Step 4
</span><span class="prompt">... </span><span class="string">    for key, val in golden_dict.items():
</span><span class="prompt">... </span><span class="string">        val['C'] = tokens_to_hist_extractor(extractor, os.path.abspath(val['testpath']))
</span><span class="prompt">... </span><span class="string">    '''</span>
<span class="prompt">... </span>    <span class="keyword">return</span> golden_dict
<span class="prompt">... </span>
<span class="prompt">... </span>
<span class="prompt">... </span><span class="keyword">def</span> get_measurements(prep_data):
</span><span class="command-defs"><span class="command"><span class="prompt">... </span>    <span class="keyword">for</span> key, val <span class="keyword">in</span> prep_data.items():
<span class="prompt">... </span>        val[<span class="string">'measurements'</span>] = calc_praf(val[<span class="string">'G'</span>],val[<span class="string">'C'</span>],val[<span class="string">'W'</span>])
<span class="prompt">... </span>
<span class="prompt">... </span>
</span></span><span class="command"><span class="prompt">... </span><span class="keyword">def</span> listsubdir(directory):
</span><span class="command-defs"><span class="command"><span class="prompt">... </span>    <span class="keyword">return</span> [os.path.join(d, f) <span class="keyword">for</span> d <span class="keyword">in</span> directory <span class="keyword">for</span> f <span class="keyword">in</span> os.listdir(d)
<span class="prompt">... </span>            <span class="keyword">if</span> os.path.isdir(os.path.join(d, f))]</span></span><span class="command">
</span><span class="commandsep"></span><span class="command"><span class="prompt">&gt;&gt;&gt; </span><span class="keyword">import</span> eatiht
<span class="prompt">... </span>dataset_path = [<span class="string">'C:/crawlToTheFuture/crawl-to-the-future/dataset/'</span>]
<span class="prompt">... </span>
<span class="prompt">... </span>folders = listsubdir(listsubdir(dataset_path))
<span class="prompt">... </span>
<span class="prompt">... </span>exhaustive_test = []
<span class="prompt">... </span><span class="keyword">for</span> folder <span class="keyword">in</span> folders:
<span class="prompt">... </span>    domainpath,year =  os.path.split(folder)
<span class="prompt">... </span>    domain = os.path.split(domainpath)[<span class="number">1</span>]
<span class="prompt">... </span>    prep_data = prep_data_for_measurements(os.path.abspath(folder),<span class="keyword">lambda</span> x: eatiht.extract(x))
<span class="prompt">... </span>    <span class="comment">#get_measurements(prep_data)</span>
<span class="prompt">... </span>    exhaustive_test.append(prep_data)
</span><span class="commandsep"></span><span class="output"><span class="exception">Traceback (most recent call last):
  File "&lt;pyshell#1&gt;", line 1, in &lt;module&gt;
    import eatiht
ImportError: No module named eatiht
</span></span><span class="command"><span class="prompt">&gt;&gt;&gt; </span></span>
<span class="message">==================== New Session ====================
</span><span class="command"><span class="prompt">&gt;&gt;&gt; </span><span class="keyword">import</span> re <span class="comment">#for tokenizing</span>
<span class="prompt">... </span><span class="keyword">import</span> collections <span class="comment">#for multiset/histogram</span>
<span class="prompt">... </span><span class="keyword">import</span> os
<span class="prompt">... </span><span class="keyword">try</span>:
<span class="prompt">... </span>    <span class="keyword">from</span> StringIO <span class="keyword">import</span> StringIO
<span class="prompt">... </span><span class="keyword">except</span> <span class="builtin">ImportError</span>:
<span class="prompt">... </span>    <span class="keyword">from</span> io <span class="keyword">import</span> StringIO
<span class="prompt">... </span>
<span class="prompt">... </span><span class="keyword">import</span> lxml.html
<span class="prompt">... </span>
<span class="prompt">... </span><span class="keyword">try</span>:
<span class="prompt">... </span>    <span class="builtin">range</span> = <span class="builtin">xrange</span>
<span class="prompt">... </span><span class="keyword">except</span>:
<span class="prompt">... </span>    <span class="keyword">pass</span>
<span class="prompt">... </span>
<span class="prompt">... </span><span class="keyword">def</span> histsum(hist): <span class="keyword">return</span> <span class="builtin">sum</span>(hist.values())
<span class="prompt">... </span>
<span class="prompt">... </span>
<span class="prompt">... </span><span class="comment">#get every non-html word on page (ie. "//text()") as f-distribution</span>
<span class="prompt">... </span><span class="keyword">def</span> tokens_to_hist_from_universe(data_filepath):
<span class="prompt">... </span>
<span class="prompt">... </span>    <span class="keyword">with</span> <span class="builtin">open</span>(data_filepath,<span class="string">'r'</span>) <span class="keyword">as</span> data_file:
<span class="prompt">... </span>
<span class="prompt">... </span>        <span class="keyword">try</span>:
<span class="prompt">... </span>            parsed_goldhtml = lxml.html.parse(data_file,
<span class="prompt">... </span>                            lxml.html.HTMLParser(encoding=<span class="string">"utf-8"</span>))
<span class="prompt">... </span>        <span class="keyword">except</span>:
<span class="prompt">... </span>            <span class="keyword">print</span>(<span class="builtin">str</span>(data_file.read()))
<span class="prompt">... </span>        tokenized_content = collections.Counter()
<span class="prompt">... </span>
<span class="prompt">... </span>        content = <span class="string">""</span>.join(parsed_goldhtml.xpath(<span class="string">'//text()'</span>))
<span class="prompt">... </span>
<span class="prompt">... </span>        tokenized_content.update(re.split(<span class="string">r'\W+'</span>, content))
<span class="prompt">... </span>
<span class="prompt">... </span>    <span class="keyword">return</span> tokenized_content
<span class="prompt">... </span>
<span class="prompt">... </span>
<span class="prompt">... </span><span class="comment">#get every word from gold std. as f-distribution</span>
<span class="prompt">... </span><span class="keyword">def</span> tokens_to_hist_goldstd(test_filepath):
<span class="prompt">... </span>
<span class="prompt">... </span>    <span class="keyword">with</span> <span class="builtin">open</span>(os.path.abspath(test_filepath), <span class="string">'r'</span>) <span class="keyword">as</span> f:
<span class="prompt">... </span>
<span class="prompt">... </span>        <span class="comment">#print("test_filepath",os.path.abspath(test_filepath))</span>
<span class="prompt">... </span>        content = <span class="builtin">str</span>(f.read())
<span class="prompt">... </span>
<span class="prompt">... </span>        tokenized_content = collections.Counter()
<span class="prompt">... </span>
<span class="prompt">... </span>        tokenized_content.update(re.split(<span class="string">r'\W+'</span>, content))
<span class="prompt">... </span>
<span class="prompt">... </span>        <span class="keyword">return</span> tokenized_content
<span class="prompt">... </span>
<span class="prompt">... </span>
<span class="prompt">... </span><span class="comment">#get every extracted (predicted) word as f-distribution</span>
<span class="prompt">... </span><span class="keyword">def</span> tokens_to_hist_extractor(extract, data_filepath):
</span><span class="command-defs"><span class="command"><span class="prompt">... </span>    <span class="keyword">try</span>:
<span class="prompt">... </span>        content = extract(data_filepath)
<span class="prompt">... </span>    <span class="keyword">except</span> <span class="builtin">Exception</span>:
<span class="prompt">... </span>        <span class="keyword">print</span>(data_filepath)
<span class="prompt">... </span>        <span class="keyword">raise</span>
<span class="prompt">... </span>        <span class="comment">#raise Exception("\"exception\" method needs to be implemented")</span>
<span class="prompt">... </span>
<span class="prompt">... </span>    tokenized_content = collections.Counter()
<span class="prompt">... </span>    <span class="keyword">try</span>:
<span class="prompt">... </span>        tokenized_content.update(re.split(<span class="string">r'\W+'</span>, content))
<span class="prompt">... </span>    <span class="keyword">except</span>:
<span class="prompt">... </span>        <span class="keyword">print</span>(content)
<span class="prompt">... </span>    <span class="keyword">return</span> tokenized_content
<span class="prompt">... </span>
<span class="prompt">... </span>
</span></span><span class="command"><span class="prompt">... </span><span class="keyword">def</span> calc_praf(goldstd,predicted,universe):
<span class="prompt">... </span>
<span class="prompt">... </span>    TP = predicted &amp; goldstd
<span class="prompt">... </span>
<span class="prompt">... </span>    FP = predicted - goldstd
<span class="prompt">... </span>
<span class="prompt">... </span>    FN = (universe - predicted) &amp; goldstd
<span class="prompt">... </span>
<span class="prompt">... </span>    TN = (universe - predicted) &amp; (universe - goldstd)
<span class="prompt">... </span>
<span class="prompt">... </span>    precision = (histsum(TP)*<span class="number">1.0</span>)/histsum(TP+FP)
<span class="prompt">... </span>
<span class="prompt">... </span>    recall = (histsum(TP)*<span class="number">1.0</span>)/histsum(TP+FN)
<span class="prompt">... </span>
<span class="prompt">... </span>    accuracy = (histsum(TP+TN)*<span class="number">1.0</span>)/histsum(TP+FP+FN+TN)
<span class="prompt">... </span>    <span class="keyword">try</span>:
<span class="prompt">... </span>        f1 = <span class="number">2</span> * (((precision*recall)*<span class="number">1.0</span>)/(precision+recall))
<span class="prompt">... </span>    <span class="keyword">except</span> <span class="builtin">ZeroDivisionError</span>:
<span class="prompt">... </span>        f1 = <span class="number">0</span>
<span class="prompt">... </span>        <span class="comment">#print(precision,recall, accuracy)</span>
<span class="prompt">... </span>        <span class="comment">#raise</span>
<span class="prompt">... </span>    <span class="keyword">return</span> {<span class="string">'p'</span>:precision,<span class="string">'r'</span>:recall,<span class="string">'a'</span>:accuracy,<span class="string">'f1'</span>:f1}
<span class="prompt">... </span>
<span class="prompt">... </span>
<span class="prompt">... </span><span class="keyword">def</span> prep_data_for_measurements(directory, extractor,
<span class="prompt">... </span>                        goldfile_ext=<span class="string">'.txt'</span>,
<span class="prompt">... </span>                        testfile_ext=<span class="string">'.html'</span>,
<span class="prompt">... </span>                        pickle_output_name = <span class="builtin">None</span>):
<span class="prompt">... </span>    <span class="string">'''Given a directory, process the files (gold standard) in the following
</span><span class="prompt">... </span><span class="string">        steps:
</span><span class="prompt">... </span><span class="string">    1. Build dictionary of file names to file paths to gold std files and test file
</span><span class="prompt">... </span><span class="string">
</span><span class="prompt">... </span><span class="string">    2. For each file name, get associated "universe" values (all possible outcomes W)
</span><span class="prompt">... </span><span class="string">
</span><span class="prompt">... </span><span class="string">    3. For each file name, get goldstd histogram (G)
</span><span class="prompt">... </span><span class="string">
</span><span class="prompt">... </span><span class="string">    4. For each file name, get extractor's output (C)
</span><span class="prompt">... </span><span class="string">    '''</span>
<span class="prompt">... </span>    <span class="comment">#Step 1</span>
<span class="prompt">... </span>    filenames =  <span class="builtin">set</span>([re.sub((<span class="string">"\\"</span>+ goldfile_ext+<span class="string">"|"</span>+<span class="string">"\\"</span>+testfile_ext),<span class="string">""</span>,name)
<span class="prompt">... </span>                    <span class="keyword">for</span> name <span class="keyword">in</span> os.listdir(directory) ])
<span class="prompt">... </span>
<span class="prompt">... </span>    <span class="comment">#print("prep_data_for_measurements",filenames[0])</span>
<span class="prompt">... </span>
<span class="prompt">... </span>    golden_dict = { name:
<span class="prompt">... </span>                    {
<span class="prompt">... </span>                        <span class="string">'domain'</span>: os.path.split(os.path.split(directory)[<span class="number">0</span>])[<span class="number">1</span>],
<span class="prompt">... </span>                        <span class="string">'year'</span>: os.path.split(directory)[<span class="number">1</span>],
<span class="prompt">... </span>                        <span class="string">'goldpath'</span>:os.path.join(directory, name+goldfile_ext),
<span class="prompt">... </span>                        <span class="string">'testpath'</span>:os.path.join(directory, name+testfile_ext)
<span class="prompt">... </span>                    } <span class="keyword">for</span> name <span class="keyword">in</span> filenames }
<span class="prompt">... </span>    <span class="comment">#print(textfile_names)</span>
<span class="prompt">... </span>
<span class="prompt">... </span>
<span class="prompt">... </span>    <span class="keyword">for</span> key, val <span class="keyword">in</span> golden_dict.items():
<span class="prompt">... </span>        content = tokens_to_hist_extractor(extractor, os.path.abspath(val[<span class="string">'testpath'</span>]))
<span class="prompt">... </span>
<span class="prompt">... </span>        universe = tokens_to_hist_from_universe(os.path.abspath(val[<span class="string">'testpath'</span>]))
<span class="prompt">... </span>
<span class="prompt">... </span>        goldstd = tokens_to_hist_goldstd(os.path.abspath(val[<span class="string">'goldpath'</span>]))
<span class="prompt">... </span>
<span class="prompt">... </span>        val[<span class="string">'measurements'</span>] = calc_praf(goldstd,content,universe)
<span class="prompt">... </span>
<span class="prompt">... </span>    <span class="string">'''
</span><span class="prompt">... </span><span class="string">    #Step 2
</span><span class="prompt">... </span><span class="string">    for key, val in golden_dict.items():
</span><span class="prompt">... </span><span class="string">        #print()
</span><span class="prompt">... </span><span class="string">        print(val['testpath'])
</span><span class="prompt">... </span><span class="string">        val['W'] = tokens_to_hist_from_universe(os.path.abspath(val['testpath']))
</span><span class="prompt">... </span><span class="string">
</span><span class="prompt">... </span><span class="string">        #print(val['W'])
</span><span class="prompt">... </span><span class="string">
</span><span class="prompt">... </span><span class="string">    #Step 3
</span><span class="prompt">... </span><span class="string">    try:
</span><span class="prompt">... </span><span class="string">        for key, val in golden_dict.items():
</span><span class="prompt">... </span><span class="string">            val['G'] = tokens_to_hist_goldstd(os.path.abspath(val['goldpath']))
</span><span class="prompt">... </span><span class="string">    except Exception as e:
</span><span class="prompt">... </span><span class="string">        print(val['goldpath'])
</span><span class="prompt">... </span><span class="string">        raise
</span><span class="prompt">... </span><span class="string">
</span><span class="prompt">... </span><span class="string">    #Step 4
</span><span class="prompt">... </span><span class="string">    for key, val in golden_dict.items():
</span><span class="prompt">... </span><span class="string">        val['C'] = tokens_to_hist_extractor(extractor, os.path.abspath(val['testpath']))
</span><span class="prompt">... </span><span class="string">    '''</span>
<span class="prompt">... </span>    <span class="keyword">return</span> golden_dict
<span class="prompt">... </span>
<span class="prompt">... </span>
<span class="prompt">... </span><span class="keyword">def</span> get_measurements(prep_data):
</span><span class="command-defs"><span class="command"><span class="prompt">... </span>    <span class="keyword">for</span> key, val <span class="keyword">in</span> prep_data.items():
<span class="prompt">... </span>        val[<span class="string">'measurements'</span>] = calc_praf(val[<span class="string">'G'</span>],val[<span class="string">'C'</span>],val[<span class="string">'W'</span>])
<span class="prompt">... </span>
<span class="prompt">... </span>
</span></span><span class="command"><span class="prompt">... </span><span class="keyword">def</span> listsubdir(directory):
</span><span class="command-defs"><span class="command"><span class="prompt">... </span>    <span class="keyword">return</span> [os.path.join(d, f) <span class="keyword">for</span> d <span class="keyword">in</span> directory <span class="keyword">for</span> f <span class="keyword">in</span> os.listdir(d)
<span class="prompt">... </span>            <span class="keyword">if</span> os.path.isdir(os.path.join(d, f))]</span></span><span class="command">
</span><span class="commandsep"></span><span class="command"><span class="prompt">&gt;&gt;&gt; </span><span class="keyword">import</span> eatiht
<span class="prompt">... </span>dataset_path = [<span class="string">'C:/crawlToTheFuture/crawl-to-the-future/dataset/'</span>]
<span class="prompt">... </span>
<span class="prompt">... </span>folders = listsubdir(listsubdir(dataset_path))
<span class="prompt">... </span>
<span class="prompt">... </span>exhaustive_test = []
<span class="prompt">... </span><span class="keyword">for</span> folder <span class="keyword">in</span> folders:
<span class="prompt">... </span>    domainpath,year =  os.path.split(folder)
<span class="prompt">... </span>    domain = os.path.split(domainpath)[<span class="number">1</span>]
<span class="prompt">... </span>    prep_data = prep_data_for_measurements(os.path.abspath(folder),<span class="keyword">lambda</span> x: eatiht.extract(x))
<span class="prompt">... </span>    <span class="comment">#get_measurements(prep_data)</span>
<span class="prompt">... </span>    exhaustive_test.append(prep_data)
</span><span class="commandsep"></span><span class="output"><span class="stdout">C:\crawlToTheFuture\crawl-to-the-future\dataset\entertainment.msn.com\2005\20050525031445_entertainment_msn_com_movies_movie_aspx_m_553499.html
</span><span class="exception">Traceback (most recent call last):
  File "&lt;pyshell#1&gt;", line 10, in &lt;module&gt;
    prep_data = prep_data_for_measurements(os.path.abspath(folder),lambda x: eatiht.extract(x))
  File "&lt;pyshell#0&gt;", line 125, in prep_data_for_measurements
    content = tokens_to_hist_extractor(extractor, os.path.abspath(val['testpath']))
  File "&lt;pyshell#0&gt;", line 56, in tokens_to_hist_extractor
    content = extract(data_filepath)
  File "&lt;pyshell#1&gt;", line 10, in &lt;lambda&gt;
    prep_data = prep_data_for_measurements(os.path.abspath(folder),lambda x: eatiht.extract(x))
  File "c:\python27\lib\site-packages\eatiht\eatiht.py", line 199, in extract
    max_path = hist[0]
IndexError: list index out of range
</span></span><span class="command"><span class="prompt">&gt;&gt;&gt; </span></span>
<span class="message">==================== New Session ====================
</span><span class="command"><span class="prompt">&gt;&gt;&gt; </span><span class="keyword">import</span> re <span class="comment">#for tokenizing</span>
<span class="prompt">... </span><span class="keyword">import</span> collections <span class="comment">#for multiset/histogram</span>
<span class="prompt">... </span><span class="keyword">import</span> os
<span class="prompt">... </span><span class="keyword">try</span>:
<span class="prompt">... </span>    <span class="keyword">from</span> StringIO <span class="keyword">import</span> StringIO
<span class="prompt">... </span><span class="keyword">except</span> <span class="builtin">ImportError</span>:
<span class="prompt">... </span>    <span class="keyword">from</span> io <span class="keyword">import</span> StringIO
<span class="prompt">... </span>
<span class="prompt">... </span><span class="keyword">import</span> lxml.html
<span class="prompt">... </span>
<span class="prompt">... </span><span class="keyword">try</span>:
<span class="prompt">... </span>    <span class="builtin">range</span> = <span class="builtin">xrange</span>
<span class="prompt">... </span><span class="keyword">except</span>:
<span class="prompt">... </span>    <span class="keyword">pass</span>
<span class="prompt">... </span>
<span class="prompt">... </span><span class="keyword">def</span> histsum(hist): <span class="keyword">return</span> <span class="builtin">sum</span>(hist.values())
<span class="prompt">... </span>
<span class="prompt">... </span>
<span class="prompt">... </span><span class="comment">#get every non-html word on page (ie. "//text()") as f-distribution</span>
<span class="prompt">... </span><span class="keyword">def</span> tokens_to_hist_from_universe(data_filepath):
<span class="prompt">... </span>
<span class="prompt">... </span>    <span class="keyword">with</span> <span class="builtin">open</span>(data_filepath,<span class="string">'r'</span>) <span class="keyword">as</span> data_file:
<span class="prompt">... </span>
<span class="prompt">... </span>        <span class="keyword">try</span>:
<span class="prompt">... </span>            parsed_goldhtml = lxml.html.parse(data_file,
<span class="prompt">... </span>                            lxml.html.HTMLParser(encoding=<span class="string">"utf-8"</span>))
<span class="prompt">... </span>        <span class="keyword">except</span>:
<span class="prompt">... </span>            <span class="keyword">print</span>(<span class="builtin">str</span>(data_file.read()))
<span class="prompt">... </span>        tokenized_content = collections.Counter()
<span class="prompt">... </span>
<span class="prompt">... </span>        content = <span class="string">""</span>.join(parsed_goldhtml.xpath(<span class="string">'//text()'</span>))
<span class="prompt">... </span>
<span class="prompt">... </span>        tokenized_content.update(re.split(<span class="string">r'\W+'</span>, content))
<span class="prompt">... </span>
<span class="prompt">... </span>    <span class="keyword">return</span> tokenized_content
<span class="prompt">... </span>
<span class="prompt">... </span>
<span class="prompt">... </span><span class="comment">#get every word from gold std. as f-distribution</span>
<span class="prompt">... </span><span class="keyword">def</span> tokens_to_hist_goldstd(test_filepath):
<span class="prompt">... </span>
<span class="prompt">... </span>    <span class="keyword">with</span> <span class="builtin">open</span>(os.path.abspath(test_filepath), <span class="string">'r'</span>) <span class="keyword">as</span> f:
<span class="prompt">... </span>
<span class="prompt">... </span>        <span class="comment">#print("test_filepath",os.path.abspath(test_filepath))</span>
<span class="prompt">... </span>        content = <span class="builtin">str</span>(f.read())
<span class="prompt">... </span>
<span class="prompt">... </span>        tokenized_content = collections.Counter()
<span class="prompt">... </span>
<span class="prompt">... </span>        tokenized_content.update(re.split(<span class="string">r'\W+'</span>, content))
<span class="prompt">... </span>
<span class="prompt">... </span>        <span class="keyword">return</span> tokenized_content
<span class="prompt">... </span>
<span class="prompt">... </span>
<span class="prompt">... </span><span class="comment">#get every extracted (predicted) word as f-distribution</span>
<span class="prompt">... </span><span class="keyword">def</span> tokens_to_hist_extractor(extract, data_filepath):
</span><span class="command-defs"><span class="command"><span class="prompt">... </span>    <span class="keyword">try</span>:
<span class="prompt">... </span>        content = extract(data_filepath)
<span class="prompt">... </span>    <span class="keyword">except</span> <span class="builtin">Exception</span>:
<span class="prompt">... </span>        <span class="keyword">print</span>(data_filepath)
<span class="prompt">... </span>        <span class="keyword">raise</span>
<span class="prompt">... </span>        <span class="comment">#raise Exception("\"exception\" method needs to be implemented")</span>
<span class="prompt">... </span>
<span class="prompt">... </span>    tokenized_content = collections.Counter()
<span class="prompt">... </span>    <span class="keyword">try</span>:
<span class="prompt">... </span>        tokenized_content.update(re.split(<span class="string">r'\W+'</span>, content))
<span class="prompt">... </span>    <span class="keyword">except</span>:
<span class="prompt">... </span>        <span class="keyword">print</span>(content)
<span class="prompt">... </span>    <span class="keyword">return</span> tokenized_content
<span class="prompt">... </span>
<span class="prompt">... </span>
</span></span><span class="command"><span class="prompt">... </span><span class="keyword">def</span> calc_praf(goldstd,predicted,universe):
<span class="prompt">... </span>
<span class="prompt">... </span>    TP = predicted &amp; goldstd
<span class="prompt">... </span>
<span class="prompt">... </span>    FP = predicted - goldstd
<span class="prompt">... </span>
<span class="prompt">... </span>    FN = (universe - predicted) &amp; goldstd
<span class="prompt">... </span>
<span class="prompt">... </span>    TN = (universe - predicted) &amp; (universe - goldstd)
<span class="prompt">... </span>
<span class="prompt">... </span>    precision = (histsum(TP)*<span class="number">1.0</span>)/histsum(TP+FP)
<span class="prompt">... </span>
<span class="prompt">... </span>    recall = (histsum(TP)*<span class="number">1.0</span>)/histsum(TP+FN)
<span class="prompt">... </span>
<span class="prompt">... </span>    accuracy = (histsum(TP+TN)*<span class="number">1.0</span>)/histsum(TP+FP+FN+TN)
<span class="prompt">... </span>    <span class="keyword">try</span>:
<span class="prompt">... </span>        f1 = <span class="number">2</span> * (((precision*recall)*<span class="number">1.0</span>)/(precision+recall))
<span class="prompt">... </span>    <span class="keyword">except</span> <span class="builtin">ZeroDivisionError</span>:
<span class="prompt">... </span>        f1 = <span class="number">0</span>
<span class="prompt">... </span>        <span class="comment">#print(precision,recall, accuracy)</span>
<span class="prompt">... </span>        <span class="comment">#raise</span>
<span class="prompt">... </span>    <span class="keyword">return</span> {<span class="string">'p'</span>:precision,<span class="string">'r'</span>:recall,<span class="string">'a'</span>:accuracy,<span class="string">'f1'</span>:f1}
<span class="prompt">... </span>
<span class="prompt">... </span>
<span class="prompt">... </span><span class="keyword">def</span> prep_data_for_measurements(directory, extractor,
<span class="prompt">... </span>                        goldfile_ext=<span class="string">'.txt'</span>,
<span class="prompt">... </span>                        testfile_ext=<span class="string">'.html'</span>,
<span class="prompt">... </span>                        pickle_output_name = <span class="builtin">None</span>):
<span class="prompt">... </span>    <span class="string">'''Given a directory, process the files (gold standard) in the following
</span><span class="prompt">... </span><span class="string">        steps:
</span><span class="prompt">... </span><span class="string">    1. Build dictionary of file names to file paths to gold std files and test file
</span><span class="prompt">... </span><span class="string">
</span><span class="prompt">... </span><span class="string">    2. For each file name, get associated "universe" values (all possible outcomes W)
</span><span class="prompt">... </span><span class="string">
</span><span class="prompt">... </span><span class="string">    3. For each file name, get goldstd histogram (G)
</span><span class="prompt">... </span><span class="string">
</span><span class="prompt">... </span><span class="string">    4. For each file name, get extractor's output (C)
</span><span class="prompt">... </span><span class="string">    '''</span>
<span class="prompt">... </span>    <span class="comment">#Step 1</span>
<span class="prompt">... </span>    filenames =  <span class="builtin">set</span>([re.sub((<span class="string">"\\"</span>+ goldfile_ext+<span class="string">"|"</span>+<span class="string">"\\"</span>+testfile_ext),<span class="string">""</span>,name)
<span class="prompt">... </span>                    <span class="keyword">for</span> name <span class="keyword">in</span> os.listdir(directory) ])
<span class="prompt">... </span>
<span class="prompt">... </span>    <span class="comment">#print("prep_data_for_measurements",filenames[0])</span>
<span class="prompt">... </span>
<span class="prompt">... </span>    golden_dict = { name:
<span class="prompt">... </span>                    {
<span class="prompt">... </span>                        <span class="string">'domain'</span>: os.path.split(os.path.split(directory)[<span class="number">0</span>])[<span class="number">1</span>],
<span class="prompt">... </span>                        <span class="string">'year'</span>: os.path.split(directory)[<span class="number">1</span>],
<span class="prompt">... </span>                        <span class="string">'goldpath'</span>:os.path.join(directory, name+goldfile_ext),
<span class="prompt">... </span>                        <span class="string">'testpath'</span>:os.path.join(directory, name+testfile_ext)
<span class="prompt">... </span>                    } <span class="keyword">for</span> name <span class="keyword">in</span> filenames }
<span class="prompt">... </span>    <span class="comment">#print(textfile_names)</span>
<span class="prompt">... </span>
<span class="prompt">... </span>
<span class="prompt">... </span>    <span class="keyword">for</span> key, val <span class="keyword">in</span> golden_dict.items():
<span class="prompt">... </span>        content = tokens_to_hist_extractor(extractor, os.path.abspath(val[<span class="string">'testpath'</span>]))
<span class="prompt">... </span>
<span class="prompt">... </span>        universe = tokens_to_hist_from_universe(os.path.abspath(val[<span class="string">'testpath'</span>]))
<span class="prompt">... </span>
<span class="prompt">... </span>        goldstd = tokens_to_hist_goldstd(os.path.abspath(val[<span class="string">'goldpath'</span>]))
<span class="prompt">... </span>
<span class="prompt">... </span>        val[<span class="string">'measurements'</span>] = calc_praf(goldstd,content,universe)
<span class="prompt">... </span>
<span class="prompt">... </span>    <span class="string">'''
</span><span class="prompt">... </span><span class="string">    #Step 2
</span><span class="prompt">... </span><span class="string">    for key, val in golden_dict.items():
</span><span class="prompt">... </span><span class="string">        #print()
</span><span class="prompt">... </span><span class="string">        print(val['testpath'])
</span><span class="prompt">... </span><span class="string">        val['W'] = tokens_to_hist_from_universe(os.path.abspath(val['testpath']))
</span><span class="prompt">... </span><span class="string">
</span><span class="prompt">... </span><span class="string">        #print(val['W'])
</span><span class="prompt">... </span><span class="string">
</span><span class="prompt">... </span><span class="string">    #Step 3
</span><span class="prompt">... </span><span class="string">    try:
</span><span class="prompt">... </span><span class="string">        for key, val in golden_dict.items():
</span><span class="prompt">... </span><span class="string">            val['G'] = tokens_to_hist_goldstd(os.path.abspath(val['goldpath']))
</span><span class="prompt">... </span><span class="string">    except Exception as e:
</span><span class="prompt">... </span><span class="string">        print(val['goldpath'])
</span><span class="prompt">... </span><span class="string">        raise
</span><span class="prompt">... </span><span class="string">
</span><span class="prompt">... </span><span class="string">    #Step 4
</span><span class="prompt">... </span><span class="string">    for key, val in golden_dict.items():
</span><span class="prompt">... </span><span class="string">        val['C'] = tokens_to_hist_extractor(extractor, os.path.abspath(val['testpath']))
</span><span class="prompt">... </span><span class="string">    '''</span>
<span class="prompt">... </span>    <span class="keyword">return</span> golden_dict
<span class="prompt">... </span>
<span class="prompt">... </span>
<span class="prompt">... </span><span class="keyword">def</span> get_measurements(prep_data):
</span><span class="command-defs"><span class="command"><span class="prompt">... </span>    <span class="keyword">for</span> key, val <span class="keyword">in</span> prep_data.items():
<span class="prompt">... </span>        val[<span class="string">'measurements'</span>] = calc_praf(val[<span class="string">'G'</span>],val[<span class="string">'C'</span>],val[<span class="string">'W'</span>])
<span class="prompt">... </span>
<span class="prompt">... </span>
</span></span><span class="command"><span class="prompt">... </span><span class="keyword">def</span> listsubdir(directory):
</span><span class="command-defs"><span class="command"><span class="prompt">... </span>    <span class="keyword">return</span> [os.path.join(d, f) <span class="keyword">for</span> d <span class="keyword">in</span> directory <span class="keyword">for</span> f <span class="keyword">in</span> os.listdir(d)
<span class="prompt">... </span>            <span class="keyword">if</span> os.path.isdir(os.path.join(d, f))]</span></span><span class="command">
</span><span class="commandsep"></span><span class="command"><span class="prompt">&gt;&gt;&gt; </span><span class="keyword">import</span> eatiht
<span class="prompt">... </span>dataset_path = [<span class="string">'C:/crawlToTheFuture/crawl-to-the-future/dataset/'</span>]
<span class="prompt">... </span>
<span class="prompt">... </span>folders = listsubdir(listsubdir(dataset_path))
<span class="prompt">... </span>
<span class="prompt">... </span>exhaustive_test = []
<span class="prompt">... </span><span class="keyword">for</span> folder <span class="keyword">in</span> folders:
<span class="prompt">... </span>    domainpath,year =  os.path.split(folder)
<span class="prompt">... </span>    domain = os.path.split(domainpath)[<span class="number">1</span>]
<span class="prompt">... </span>    prep_data = prep_data_for_measurements(os.path.abspath(folder),<span class="keyword">lambda</span> x: eatiht.extract(x))
<span class="prompt">... </span>    <span class="comment">#get_measurements(prep_data)</span>
<span class="prompt">... </span>    exhaustive_test.append(prep_data)
</span><span class="commandsep"></span><span class="output"><span class="exception">Traceback (most recent call last):
  File "&lt;pyshell#1&gt;", line 10, in &lt;module&gt;
    prep_data = prep_data_for_measurements(os.path.abspath(folder),lambda x: eatiht.extract(x))
  File "&lt;pyshell#0&gt;", line 129, in prep_data_for_measurements
    goldstd = tokens_to_hist_goldstd(os.path.abspath(val['goldpath']))
  File "&lt;pyshell#0&gt;", line 41, in tokens_to_hist_goldstd
    with open(os.path.abspath(test_filepath), 'r') as f:
IOError: [Errno 2] No such file or directory: 'C:\\crawlToTheFuture\\crawl-to-the-future\\dataset\\www.foxnews.com\\2010\\Slovak Man Takes Hidden Explosive on Dublin Flight - International News   News of the World   Middle East News   Europe News - FOXNews.com.txt'
</span></span><span class="command"><span class="prompt">&gt;&gt;&gt; </span><span class="keyword">import</span> re <span class="comment">#for tokenizing</span></span><span class="folded"><span class="command">
<span class="prompt">... </span><span class="keyword">import</span> collections <span class="comment">#for multiset/histogram</span>
<span class="prompt">... </span><span class="keyword">import</span> os
<span class="prompt">... </span><span class="keyword">try</span>:
<span class="prompt">... </span>    <span class="keyword">from</span> StringIO <span class="keyword">import</span> StringIO
<span class="prompt">... </span><span class="keyword">except</span> <span class="builtin">ImportError</span>:
<span class="prompt">... </span>    <span class="keyword">from</span> io <span class="keyword">import</span> StringIO
<span class="prompt">... </span>
<span class="prompt">... </span><span class="keyword">import</span> lxml.html
<span class="prompt">... </span>
<span class="prompt">... </span><span class="keyword">try</span>:
<span class="prompt">... </span>    <span class="builtin">range</span> = <span class="builtin">xrange</span>
<span class="prompt">... </span><span class="keyword">except</span>:
<span class="prompt">... </span>    <span class="keyword">pass</span>
<span class="prompt">... </span>
<span class="prompt">... </span><span class="keyword">def</span> histsum(hist): <span class="keyword">return</span> <span class="builtin">sum</span>(hist.values())
<span class="prompt">... </span>
<span class="prompt">... </span>
<span class="prompt">... </span><span class="comment">#get every non-html word on page (ie. "//text()") as f-distribution</span>
<span class="prompt">... </span><span class="keyword">def</span> tokens_to_hist_from_universe(data_filepath):
<span class="prompt">... </span>
<span class="prompt">... </span>    <span class="keyword">with</span> <span class="builtin">open</span>(data_filepath,<span class="string">'r'</span>) <span class="keyword">as</span> data_file:
<span class="prompt">... </span>
<span class="prompt">... </span>        <span class="keyword">try</span>:
<span class="prompt">... </span>            parsed_goldhtml = lxml.html.parse(data_file,
<span class="prompt">... </span>                            lxml.html.HTMLParser(encoding=<span class="string">"utf-8"</span>))
<span class="prompt">... </span>        <span class="keyword">except</span>:
<span class="prompt">... </span>            <span class="keyword">print</span>(<span class="builtin">str</span>(data_file.read()))
<span class="prompt">... </span>        tokenized_content = collections.Counter()
<span class="prompt">... </span>
<span class="prompt">... </span>        content = <span class="string">""</span>.join(parsed_goldhtml.xpath(<span class="string">'//text()'</span>))
<span class="prompt">... </span>
<span class="prompt">... </span>        tokenized_content.update(re.split(<span class="string">r'\W+'</span>, content))
<span class="prompt">... </span>
<span class="prompt">... </span>    <span class="keyword">return</span> tokenized_content
<span class="prompt">... </span>
<span class="prompt">... </span>
<span class="prompt">... </span><span class="comment">#get every word from gold std. as f-distribution</span>
<span class="prompt">... </span><span class="keyword">def</span> tokens_to_hist_goldstd(test_filepath):
<span class="prompt">... </span>
<span class="prompt">... </span>    <span class="keyword">with</span> <span class="builtin">open</span>(os.path.abspath(test_filepath), <span class="string">'r'</span>) <span class="keyword">as</span> f:
<span class="prompt">... </span>
<span class="prompt">... </span>        <span class="comment">#print("test_filepath",os.path.abspath(test_filepath))</span>
<span class="prompt">... </span>        content = <span class="builtin">str</span>(f.read())
<span class="prompt">... </span>
<span class="prompt">... </span>        tokenized_content = collections.Counter()
<span class="prompt">... </span>
<span class="prompt">... </span>        tokenized_content.update(re.split(<span class="string">r'\W+'</span>, content))
<span class="prompt">... </span>
<span class="prompt">... </span>        <span class="keyword">return</span> tokenized_content
<span class="prompt">... </span>
<span class="prompt">... </span>
<span class="prompt">... </span><span class="comment">#get every extracted (predicted) word as f-distribution</span>
<span class="prompt">... </span><span class="keyword">def</span> tokens_to_hist_extractor(extract, data_filepath):
</span><span class="command-defs"><span class="command"><span class="prompt">... </span>    <span class="keyword">print</span>(data_filepath)
<span class="prompt">... </span>    
<span class="prompt">... </span>    <span class="keyword">if</span> os.path.exists(data_filepath):
<span class="prompt">... </span>        
<span class="prompt">... </span>        <span class="keyword">try</span>:
<span class="prompt">... </span>            content = extract(data_filepath).read()
<span class="prompt">... </span>        <span class="keyword">except</span> <span class="builtin">IOError</span>:
<span class="prompt">... </span>            
<span class="prompt">... </span>            <span class="keyword">print</span>(data_filepath)
<span class="prompt">... </span>            <span class="keyword">raise</span>
<span class="prompt">... </span>        <span class="comment">#raise Exception("\"exception\" method needs to be implemented")</span>
<span class="prompt">... </span>    <span class="keyword">else</span>:
<span class="prompt">... </span>        data_filepath += <span class="string">'.txt'</span>
<span class="prompt">... </span>        <span class="keyword">try</span>:
<span class="prompt">... </span>            content = extract(data_filepath).read()
<span class="prompt">... </span>        <span class="keyword">except</span> <span class="builtin">IOError</span>:
<span class="prompt">... </span>            
<span class="prompt">... </span>            <span class="keyword">print</span>(data_filepath)
<span class="prompt">... </span>            <span class="keyword">raise</span>
<span class="prompt">... </span>    tokenized_content = collections.Counter()
<span class="prompt">... </span>    tokenized_content.update(re.split(<span class="string">r'\W+'</span>, content))
<span class="prompt">... </span>
<span class="prompt">... </span>    <span class="keyword">return</span> tokenized_content
<span class="prompt">... </span>
<span class="prompt">... </span>
<span class="prompt">... </span>
</span></span><span class="command"><span class="prompt">... </span><span class="keyword">def</span> calc_praf(goldstd,predicted,universe):
<span class="prompt">... </span>
<span class="prompt">... </span>    TP = predicted &amp; goldstd
<span class="prompt">... </span>
<span class="prompt">... </span>    FP = predicted - goldstd
<span class="prompt">... </span>
<span class="prompt">... </span>    FN = (universe - predicted) &amp; goldstd
<span class="prompt">... </span>
<span class="prompt">... </span>    TN = (universe - predicted) &amp; (universe - goldstd)
<span class="prompt">... </span>
<span class="prompt">... </span>    precision = (histsum(TP)*<span class="number">1.0</span>)/histsum(TP+FP)
<span class="prompt">... </span>
<span class="prompt">... </span>    recall = (histsum(TP)*<span class="number">1.0</span>)/histsum(TP+FN)
<span class="prompt">... </span>
<span class="prompt">... </span>    accuracy = (histsum(TP+TN)*<span class="number">1.0</span>)/histsum(TP+FP+FN+TN)
<span class="prompt">... </span>    <span class="keyword">try</span>:
<span class="prompt">... </span>        f1 = <span class="number">2</span> * (((precision*recall)*<span class="number">1.0</span>)/(precision+recall))
<span class="prompt">... </span>    <span class="keyword">except</span> <span class="builtin">ZeroDivisionError</span>:
<span class="prompt">... </span>        f1 = <span class="number">0</span>
<span class="prompt">... </span>        <span class="comment">#print(precision,recall, accuracy)</span>
<span class="prompt">... </span>        <span class="comment">#raise</span>
<span class="prompt">... </span>    <span class="keyword">return</span> {<span class="string">'p'</span>:precision,<span class="string">'r'</span>:recall,<span class="string">'a'</span>:accuracy,<span class="string">'f1'</span>:f1}
<span class="prompt">... </span>
<span class="prompt">... </span>
<span class="prompt">... </span><span class="keyword">def</span> prep_data_for_measurements(directory, extractor,
<span class="prompt">... </span>                        goldfile_ext=<span class="string">'.txt'</span>,
<span class="prompt">... </span>                        testfile_ext=<span class="string">'.html'</span>,
<span class="prompt">... </span>                        pickle_output_name = <span class="builtin">None</span>):
<span class="prompt">... </span>    <span class="string">'''Given a directory, process the files (gold standard) in the following
</span><span class="prompt">... </span><span class="string">        steps:
</span><span class="prompt">... </span><span class="string">    1. Build dictionary of file names to file paths to gold std files and test file
</span><span class="prompt">... </span><span class="string">
</span><span class="prompt">... </span><span class="string">    2. For each file name, get associated "universe" values (all possible outcomes W)
</span><span class="prompt">... </span><span class="string">
</span><span class="prompt">... </span><span class="string">    3. For each file name, get goldstd histogram (G)
</span><span class="prompt">... </span><span class="string">
</span><span class="prompt">... </span><span class="string">    4. For each file name, get extractor's output (C)
</span><span class="prompt">... </span><span class="string">    '''</span>
<span class="prompt">... </span>    <span class="comment">#Step 1</span>
<span class="prompt">... </span>    filenames =  <span class="builtin">set</span>([re.sub((<span class="string">"\\"</span>+ goldfile_ext+<span class="string">"|"</span>+<span class="string">"\\"</span>+testfile_ext),<span class="string">""</span>,name)
<span class="prompt">... </span>                    <span class="keyword">for</span> name <span class="keyword">in</span> os.listdir(directory) ])
<span class="prompt">... </span>
<span class="prompt">... </span>    <span class="comment">#print("prep_data_for_measurements",filenames[0])</span>
<span class="prompt">... </span>
<span class="prompt">... </span>    golden_dict = { name:
<span class="prompt">... </span>                    {
<span class="prompt">... </span>                        <span class="string">'domain'</span>: os.path.split(os.path.split(directory)[<span class="number">0</span>])[<span class="number">1</span>],
<span class="prompt">... </span>                        <span class="string">'year'</span>: os.path.split(directory)[<span class="number">1</span>],
<span class="prompt">... </span>                        <span class="string">'goldpath'</span>:os.path.join(directory, name+goldfile_ext),
<span class="prompt">... </span>                        <span class="string">'testpath'</span>:os.path.join(directory, name+testfile_ext)
<span class="prompt">... </span>                    } <span class="keyword">for</span> name <span class="keyword">in</span> filenames }
<span class="prompt">... </span>    <span class="comment">#print(textfile_names)</span>
<span class="prompt">... </span>
<span class="prompt">... </span>
<span class="prompt">... </span>    <span class="keyword">for</span> key, val <span class="keyword">in</span> golden_dict.items():
<span class="prompt">... </span>        content = tokens_to_hist_extractor(extractor, os.path.abspath(val[<span class="string">'testpath'</span>]))
<span class="prompt">... </span>
<span class="prompt">... </span>        universe = tokens_to_hist_from_universe(os.path.abspath(val[<span class="string">'testpath'</span>]))
<span class="prompt">... </span>
<span class="prompt">... </span>        goldstd = tokens_to_hist_goldstd(os.path.abspath(val[<span class="string">'goldpath'</span>]))
<span class="prompt">... </span>
<span class="prompt">... </span>        val[<span class="string">'measurements'</span>] = calc_praf(goldstd,content,universe)
<span class="prompt">... </span>
<span class="prompt">... </span>    <span class="string">'''
</span><span class="prompt">... </span><span class="string">    #Step 2
</span><span class="prompt">... </span><span class="string">    for key, val in golden_dict.items():
</span><span class="prompt">... </span><span class="string">        #print()
</span><span class="prompt">... </span><span class="string">        print(val['testpath'])
</span><span class="prompt">... </span><span class="string">        val['W'] = tokens_to_hist_from_universe(os.path.abspath(val['testpath']))
</span><span class="prompt">... </span><span class="string">
</span><span class="prompt">... </span><span class="string">        #print(val['W'])
</span><span class="prompt">... </span><span class="string">
</span><span class="prompt">... </span><span class="string">    #Step 3
</span><span class="prompt">... </span><span class="string">    try:
</span><span class="prompt">... </span><span class="string">        for key, val in golden_dict.items():
</span><span class="prompt">... </span><span class="string">            val['G'] = tokens_to_hist_goldstd(os.path.abspath(val['goldpath']))
</span><span class="prompt">... </span><span class="string">    except Exception as e:
</span><span class="prompt">... </span><span class="string">        print(val['goldpath'])
</span><span class="prompt">... </span><span class="string">        raise
</span><span class="prompt">... </span><span class="string">
</span><span class="prompt">... </span><span class="string">    #Step 4
</span><span class="prompt">... </span><span class="string">    for key, val in golden_dict.items():
</span><span class="prompt">... </span><span class="string">        val['C'] = tokens_to_hist_extractor(extractor, os.path.abspath(val['testpath']))
</span><span class="prompt">... </span><span class="string">    '''</span>
<span class="prompt">... </span>    <span class="keyword">return</span> golden_dict
<span class="prompt">... </span>
<span class="prompt">... </span>
<span class="prompt">... </span><span class="keyword">def</span> get_measurements(prep_data):
</span><span class="command-defs"><span class="command"><span class="prompt">... </span>    <span class="keyword">for</span> key, val <span class="keyword">in</span> prep_data.items():
<span class="prompt">... </span>        val[<span class="string">'measurements'</span>] = calc_praf(val[<span class="string">'G'</span>],val[<span class="string">'C'</span>],val[<span class="string">'W'</span>])
<span class="prompt">... </span>
<span class="prompt">... </span>
</span></span><span class="command"><span class="prompt">... </span><span class="keyword">def</span> listsubdir(directory):
</span><span class="command-defs"><span class="command"><span class="prompt">... </span>    <span class="keyword">return</span> [os.path.join(d, f) <span class="keyword">for</span> d <span class="keyword">in</span> directory <span class="keyword">for</span> f <span class="keyword">in</span> os.listdir(d)
<span class="prompt">... </span>            <span class="keyword">if</span> os.path.isdir(os.path.join(d, f))]</span></span><span class="command">
</span></span><span class="fold-message">[About 174 more lines. Double-click to unfold]
</span><span class="commandsep"></span><span class="command"><span class="prompt">&gt;&gt;&gt; </span><span class="keyword">import</span> eatiht
<span class="prompt">... </span>dataset_path = [<span class="string">'C:/crawlToTheFuture/crawl-to-the-future/dataset/'</span>]
<span class="prompt">... </span>
<span class="prompt">... </span>folders = listsubdir(listsubdir(dataset_path))
<span class="prompt">... </span>
<span class="prompt">... </span>exhaustive_test = []
<span class="prompt">... </span><span class="keyword">for</span> folder <span class="keyword">in</span> folders:
<span class="prompt">... </span>    domainpath,year =  os.path.split(folder)
<span class="prompt">... </span>    domain = os.path.split(domainpath)[<span class="number">1</span>]
<span class="prompt">... </span>    prep_data = prep_data_for_measurements(os.path.abspath(folder),<span class="keyword">lambda</span> x: eatiht.extract(x))
<span class="prompt">... </span>    <span class="comment">#get_measurements(prep_data)</span>
<span class="prompt">... </span>    exhaustive_test.append(prep_data)
</span><span class="commandsep"></span><span class="output"><span class="stdout">C:\crawlToTheFuture\crawl-to-the-future\dataset\entertainment.msn.com\2000\20001110075800_www_entertainment_msn_com_tv_gist_fri02_asp.html
</span><span class="exception">Traceback (most recent call last):
  File "&lt;pyshell#3&gt;", line 10, in &lt;module&gt;
    prep_data = prep_data_for_measurements(os.path.abspath(folder),lambda x: eatiht.extract(x))
  File "&lt;pyshell#2&gt;", line 136, in prep_data_for_measurements
    content = tokens_to_hist_extractor(extractor, os.path.abspath(val['testpath']))
  File "&lt;pyshell#2&gt;", line 60, in tokens_to_hist_extractor
    content = extract(data_filepath).read()
AttributeError: 'unicode' object has no attribute 'read'
</span></span><span class="command"><span class="prompt">&gt;&gt;&gt; </span>o = <span class="builtin">open</span>( <span class="string">'C:\\crawlToTheFuture\\crawl-to-the-future\\dataset\\www.foxnews.com\\2010\\Slovak Man Takes Hidden Explosive on Dublin Flight - International News   News of the World   Middle East News   Europe News - FOXNews.com.txt'</span>,<span class="string">'r'</span>)
</span><span class="commandsep"></span><span class="output"><span class="exception">Traceback (most recent call last):
  File "&lt;pyshell#4&gt;", line 1, in &lt;module&gt;
    o = open( 'C:\\crawlToTheFuture\\crawl-to-the-future\\dataset\\www.foxnews.com\\2010\\Slovak Man Takes Hidden Explosive on Dublin Flight - International News   News of the World   Middle East News   Europe News - FOXNews.com.txt','r')
IOError: [Errno 2] No such file or directory: 'C:\\crawlToTheFuture\\crawl-to-the-future\\dataset\\www.foxnews.com\\2010\\Slovak Man Takes Hidden Explosive on Dublin Flight - International News   News of the World   Middle East News   Europe News - FOXNews.com.txt'
</span></span><span class="command"><span class="prompt">&gt;&gt;&gt; </span><span class="keyword">import</span> re <span class="comment">#for tokenizing</span>
<span class="prompt">... </span><span class="keyword">import</span> collections <span class="comment">#for multiset/histogram</span>
<span class="prompt">... </span><span class="keyword">import</span> os
<span class="prompt">... </span><span class="keyword">try</span>:
<span class="prompt">... </span>    <span class="keyword">from</span> StringIO <span class="keyword">import</span> StringIO
<span class="prompt">... </span><span class="keyword">except</span> <span class="builtin">ImportError</span>:
<span class="prompt">... </span>    <span class="keyword">from</span> io <span class="keyword">import</span> StringIO
<span class="prompt">... </span>
<span class="prompt">... </span><span class="keyword">import</span> lxml.html
<span class="prompt">... </span>
<span class="prompt">... </span><span class="keyword">try</span>:
<span class="prompt">... </span>    <span class="builtin">range</span> = <span class="builtin">xrange</span>
<span class="prompt">... </span><span class="keyword">except</span>:
<span class="prompt">... </span>    <span class="keyword">pass</span>
<span class="prompt">... </span>
<span class="prompt">... </span><span class="keyword">def</span> histsum(hist): <span class="keyword">return</span> <span class="builtin">sum</span>(hist.values())
<span class="prompt">... </span>
<span class="prompt">... </span>
<span class="prompt">... </span><span class="comment">#get every non-html word on page (ie. "//text()") as f-distribution</span>
<span class="prompt">... </span><span class="keyword">def</span> tokens_to_hist_from_universe(data_filepath):
<span class="prompt">... </span>
<span class="prompt">... </span>    <span class="keyword">with</span> <span class="builtin">open</span>(data_filepath,<span class="string">'r'</span>) <span class="keyword">as</span> data_file:
<span class="prompt">... </span>
<span class="prompt">... </span>        <span class="keyword">try</span>:
<span class="prompt">... </span>            parsed_goldhtml = lxml.html.parse(data_file,
<span class="prompt">... </span>                            lxml.html.HTMLParser(encoding=<span class="string">"utf-8"</span>))
<span class="prompt">... </span>        <span class="keyword">except</span>:
<span class="prompt">... </span>            <span class="keyword">print</span>(<span class="builtin">str</span>(data_file.read()))
<span class="prompt">... </span>        tokenized_content = collections.Counter()
<span class="prompt">... </span>
<span class="prompt">... </span>        content = <span class="string">""</span>.join(parsed_goldhtml.xpath(<span class="string">'//text()'</span>))
<span class="prompt">... </span>
<span class="prompt">... </span>        tokenized_content.update(re.split(<span class="string">r'\W+'</span>, content))
<span class="prompt">... </span>
<span class="prompt">... </span>    <span class="keyword">return</span> tokenized_content
<span class="prompt">... </span>
<span class="prompt">... </span>
<span class="prompt">... </span><span class="comment">#get every word from gold std. as f-distribution</span>
<span class="prompt">... </span><span class="keyword">def</span> tokens_to_hist_goldstd(test_filepath):
</span><span class="command-defs"><span class="command"><span class="prompt">... </span>    <span class="keyword">if</span> <span class="keyword">not</span> os.path.exists(test_filepath):
<span class="prompt">... </span>        test_filepath += <span class="string">'.txt'</span>
<span class="prompt">... </span>    <span class="keyword">with</span> <span class="builtin">open</span>(os.path.abspath(test_filepath), <span class="string">'r'</span>) <span class="keyword">as</span> f:
<span class="prompt">... </span>
<span class="prompt">... </span>        <span class="comment">#print("test_filepath",os.path.abspath(test_filepath))</span>
<span class="prompt">... </span>        content = <span class="builtin">str</span>(f.read())
<span class="prompt">... </span>
<span class="prompt">... </span>        tokenized_content = collections.Counter()
<span class="prompt">... </span>
<span class="prompt">... </span>        tokenized_content.update(re.split(<span class="string">r'\W+'</span>, content))
<span class="prompt">... </span>
<span class="prompt">... </span>        <span class="keyword">return</span> tokenized_content
<span class="prompt">... </span>
<span class="prompt">... </span>
<span class="prompt">... </span><span class="comment">#get every extracted (predicted) word as f-distribution</span>
</span></span><span class="command"><span class="prompt">... </span><span class="keyword">def</span> tokens_to_hist_extractor(extract, data_filepath):
<span class="prompt">... </span>    
<span class="prompt">... </span>    <span class="keyword">try</span>:
<span class="prompt">... </span>        content = extract(data_filepath)
<span class="prompt">... </span>    <span class="keyword">except</span> <span class="builtin">Exception</span>:
<span class="prompt">... </span>        <span class="keyword">print</span>(data_filepath)
<span class="prompt">... </span>        <span class="keyword">raise</span>
<span class="prompt">... </span>        <span class="comment">#raise Exception("\"exception\" method needs to be implemented")</span>
<span class="prompt">... </span>
<span class="prompt">... </span>    tokenized_content = collections.Counter()
<span class="prompt">... </span>    <span class="keyword">try</span>:
<span class="prompt">... </span>        tokenized_content.update(re.split(<span class="string">r'\W+'</span>, content))
<span class="prompt">... </span>    <span class="keyword">except</span>:
<span class="prompt">... </span>        <span class="keyword">print</span>(content)
<span class="prompt">... </span>    <span class="keyword">return</span> tokenized_content
<span class="prompt">... </span>
<span class="prompt">... </span>
<span class="prompt">... </span><span class="keyword">def</span> calc_praf(goldstd,predicted,universe):
<span class="prompt">... </span>
<span class="prompt">... </span>    TP = predicted &amp; goldstd
<span class="prompt">... </span>
<span class="prompt">... </span>    FP = predicted - goldstd
<span class="prompt">... </span>
<span class="prompt">... </span>    FN = (universe - predicted) &amp; goldstd
<span class="prompt">... </span>
<span class="prompt">... </span>    TN = (universe - predicted) &amp; (universe - goldstd)
<span class="prompt">... </span>
<span class="prompt">... </span>    precision = (histsum(TP)*<span class="number">1.0</span>)/histsum(TP+FP)
<span class="prompt">... </span>
<span class="prompt">... </span>    recall = (histsum(TP)*<span class="number">1.0</span>)/histsum(TP+FN)
<span class="prompt">... </span>
<span class="prompt">... </span>    accuracy = (histsum(TP+TN)*<span class="number">1.0</span>)/histsum(TP+FP+FN+TN)
<span class="prompt">... </span>    <span class="keyword">try</span>:
<span class="prompt">... </span>        f1 = <span class="number">2</span> * (((precision*recall)*<span class="number">1.0</span>)/(precision+recall))
<span class="prompt">... </span>    <span class="keyword">except</span> <span class="builtin">ZeroDivisionError</span>:
<span class="prompt">... </span>        f1 = <span class="number">0</span>
<span class="prompt">... </span>        <span class="comment">#print(precision,recall, accuracy)</span>
<span class="prompt">... </span>        <span class="comment">#raise</span>
<span class="prompt">... </span>    <span class="keyword">return</span> {<span class="string">'p'</span>:precision,<span class="string">'r'</span>:recall,<span class="string">'a'</span>:accuracy,<span class="string">'f1'</span>:f1}
<span class="prompt">... </span>
<span class="prompt">... </span>
<span class="prompt">... </span><span class="keyword">def</span> prep_data_for_measurements(directory, extractor,
<span class="prompt">... </span>                        goldfile_ext=<span class="string">'.txt'</span>,
<span class="prompt">... </span>                        testfile_ext=<span class="string">'.html'</span>,
<span class="prompt">... </span>                        pickle_output_name = <span class="builtin">None</span>):
<span class="prompt">... </span>    <span class="string">'''Given a directory, process the files (gold standard) in the following
</span><span class="prompt">... </span><span class="string">        steps:
</span><span class="prompt">... </span><span class="string">    1. Build dictionary of file names to file paths to gold std files and test file
</span><span class="prompt">... </span><span class="string">
</span><span class="prompt">... </span><span class="string">    2. For each file name, get associated "universe" values (all possible outcomes W)
</span><span class="prompt">... </span><span class="string">
</span><span class="prompt">... </span><span class="string">    3. For each file name, get goldstd histogram (G)
</span><span class="prompt">... </span><span class="string">
</span><span class="prompt">... </span><span class="string">    4. For each file name, get extractor's output (C)
</span><span class="prompt">... </span><span class="string">    '''</span>
<span class="prompt">... </span>    <span class="comment">#Step 1</span>
<span class="prompt">... </span>    filenames =  <span class="builtin">set</span>([re.sub((<span class="string">"\\"</span>+ goldfile_ext+<span class="string">"|"</span>+<span class="string">"\\"</span>+testfile_ext),<span class="string">""</span>,name)
<span class="prompt">... </span>                    <span class="keyword">for</span> name <span class="keyword">in</span> os.listdir(directory) ])
<span class="prompt">... </span>
<span class="prompt">... </span>    <span class="comment">#print("prep_data_for_measurements",filenames[0])</span>
<span class="prompt">... </span>
<span class="prompt">... </span>    golden_dict = { name:
<span class="prompt">... </span>                    {
<span class="prompt">... </span>                        <span class="string">'domain'</span>: os.path.split(os.path.split(directory)[<span class="number">0</span>])[<span class="number">1</span>],
<span class="prompt">... </span>                        <span class="string">'year'</span>: os.path.split(directory)[<span class="number">1</span>],
<span class="prompt">... </span>                        <span class="string">'goldpath'</span>:os.path.join(directory, name+goldfile_ext),
<span class="prompt">... </span>                        <span class="string">'testpath'</span>:os.path.join(directory, name+testfile_ext)
<span class="prompt">... </span>                    } <span class="keyword">for</span> name <span class="keyword">in</span> filenames }
<span class="prompt">... </span>    <span class="comment">#print(textfile_names)</span>
<span class="prompt">... </span>
<span class="prompt">... </span>
<span class="prompt">... </span>    <span class="keyword">for</span> key, val <span class="keyword">in</span> golden_dict.items():
<span class="prompt">... </span>        content = tokens_to_hist_extractor(extractor, os.path.abspath(val[<span class="string">'testpath'</span>]))
<span class="prompt">... </span>
<span class="prompt">... </span>        universe = tokens_to_hist_from_universe(os.path.abspath(val[<span class="string">'testpath'</span>]))
<span class="prompt">... </span>
<span class="prompt">... </span>        goldstd = tokens_to_hist_goldstd(os.path.abspath(val[<span class="string">'goldpath'</span>]))
<span class="prompt">... </span>
<span class="prompt">... </span>        val[<span class="string">'measurements'</span>] = calc_praf(goldstd,content,universe)
<span class="prompt">... </span>
<span class="prompt">... </span>    <span class="string">'''
</span><span class="prompt">... </span><span class="string">    #Step 2
</span><span class="prompt">... </span><span class="string">    for key, val in golden_dict.items():
</span><span class="prompt">... </span><span class="string">        #print()
</span><span class="prompt">... </span><span class="string">        print(val['testpath'])
</span><span class="prompt">... </span><span class="string">        val['W'] = tokens_to_hist_from_universe(os.path.abspath(val['testpath']))
</span><span class="prompt">... </span><span class="string">
</span><span class="prompt">... </span><span class="string">        #print(val['W'])
</span><span class="prompt">... </span><span class="string">
</span><span class="prompt">... </span><span class="string">    #Step 3
</span><span class="prompt">... </span><span class="string">    try:
</span><span class="prompt">... </span><span class="string">        for key, val in golden_dict.items():
</span><span class="prompt">... </span><span class="string">            val['G'] = tokens_to_hist_goldstd(os.path.abspath(val['goldpath']))
</span><span class="prompt">... </span><span class="string">    except Exception as e:
</span><span class="prompt">... </span><span class="string">        print(val['goldpath'])
</span><span class="prompt">... </span><span class="string">        raise
</span><span class="prompt">... </span><span class="string">
</span><span class="prompt">... </span><span class="string">    #Step 4
</span><span class="prompt">... </span><span class="string">    for key, val in golden_dict.items():
</span><span class="prompt">... </span><span class="string">        val['C'] = tokens_to_hist_extractor(extractor, os.path.abspath(val['testpath']))
</span><span class="prompt">... </span><span class="string">    '''</span>
<span class="prompt">... </span>    <span class="keyword">return</span> golden_dict
<span class="prompt">... </span>
<span class="prompt">... </span>
<span class="prompt">... </span><span class="keyword">def</span> get_measurements(prep_data):
</span><span class="command-defs"><span class="command"><span class="prompt">... </span>    <span class="keyword">for</span> key, val <span class="keyword">in</span> prep_data.items():
<span class="prompt">... </span>        val[<span class="string">'measurements'</span>] = calc_praf(val[<span class="string">'G'</span>],val[<span class="string">'C'</span>],val[<span class="string">'W'</span>])
<span class="prompt">... </span>
<span class="prompt">... </span>
</span></span><span class="command"><span class="prompt">... </span><span class="keyword">def</span> listsubdir(directory):
</span><span class="command-defs"><span class="command"><span class="prompt">... </span>    <span class="keyword">return</span> [os.path.join(d, f) <span class="keyword">for</span> d <span class="keyword">in</span> directory <span class="keyword">for</span> f <span class="keyword">in</span> os.listdir(d)
<span class="prompt">... </span>            <span class="keyword">if</span> os.path.isdir(os.path.join(d, f))]</span></span><span class="command">
</span><span class="commandsep"></span><span class="command"><span class="prompt">&gt;&gt;&gt; </span><span class="keyword">import</span> eatiht
<span class="prompt">... </span>dataset_path = [<span class="string">'C:/crawlToTheFuture/crawl-to-the-future/dataset/'</span>]
<span class="prompt">... </span>
<span class="prompt">... </span>folders = listsubdir(listsubdir(dataset_path))
<span class="prompt">... </span>
<span class="prompt">... </span>exhaustive_test = []
<span class="prompt">... </span><span class="keyword">for</span> folder <span class="keyword">in</span> folders:
<span class="prompt">... </span>    domainpath,year =  os.path.split(folder)
<span class="prompt">... </span>    domain = os.path.split(domainpath)[<span class="number">1</span>]
<span class="prompt">... </span>    prep_data = prep_data_for_measurements(os.path.abspath(folder),<span class="keyword">lambda</span> x: eatiht.extract(x))
<span class="prompt">... </span>    <span class="comment">#get_measurements(prep_data)</span>
<span class="prompt">... </span>    exhaustive_test.append(prep_data)
</span><span class="commandsep"></span><span class="command"><span class="prompt">&gt;&gt;&gt; </span><span class="builtin">len</span>(exhaustive_test)
</span><span class="commandsep"></span><span class="output"><span class="result-ind">0: </span><span class="result">40
</span></span><span class="command"><span class="prompt">&gt;&gt;&gt; </span><span class="keyword">import</span> pickle
</span><span class="commandsep"></span><span class="command"><span class="prompt">&gt;&gt;&gt; </span>pickle.dump(exhaustive_test,<span class="builtin">open</span>(<span class="string">'c:/crawlToTheFuture/crawl-to-the-future/testing/eatiht_results.pkl'</span>,<span class="string">'wb'</span>))
</span><span class="commandsep"></span><span class="command"><span class="prompt">&gt;&gt;&gt; </span><span class="keyword">def</span> trim_results(domain_path):
</span><span class="command-defs"><span class="command"><span class="prompt">... </span>    domain_results = pickle.load(<span class="builtin">open</span>(domain_path))
<span class="prompt">... </span>    part = {<span class="builtin">str</span>(val[<span class="string">'domain'</span>]+<span class="string">';'</span>+val[<span class="string">'year'</span>]):[] <span class="keyword">for</span> domainyear <span class="keyword">in</span> domain_results <span class="keyword">for</span> key,val, <span class="keyword">in</span> domainyear.items()}
<span class="prompt">... </span>    
<span class="prompt">... </span>    <span class="keyword">for</span> domainyear <span class="keyword">in</span> domain_results:
<span class="prompt">... </span>        <span class="keyword">for</span> key,val <span class="keyword">in</span> domainyear.items():
<span class="prompt">... </span>            part[<span class="builtin">str</span>(val[<span class="string">'domain'</span>]+<span class="string">";"</span>+val[<span class="string">'year'</span>])].append(val[<span class="string">'measurements'</span>])
<span class="prompt">... </span>    
<span class="prompt">... </span>    domain_path = os.path.join(*(os.path.split(domain_path)[:-<span class="number">1</span>]))
<span class="prompt">... </span>    
<span class="prompt">... </span>    trimmed_path = os.path.join(domain_path,<span class="string">'trimmed.pkl'</span>)
<span class="prompt">... </span>    <span class="comment">#print(trimmed_path)</span>
<span class="prompt">... </span>    pickle.dump(part,<span class="builtin">open</span>(trimmed_path,<span class="string">'wb'</span>))
<span class="prompt">... </span>    
<span class="prompt">... </span>    <span class="keyword">return</span> part</span></span><span class="command">
</span><span class="commandsep"></span><span class="command"><span class="prompt">&gt;&gt;&gt; </span><span class="keyword">import</span> os
</span><span class="commandsep"></span><span class="command"><span class="prompt">&gt;&gt;&gt; </span>eatiht_result_path = <span class="string">'c:/crawlToTheFuture/crawl-to-the-future/testing/eatiht_results.pkl'</span>
</span><span class="commandsep"></span><span class="command"><span class="prompt">&gt;&gt;&gt; </span>trimmed_eatiht_results = trim_results(eatiht_result_path)
</span><span class="commandsep"></span><span class="command"><span class="prompt">&gt;&gt;&gt; </span>trimmed_eatiht_results
</span><span class="commandsep"></span><span class="output"><span class="result-ind">1: </span><span class="result">{'entertainment.msn.com;2000': [{'a': 0.9653679653679653,</span></span><span class="folded"><span class="output"><span class="result">
                                 'f1': 0.8963730569948186,
                                 'p': 0.9942528735632183,
                                 'r': 0.8160377358490566},
                                {'a': 0.8446389496717724,
                                 'f1': 0.690856313497823,
                                 'p': 0.5734939759036145,
                                 'r': 0.8686131386861314},
                                {'a': 0.7493319080705505,
                                 'f1': 0.6879574184963406,
                                 'p': 0.5318930041152263,
                                 'r': 0.9736346516007532},
                                {'a': 0.8514548238897397,
                                 'f1': 0.6978193146417446,
                                 'p': 0.56,
                                 'r': 0.9256198347107438},
                                {'a': 0.9294512877939529,
                                 'f1': 0.8355091383812011,
                                 'p': 0.9937888198757764,
                                 'r': 0.7207207207207207},
                                {'a': 0.9630793401413983,
                                 'f1': 0.9202037351443124,
                                 'p': 0.9963235294117647,
                                 'r': 0.8548895899053628},
                                {'a': 0.7522779043280182,
                                 'f1': 0.707464694014795,
                                 'p': 0.5595744680851064,
                                 'r': 0.9616087751371115},
                                {'a': 0.9001677852348994,
                                 'f1': 0.7624750499001995,
                                 'p': 0.6608996539792388,
                                 'r': 0.9009433962264151},
                                {'a': 0.9859055673009162,
                                 'f1': 0.981060606060606,
                                 'p': 1.0,
                                 'r': 0.9628252788104089},
                                {'a': 0.8475836431226765,
                                 'f1': 0.03529411764705883,
                                 'p': 0.2,
                                 'r': 0.01935483870967742},
                                {'a': 0.8812095032397408,
                                 'f1': 0.8290155440414507,
                                 'p': 0.9975062344139651,
                                 'r': 0.7092198581560284},
                                {'a': 0.974561403508772,
                                 'f1': 0.9500860585197934,
                                 'p': 1.0,
                                 'r': 0.9049180327868852},
                                {'a': 0.940563086548488,
                                 'f1': 0.9389067524115756,
                                 'p': 1.0,
                                 'r': 0.8848484848484849},
                                {'a': 0.98001998001998,
                                 'f1': 0.8039215686274509,
                                 'p': 1.0,
                                 'r': 0.6721311475409836},
                                {'a': 0.9539078156312625,
                                 'f1': 0.9159561510353229,
                                 'p': 1.0,
                                 'r': 0.8449438202247191},
                                {'a': 0.7892995035852178,
                                 'f1': 0.6476014760147601,
                                 'p': 0.6512059369202227,
                                 'r': 0.6440366972477064},
                                {'a': 0.9526584122359796,
                                 'f1': 0.8976377952755905,
                                 'p': 1.0,
                                 'r': 0.8142857142857143},
                                {'a': 0.983065198983912,
                                 'f1': 0.9676375404530744,
                                 'p': 1.0,
                                 'r': 0.9373040752351097},
                                {'a': 0.9754322111010009,
                                 'f1': 0.9379310344827586,
                                 'p': 1.0,
                                 'r': 0.8831168831168831},
                                {'a': 0.8146106133700896,
                                 'f1': 0.6824085005903188,
                                 'p': 0.5422138836772983,
                                 'r': 0.9203821656050956},
                                {'a': 0.8056840713813616,
                                 'f1': 0.7398230088495574,
                                 'p': 0.6057971014492753,
                                 'r': 0.95},
                                {'a': 0.7571679344645992,
                                 'f1': 0.7042052744119743,
                                 'p': 0.5531914893617021,
                                 'r': 0.9686274509803922},
                                {'a': 0.7959322033898305,
                                 'f1': 0.6223337515683814,
                                 'p': 0.5904761904761905,
                                 'r': 0.6578249336870027},
                                {'a': 0.9407185628742515,
                                 'f1': 0.9127753303964757,
                                 'p': 1.0,
                                 'r': 0.839546191247974},
                                {'a': 0.6215717907351924,
                                 'f1': 0.6757503949447077,
                                 'p': 0.5141225961538461,
                                 'r': 0.9855990783410138}],
 'entertainment.msn.com;2005': [{'a': 0.9617365710080942,
                                 'f1': 0.9469387755102041,
                                 'p': 1.0,
                                 'r': 0.8992248062015504},
                                {'a': 0.9694947569113441,
                                 'f1': 0.7974683544303798,
                                 'p': 1.0,
                                 'r': 0.6631578947368421},
                                {'a': 0.8016472203157172,
                                 'f1': 0.4344422700587084,
                                 'p': 0.32456140350877194,
                                 'r': 0.6568047337278107},
                                {'a': 0.9694960212201591,
                                 'f1': 0.9388297872340425,
                                 'p': 0.9805555555555555,
                                 'r': 0.9005102040816326},
                                {'a': 0.9517045454545454,
                                 'f1': 0.9351145038167938,
                                 'p': 1.0,
                                 'r': 0.8781362007168458},
                                {'a': 0.8909451421017845,
                                 'f1': 0.7730398899587345,
                                 'p': 1.0,
                                 'r': 0.6300448430493274},
                                {'a': 0.9576023391812866,
                                 'f1': 0.9273182957393484,
                                 'p': 0.9788359788359788,
                                 'r': 0.8809523809523809},
                                {'a': 0.7721345229924502,
                                 'f1': 0.6235827664399093,
                                 'p': 1.0,
                                 'r': 0.45304777594728174},
                                {'a': 0.9608785175017158,
                                 'f1': 0.925684485006519,
                                 'p': 0.9943977591036415,
                                 'r': 0.8658536585365854},
                                {'a': 0.9618296529968454,
                                 'f1': 0.970335866633979,
                                 'p': 1.0,
                                 'r': 0.9423809523809524},
                                {'a': 0.9674546077423776,
                                 'f1': 0.9737641535487435,
                                 'p': 0.9943598420755781,
                                 'r': 0.954004329004329},
                                {'a': 0.8971654581410679,
                                 'f1': 0.8239277652370203,
                                 'p': 1.0,
                                 'r': 0.7005758157389635},
                                {'a': 0.9307207837648706,
                                 'f1': 0.8893854748603351,
                                 'p': 0.995,
                                 'r': 0.804040404040404},
                                {'a': 0.9626168224299065,
                                 'f1': 0.9627659574468084,
                                 'p': 0.9981617647058824,
                                 'r': 0.9297945205479452},
                                {'a': 0.9669172932330827,
                                 'f1': 0.9094650205761318,
                                 'p': 0.9954954954954955,
                                 'r': 0.8371212121212122},
                                {'a': 0.9621212121212122,
                                 'f1': 0.8473282442748091,
                                 'p': 1.0,
                                 'r': 0.7350993377483444},
                                {'a': 0.7639846743295019,
                                 'f1': 0.5095541401273885,
                                 'p': 1.0,
                                 'r': 0.3418803418803419},
                                {'a': 0.86530931871574,
                                 'f1': 0.5742574257425742,
                                 'p': 0.46774193548387094,
                                 'r': 0.7435897435897436},
                                {'a': 0.9640816326530612,
                                 'f1': 0.9351032448377581,
                                 'p': 0.9937304075235109,
                                 'r': 0.883008356545961},
                                {'a': 0.9625095638867636,
                                 'f1': 0.9420118343195266,
                                 'p': 0.995,
                                 'r': 0.8943820224719101},
                                {'a': 0.9574944071588367,
                                 'f1': 0.8277945619335347,
                                 'p': 0.9856115107913669,
                                 'r': 0.7135416666666666},
                                {'a': 0.8892935178441369,
                                 'f1': 0.7466666666666666,
                                 'p': 0.9955555555555555,
                                 'r': 0.5973333333333334},
                                {'a': 0.949607329842932,
                                 'f1': 0.8901569186875893,
                                 'p': 1.0,
                                 'r': 0.8020565552699229},
                                {'a': 0.8320655354008192,
                                 'f1': 0.733519034354689,
                                 'p': 1.0,
                                 'r': 0.5791788856304986},
                                {'a': 0.9651851851851851,
                                 'f1': 0.9423312883435583,
                                 'p': 0.9846153846153847,
                                 'r': 0.9035294117647059},
                                {'a': 0.8734270910436713,
                                 'f1': 0.5488126649076517,
                                 'p': 0.4482758620689655,
                                 'r': 0.7074829931972789},
                                {'a': 0.779291553133515,
                                 'f1': 0.5410764872521246,
                                 'p': 0.9947916666666666,
                                 'r': 0.3715953307392996}],
 'entertainment.msn.com;2010': [{'a': 0.962877030162413,
                                 'f1': 0.7128205128205127,
                                 'p': 1.0,
                                 'r': 0.5537848605577689},
                                {'a': 0.8920863309352518,
                                 'f1': 0.6857142857142856,
                                 'p': 1.0,
                                 'r': 0.5217391304347826},
                                {'a': 0.9415900486749594,
                                 'f1': 0.8802660753880266,
                                 'p': 1.0,
                                 'r': 0.7861386138613862},
                                {'a': 0.9568552253116012,
                                 'f1': 0.9284578696343402,
                                 'p': 0.9711751662971175,
                                 'r': 0.8893401015228426},
                                {'a': 0.9741287149882403,
                                 'f1': 0.9225847728726807,
                                 'p': 0.9730094466936572,
                                 'r': 0.8771289537712895},
                                {'a': 0.9347558473533032,
                                 'f1': 0.6258823529411764,
                                 'p': 1.0,
                                 'r': 0.4554794520547945},
                                {'a': 0.9754727579105037,
                                 'f1': 0.8027108433734939,
                                 'p': 1.0,
                                 'r': 0.670440251572327},
                                {'a': 0.9019248395967002,
                                 'f1': 0.788118811881188,
                                 'p': 0.9875930521091811,
                                 'r': 0.6556836902800659},
                                {'a': 0.7744386873920552,
                                 'f1': 0.05772005772005772,
                                 'p': 1.0,
                                 'r': 0.029717682020802376},
                                {'a': 0.952247191011236,
                                 'f1': 0.9058171745152355,
                                 'p': 0.96602658788774,
                                 'r': 0.8526727509778357},
                                {'a': 0.8889384478144514,
                                 'f1': 0.7836663770634231,
                                 'p': 1.0,
                                 'r': 0.6442857142857142},
                                {'a': 0.9362776025236593,
                                 'f1': 0.6405693950177936,
                                 'p': 1.0,
                                 'r': 0.4712041884816754},
                                {'a': 0.9648177762814578,
                                 'f1': 0.8383604021655066,
                                 'p': 1.0,
                                 'r': 0.7217043941411452},
                                {'a': 0.9191176470588235,
                                 'f1': 0.6822558459422283,
                                 'p': 1.0,
                                 'r': 0.5177453027139874},
                                {'a': 0.8315171835708298,
                                 'f1': 0.733774834437086,
                                 'p': 0.6259887005649718,
                                 'r': 0.8864},
                                {'a': 0.8737066342057213,
                                 'f1': 0.6146703806870938,
                                 'p': 1.0,
                                 'r': 0.4436997319034853},
                                {'a': 0.9081661486295564,
                                 'f1': 0.904998538439053,
                                 'p': 1.0,
                                 'r': 0.8264815803523758},
                                {'a': 0.9688904744916161,
                                 'f1': 0.8046594982078853,
                                 'p': 0.9988876529477196,
                                 'r': 0.673668417104276},
                                {'a': 0.8338076266363119,
                                 'f1': 0.6010928961748634,
                                 'p': 0.4772234273318872,
                                 'r': 0.8118081180811808},
                                {'a': 0.9321212121212121,
                                 'f1': 0.8910505836575876,
                                 'p': 0.9927745664739884,
                                 'r': 0.808235294117647},
                                {'a': 0.7159155733029093,
                                 'f1': 0.6145510835913313,
                                 'p': 0.9851116625310173,
                                 'r': 0.4465691788526434},
                                {'a': 0.936189889025894,
                                 'f1': 0.8635464733025708,
                                 'p': 1.0,
                                 'r': 0.759860788863109},
                                {'a': 0.9092642012962256,
                                 'f1': 0.8700873362445415,
                                 'p': 1.0,
                                 'r': 0.770048309178744},
                                {'a': 0.942769665567593,
                                 'f1': 0.8203991130820398,
                                 'p': 1.0,
                                 'r': 0.6954887218045113},
                                {'a': 0.9370768618080446,
                                 'f1': 0.8952254641909814,
                                 'p': 1.0,
                                 'r': 0.8103241296518607}],
 'entertainment.msn.com;2015': [{'a': 0.969799604854643,
                                 'f1': 0.8514576584914392,
                                 'p': 0.9935205183585313,
                                 'r': 0.7449392712550608},
                                {'a': 0.9828047775947282,
                                 'f1': 0.7023172905525846,
                                 'p': 0.7035714285714286,
                                 'r': 0.701067615658363},
                                {'a': 0.9339667914387177,
                                 'f1': 0.6232201533406353,
                                 'p': 0.4875749785775493,
                                 'r': 0.8634294385432474},
                                {'a': 0.9893956553073201,
                                 'f1': 0.7858627858627859,
                                 'p': 0.9086538461538461,
                                 'r': 0.6923076923076923},
                                {'a': 0.9889649535097579,
                                 'f1': 0.7898832684824902,
                                 'p': 0.9806763285024155,
                                 'r': 0.6612377850162866},
                                {'a': 0.9897106764466178,
                                 'f1': 0.8053949903660887,
                                 'p': 0.9766355140186916,
                                 'r': 0.6852459016393443},
                                {'a': 0.9581360578121106,
                                 'f1': 0.7212389380530972,
                                 'p': 0.8170426065162907,
                                 'r': 0.6455445544554456},
                                {'a': 0.9924664602683179,
                                 'f1': 0.8073878627968337,
                                 'p': 0.9745222929936306,
                                 'r': 0.6891891891891891},
                                {'a': 0.9873211026798578,
                                 'f1': 0.817174515235457,
                                 'p': 0.9800664451827242,
                                 'r': 0.7007125890736342},
                                {'a': 0.9909607962624416,
                                 'f1': 0.806941431670282,
                                 'p': 0.96875,
                                 'r': 0.6914498141263941},
                                {'a': 0.9841893535410234,
                                 'f1': 0.7532846715328467,
                                 'p': 0.945054945054945,
                                 'r': 0.6262135922330098},
                                {'a': 0.9789324420135723,
                                 'f1': 0.7373737373737373,
                                 'p': 0.7745358090185677,
                                 'r': 0.7036144578313253},
                                {'a': 0.9813925570228091,
                                 'f1': 0.825187969924812,
                                 'p': 0.9481641468682506,
                                 'r': 0.7304492512479202},
                                {'a': 0.9859373484628067,
                                 'f1': 0.8027210884353742,
                                 'p': 0.9899328859060402,
                                 'r': 0.6750572082379863},
                                {'a': 0.9856149376012194,
                                 'f1': 0.6343825665859565,
                                 'p': 0.6150234741784038,
                                 'r': 0.655},
                                {'a': 0.9724455687053934,
                                 'f1': 0.7978793903247183,
                                 'p': 0.9950413223140496,
                                 'r': 0.665929203539823},
                                {'a': 0.9839442273159396,
                                 'f1': 0.14606741573033707,
                                 'p': 0.24074074074074073,
                                 'r': 0.10483870967741936},
                                {'a': 0.9750507099391481,
                                 'f1': 0.7717996289424861,
                                 'p': 0.7482014388489209,
                                 'r': 0.7969348659003831},
                                {'a': 0.9873611643048641,
                                 'f1': 0.7981651376146789,
                                 'p': 0.9775280898876404,
                                 'r': 0.6744186046511628},
                                {'a': 0.9745578112747234,
                                 'f1': 0.7943661971830985,
                                 'p': 0.9947089947089947,
                                 'r': 0.6611957796014069},
                                {'a': 0.9651007903383358,
                                 'f1': 0.8556738890929122,
                                 'p': 0.997431506849315,
                                 'r': 0.7491961414790996},
                                {'a': 0.9810874704491725,
                                 'f1': 0.8296422487223168,
                                 'p': 0.9918533604887984,
                                 'r': 0.7130307467057101},
                                {'a': 0.991516762060507,
                                 'f1': 0.764872521246459,
                                 'p': 0.9642857142857143,
                                 'r': 0.6338028169014085},
                                {'a': 0.9911785824187096,
                                 'f1': 0.7556818181818182,
                                 'p': 0.9708029197080292,
                                 'r': 0.6186046511627907},
                                {'a': 0.9792491982644784,
                                 'f1': 0.8294573643410853,
                                 'p': 0.9925788497217068,
                                 'r': 0.7123834886817576}],
 'news.bbc.co.uk;2000': [{'a': 0.8779378316906747,
                          'f1': 0.7432216905901117,
                          'p': 1.0,
                          'r': 0.5913705583756346},
                         {'a': 0.8826355525051476,
                          'f1': 0.7641379310344827,
                          'p': 1.0,
                          'r': 0.6183035714285714},
                         {'a': 0.7146529562982005,
                          'f1': 0.6389069616135329,
                          'p': 0.7263313609467456,
                          'r': 0.570267131242741},
                         {'a': 0.777404169468729,
                          'f1': 0.6429341963322547,
                          'p': 1.0,
                          'r': 0.4737678855325914},
                         {'a': 0.7595993322203672,
                          'f1': 0.6918687589158345,
                          'p': 0.739329268292683,
                          'r': 0.6501340482573726},
                         {'a': 0.7670316301703163,
                          'f1': 0.534629404617254,
                          'p': 0.990990990990991,
                          'r': 0.36605657237936773},
                         {'a': 0.8043010752688172,
                          'f1': 0.6650306748466257,
                          'p': 0.6273148148148148,
                          'r': 0.7075718015665796},
                         {'a': 0.7788378143972247,
                          'f1': 0.684796044499382,
                          'p': 0.5496031746031746,
                          'r': 0.9081967213114754},
                         {'a': 0.6775320139697323,
                          'f1': 0.5273037542662117,
                          'p': 0.3709483793517407,
                          'r': 0.911504424778761},
                         {'a': 0.7228847245883021,
                          'f1': 0.6746666666666667,
                          'p': 0.5205761316872428,
                          'r': 0.9583333333333334},
                         {'a': 0.9294964028776979,
                          'f1': 0.8707124010554089,
                          'p': 1.0,
                          'r': 0.7710280373831776},
                         {'a': 0.6867924528301886,
                          'f1': 0.38388123011664904,
                          'p': 1.0,
                          'r': 0.23753280839895013},
                         {'a': 0.8452380952380952,
                          'f1': 0.5695364238410596,
                          'p': 0.9772727272727273,
                          'r': 0.40186915887850466},
                         {'a': 0.7474690663667042,
                          'f1': 0.570334928229665,
                          'p': 0.7883597883597884,
                          'r': 0.44677661169415295},
                         {'a': 0.8226387887527037,
                          'f1': 0.6403508771929824,
                          'p': 1.0,
                          'r': 0.47096774193548385},
                         {'a': 0.7872596153846154,
                          'f1': 0.6641366223908919,
                          'p': 0.7276507276507277,
                          'r': 0.6108202443280978},
                         {'a': 0.8597168597168597,
                          'f1': 0.7583148558758315,
                          'p': 1.0,
                          'r': 0.6107142857142858},
                         {'a': 0.8373392956959195,
                          'f1': 0.7787072243346007,
                          'p': 0.9961089494163424,
                          'r': 0.6392009987515606},
                         {'a': 0.8239325250395361,
                          'f1': 0.7746288798920378,
                          'p': 1.0,
                          'r': 0.6321585903083701},
                         {'a': 0.7267620020429009,
                          'f1': 0.563265306122449,
                          'p': 0.7532751091703057,
                          'r': 0.4498044328552803},
                         {'a': 0.6931818181818182,
                          'f1': 0.3360655737704918,
                          'p': 0.984,
                          'r': 0.2026359143327842},
                         {'a': 0.7703296703296704,
                          'f1': 0.6818873668188737,
                          'p': 0.7032967032967034,
                          'r': 0.6617429837518464},
                         {'a': 0.7139959432048681,
                          'f1': 0.674364896073903,
                          'p': 0.5191111111111111,
                          'r': 0.9621087314662273},
                         {'a': 0.802076124567474,
                          'f1': 0.5806451612903226,
                          'p': 0.9565217391304348,
                          'r': 0.4168421052631579},
                         {'a': 0.6945156330087134,
                          'f1': 0.6037234042553192,
                          'p': 0.44729064039408867,
                          'r': 0.9284253578732107}],
 'news.bbc.co.uk;2005': [{'a': 0.9356343283582089,
                          'f1': 0.8509719222462202,
                          'p': 0.9609756097560975,
                          'r': 0.7635658914728682},
                         {'a': 0.9139123750960799,
                          'f1': 0.831831831831832,
                          'p': 0.9453924914675768,
                          'r': 0.7426273458445041},
                         {'a': 0.8702341137123746,
                          'f1': 0.8236363636363636,
                          'p': 0.9476987447698745,
                          'r': 0.7282958199356914},
                         {'a': 0.9212893553223388,
                          'f1': 0.8837209302325583,
                          'p': 0.9827586206896551,
                          'r': 0.8028169014084507},
                         {'a': 0.5960410557184751,
                          'f1': 0.618421052631579,
                          'p': 0.4501008064516129,
                          'r': 0.9878318584070797},
                         {'a': 0.698340874811463,
                          'f1': 0.6767241379310345,
                          'p': 0.5181518151815182,
                          'r': 0.9751552795031055},
                         {'a': 0.6169786096256684,
                          'f1': 0.6619469026548672,
                          'p': 0.49822380106571934,
                          'r': 0.9859402460456942},
                         {'a': 0.9121107266435986,
                          'f1': 0.8618063112078346,
                          'p': 0.9658536585365853,
                          'r': 0.7779960707269156},
                         {'a': 0.9232,
                          'f1': 0.8383838383838383,
                          'p': 0.9764705882352941,
                          'r': 0.7345132743362832},
                         {'a': 0.8736559139784946,
                          'f1': 0.8559166155732679,
                          'p': 0.9064935064935065,
                          'r': 0.81068524970964},
                         {'a': 0.9157967988865693,
                          'f1': 0.879120879120879,
                          'p': 0.9865470852017937,
                          'r': 0.7927927927927928},
                         {'a': 0.9260935143288085,
                          'f1': 0.8638888888888889,
                          'p': 0.9810725552050473,
                          'r': 0.771712158808933},
                         {'a': 0.8907103825136612,
                          'f1': 0.83640081799591,
                          'p': 0.966903073286052,
                          'r': 0.736936936936937},
                         {'a': 0.7635270541082164,
                          'f1': 0.6660377358490567,
                          'p': 0.5093795093795094,
                          'r': 0.9618528610354223},
                         {'a': 0.8816326530612245,
                          'f1': 0.7846534653465347,
                          'p': 0.8212435233160622,
                          'r': 0.7511848341232228},
                         {'a': 0.7883522727272727,
                          'f1': 0.6666666666666667,
                          'p': 0.5094017094017094,
                          'r': 0.9644012944983819},
                         {'a': 0.9158061953931692,
                          'f1': 0.8233333333333334,
                          'p': 0.9391634980988594,
                          'r': 0.7329376854599406},
                         {'a': 0.9089347079037801,
                          'f1': 0.8920570264765785,
                          'p': 0.9805970149253731,
                          'r': 0.8181818181818182},
                         {'a': 0.9209744503862151,
                          'f1': 0.7969465648854962,
                          'p': 0.9775280898876404,
                          'r': 0.6726804123711341},
                         {'a': 0.6623931623931624,
                          'f1': 0.6603611349957007,
                          'p': 0.49773169151004537,
                          'r': 0.9808429118773946},
                         {'a': 0.6547952888390354,
                          'f1': 0.7069745298738396,
                          'p': 0.553072625698324,
                          'r': 0.9795514511873351},
                         {'a': 0.8319641523525019,
                          'f1': 0.659606656580938,
                          'p': 0.529126213592233,
                          'r': 0.8755020080321285},
                         {'a': 0.68261045804621,
                          'f1': 0.6714225765841376,
                          'p': 0.5161290322580645,
                          'r': 0.9603841536614646},
                         {'a': 0.9155672823218998,
                          'f1': 0.8576512455516014,
                          'p': 0.9432485322896281,
                          'r': 0.7862969004893964},
                         {'a': 0.7385872176838059,
                          'f1': 0.6902050113895217,
                          'p': 0.5353356890459364,
                          'r': 0.9711538461538461}],
 'news.bbc.co.uk;2010': [{'a': 0.9087650700553926,
                          'f1': 0.8590130916414905,
                          'p': 0.9693181818181819,
                          'r': 0.77124773960217},
                         {'a': 0.9304987735077678,
                          'f1': 0.8123620309050773,
                          'p': 0.9460154241645244,
                          'r': 0.7117988394584139},
                         {'a': 0.8878540939076446,
                          'f1': 0.6643437862950057,
                          'p': 0.6858513189448441,
                          'r': 0.6441441441441441},
                         {'a': 0.8703252032520326,
                          'f1': 0.49605055292259087,
                          'p': 1.0,
                          'r': 0.32983193277310924},
                         {'a': 0.9650613786591123,
                          'f1': 0.7357142857142857,
                          'p': 0.9279279279279279,
                          'r': 0.6094674556213018},
                         {'a': 0.8997502675704602,
                          'f1': 0.7913882702301411,
                          'p': 0.8500797448165869,
                          'r': 0.7402777777777778},
                         {'a': 0.9785977859778597,
                          'f1': 0.7521367521367521,
                          'p': 1.0,
                          'r': 0.6027397260273972},
                         {'a': 0.9426885798567215,
                          'f1': 0.7827476038338659,
                          'p': 0.9722222222222222,
                          'r': 0.6550802139037433},
                         {'a': 0.9484402079722704,
                          'f1': 0.7808471454880295,
                          'p': 0.9814814814814815,
                          'r': 0.6483180428134556},
                         {'a': 0.9003282602208296,
                          'f1': 0.8590717299578059,
                          'p': 0.967680608365019,
                          'r': 0.7723823975720789},
                         {'a': 0.949508489722967,
                          'f1': 0.7918968692449355,
                          'p': 0.9684684684684685,
                          'r': 0.6697819314641744},
                         {'a': 0.9185606060606061,
                          'f1': 0.8275862068965518,
                          'p': 0.9847328244274809,
                          'r': 0.7136929460580913},
                         {'a': 0.938921651221567,
                          'f1': 0.7751937984496124,
                          'p': 0.9765625,
                          'r': 0.6426735218508998},
                         {'a': 0.9448037947391117,
                          'f1': 0.7961783439490444,
                          'p': 0.9803921568627451,
                          'r': 0.6702412868632708},
                         {'a': 0.9801381692573402,
                          'f1': 0.8496732026143791,
                          'p': 1.0,
                          'r': 0.7386363636363636},
                         {'a': 0.8983992159425025,
                          'f1': 0.8175953079178886,
                          'p': 0.9707520891364902,
                          'r': 0.7061803444782169},
                         {'a': 0.944396551724138,
                          'f1': 0.8286852589641434,
                          'p': 0.9780564263322884,
                          'r': 0.7188940092165899},
                         {'a': 0.8906574394463668,
                          'f1': 0.7519623233908949,
                          'p': 0.811864406779661,
                          'r': 0.7002923976608187},
                         {'a': 0.9009265858873842,
                          'f1': 0.7841614906832298,
                          'p': 0.9001782531194296,
                          'r': 0.6946354883081155},
                         {'a': 0.8529312097594036,
                          'f1': 0.7260101010101009,
                          'p': 1.0,
                          'r': 0.5698711595639246},
                         {'a': 0.9142219387755102,
                          'f1': 0.877225011410315,
                          'p': 0.9746450304259635,
                          'r': 0.7975103734439835},
                         {'a': 0.9172384219554031,
                          'f1': 0.643253234750462,
                          'p': 1.0,
                          'r': 0.47411444141689374},
                         {'a': 0.9130139313625553,
                          'f1': 0.850989522700815,
                          'p': 1.0,
                          'r': 0.7406281661600811},
                         {'a': 0.912832023943135,
                          'f1': 0.7791469194312796,
                          'p': 0.92152466367713,
                          'r': 0.6748768472906403},
                         {'a': 0.9404112463281578,
                          'f1': 0.7874251497005988,
                          'p': 0.9528985507246377,
                          'r': 0.6709183673469388}],
 'news.bbc.co.uk;2015': [{'a': 0.9648973814578911,
                          'f1': 0.7922948073701842,
                          'p': 0.9517102615694165,
                          'r': 0.6786226685796269},
                         {'a': 0.9678420310296192,
                          'f1': 0.776908023483366,
                          'p': 0.9254079254079254,
                          'r': 0.6694772344013491},
                         {'a': 0.938013992880815,
                          'f1': 0.8068833652007648,
                          'p': 0.8933107535986452,
                          'r': 0.7357043235704324},
                         {'a': 0.9737772539776075,
                          'f1': 0.7351190476190477,
                          'p': 0.8288590604026845,
                          'r': 0.660427807486631},
                         {'a': 0.9568241469816273,
                          'f1': 0.8488745980707396,
                          'p': 0.9736564805057956,
                          'r': 0.752442996742671},
                         {'a': 0.9691456847620433,
                          'f1': 0.7695652173913042,
                          'p': 0.9340369393139841,
                          'r': 0.6543438077634011},
                         {'a': 0.9647009385067936,
                          'f1': 0.7618147448015122,
                          'p': 0.8779956427015251,
                          'r': 0.672787979966611},
                         {'a': 0.9593606068816039,
                          'f1': 0.7816593886462883,
                          'p': 0.9404553415061296,
                          'r': 0.6687422166874222},
                         {'a': 0.9841269841269841,
                          'f1': 0.779874213836478,
                          'p': 0.9489795918367347,
                          'r': 0.6619217081850534},
                         {'a': 0.976,
                          'f1': 0.7958921694480102,
                          'p': 0.9841269841269841,
                          'r': 0.6681034482758621},
                         {'a': 0.9884757221880762,
                          'f1': 0.6987951807228917,
                          'p': 0.9886363636363636,
                          'r': 0.5403726708074534},
                         {'a': 0.9829111077799431,
                          'f1': 0.6797752808988765,
                          'p': 0.8402777777777778,
                          'r': 0.5707547169811321},
                         {'a': 0.9519759225333683,
                          'f1': 0.7911212293682414,
                          'p': 0.8979328165374677,
                          'r': 0.7070193285859614},
                         {'a': 0.9782481751824817,
                          'f1': 0.7916083916083916,
                          'p': 0.9401993355481728,
                          'r': 0.6835748792270532},
                         {'a': 0.9672014766434758,
                          'f1': 0.7664307381193123,
                          'p': 0.851685393258427,
                          'r': 0.6966911764705882},
                         {'a': 0.9730512894813098,
                          'f1': 0.7387640449438202,
                          'p': 0.8825503355704698,
                          'r': 0.6352657004830918},
                         {'a': 0.9572909467864548,
                          'f1': 0.7765726681127983,
                          'p': 0.9226804123711341,
                          'r': 0.6704119850187266},
                         {'a': 0.9490620114643044,
                          'f1': 0.7953950811093669,
                          'p': 0.8868144690781797,
                          'r': 0.7210626185958254},
                         {'a': 0.9577195853791598,
                          'f1': 0.8118932038834952,
                          'p': 0.9202200825309491,
                          'r': 0.7263843648208469},
                         {'a': 0.9612373737373737,
                          'f1': 0.7904436860068259,
                          'p': 0.9338709677419355,
                          'r': 0.685207100591716},
                         {'a': 0.9678154371973796,
                          'f1': 0.8038194444444444,
                          'p': 0.9526748971193416,
                          'r': 0.6951951951951952},
                         {'a': 0.9549573921276884,
                          'f1': 0.7412587412587411,
                          'p': 0.8383128295254832,
                          'r': 0.6643454038997214},
                         {'a': 0.9277370279815268,
                          'f1': 0.613933236574746,
                          'p': 1.0,
                          'r': 0.44293193717277485},
                         {'a': 0.9638621459467002,
                          'f1': 0.7955801104972375,
                          'p': 0.9316081330868762,
                          'r': 0.6942148760330579},
                         {'a': 0.9633780789782354,
                          'f1': 0.7051416579223505,
                          'p': 0.7850467289719626,
                          'r': 0.64}],
 'news.yahoo.com;2000': [{'a': 0.8587458745874588,
                          'f1': 0.8595800524934383,
                          'p': 0.9264497878359265,
                          'r': 0.8017135862913096},
                         {'a': 0.7997097242380261,
                          'f1': 0.7668918918918919,
                          'p': 0.7721088435374149,
                          'r': 0.761744966442953},
                         {'a': 0.8626570915619389,
                          'f1': 0.8263337116912599,
                          'p': 0.9032258064516129,
                          'r': 0.7615062761506276},
                         {'a': 0.876629889669007,
                          'f1': 0.8087091757387247,
                          'p': 0.896551724137931,
                          'r': 0.7365439093484419},
                         {'a': 0.8607825295723385,
                          'f1': 0.8131868131868132,
                          'p': 0.9,
                          'r': 0.7416481069042317},
                         {'a': 0.8588342440801457,
                          'f1': 0.8130277442702051,
                          'p': 0.9010695187165776,
                          'r': 0.7406593406593407},
                         {'a': 0.8329113924050633,
                          'f1': 0.8543046357615894,
                          'p': 0.9385610347615198,
                          'r': 0.7839297771775827},
                         {'a': 0.44491017964071855,
                          'f1': 0.520434557682359,
                          'p': 0.35954253037884204,
                          'r': 0.9419475655430711},
                         {'a': 0.7606382978723404,
                          'f1': 0.7431506849315069,
                          'p': 0.703023758099352,
                          'r': 0.788135593220339},
                         {'a': 0.7507987220447284,
                          'f1': 0.7153284671532847,
                          'p': 0.6704675028506272,
                          'r': 0.7666232073011734},
                         {'a': 0.8652668416447944,
                          'f1': 0.8121951219512195,
                          'p': 0.9098360655737705,
                          'r': 0.7334801762114538},
                         {'a': 0.5723404255319149,
                          'f1': 0.6314631463146314,
                          'p': 0.47333699835074217,
                          'r': 0.948237885462555},
                         {'a': 0.8811513463324049,
                          'f1': 0.808955223880597,
                          'p': 0.9003322259136213,
                          'r': 0.7344173441734417},
                         {'a': 0.8760683760683761,
                          'f1': 0.8455804046858361,
                          'p': 0.9168591224018475,
                          'r': 0.7845849802371542},
                         {'a': 0.5293017456359103,
                          'f1': 0.6165566277298121,
                          'p': 0.45932652289065456,
                          'r': 0.9374517374517375},
                         {'a': 0.45260663507109006,
                          'f1': 0.49193548387096775,
                          'p': 0.3356678339169585,
                          'r': 0.9204389574759945},
                         {'a': 0.8815399802566634,
                          'f1': 0.8032786885245902,
                          'p': 0.9007352941176471,
                          'r': 0.7248520710059172},
                         {'a': 0.8846153846153846,
                          'f1': 0.767123287671233,
                          'p': 0.865979381443299,
                          'r': 0.6885245901639344},
                         {'a': 0.8671586715867159,
                          'f1': 0.8195488721804511,
                          'p': 0.9008264462809917,
                          'r': 0.7517241379310344},
                         {'a': 0.40722120658135286,
                          'f1': 0.40803286170698305,
                          'p': 0.26294117647058823,
                          'r': 0.9103869653767821},
                         {'a': 0.7739430543572045,
                          'f1': 0.5148148148148148,
                          'p': 0.4186746987951807,
                          'r': 0.6682692307692307},
                         {'a': 0.8501577287066246,
                          'f1': 0.8029045643153527,
                          'p': 0.8979118329466357,
                          'r': 0.726078799249531},
                         {'a': 0.8885416666666667,
                          'f1': 0.8022181146025877,
                          'p': 0.8930041152263375,
                          'r': 0.7281879194630873},
                         {'a': 0.8695965417867435,
                          'f1': 0.8650260999254288,
                          'p': 0.9265175718849841,
                          'r': 0.8111888111888111},
                         {'a': 0.9444444444444444,
                          'f1': 0.9482470784641069,
                          'p': 0.9982425307557118,
                          'r': 0.9030206677265501}],
 'news.yahoo.com;2005': [{'a': 0.622992700729927,
                          'f1': 0.6003868471953578,
                          'p': 0.4332774986041318,
                          'r': 0.9773299748110831},
                         {'a': 0.6364023870417732,
                          'f1': 0.5508162190626645,
                          'p': 0.39621212121212124,
                          'r': 0.9032815198618307},
                         {'a': 0.6544353402208763,
                          'f1': 0.6480406386066764,
                          'p': 0.4863834422657952,
                          'r': 0.9706521739130435},
                         {'a': 0.7404761904761905,
                          'f1': 0.6254295532646048,
                          'p': 0.47089262613195343,
                          'r': 0.9309462915601023},
                         {'a': 0.8107703814510098,
                          'f1': 0.6028257456828886,
                          'p': 0.4485981308411215,
                          'r': 0.9186602870813397},
                         {'a': 0.7223489167616876,
                          'f1': 0.6384558277654045,
                          'p': 0.47513812154696133,
                          'r': 0.9728506787330317},
                         {'a': 0.6775898520084567,
                          'f1': 0.5249221183800623,
                          'p': 0.3627556512378902,
                          'r': 0.9492957746478873},
                         {'a': 0.6482486433152442,
                          'f1': 0.544408945686901,
                          'p': 0.39190432382704693,
                          'r': 0.891213389121339},
                         {'a': 0.9478407178911946,
                          'f1': 0.9168900804289544,
                          'p': 0.9980544747081712,
                          'r': 0.8479338842975207},
                         {'a': 0.5617743376004763,
                          'f1': 0.5867490174059518,
                          'p': 0.4186698717948718,
                          'r': 0.9803001876172608},
                         {'a': 0.7334993773349938,
                          'f1': 0.5191011235955055,
                          'p': 0.3684210526315789,
                          'r': 0.8783269961977186},
                         {'a': 0.9161384690394929,
                          'f1': 0.8934324659231722,
                          'p': 1.0,
                          'r': 0.8073908174692049},
                         {'a': 0.9376083188908145,
                          'f1': 0.9306625577812017,
                          'p': 0.9991728701406121,
                          'r': 0.8709444844989185},
                         {'a': 0.6061349693251534,
                          'f1': 0.6651366576257041,
                          'p': 0.5022054190296156,
                          'r': 0.9845583693638048},
                         {'a': 0.5925589836660617,
                          'f1': 0.6559386973180076,
                          'p': 0.4930875576036866,
                          'r': 0.9794050343249427},
                         {'a': 0.612822906940554,
                          'f1': 0.6358313817330211,
                          'p': 0.4703334776959723,
                          'r': 0.981029810298103},
                         {'a': 0.8044692737430168,
                          'f1': 0.48851774530271397,
                          'p': 0.36,
                          'r': 0.7597402597402597},
                         {'a': 0.7594310451453309,
                          'f1': 0.6361085126286249,
                          'p': 0.47752808988764045,
                          'r': 0.9523809523809523},
                         {'a': 0.6544354838709677,
                          'f1': 0.6509164969450102,
                          'p': 0.48630553864881315,
                          'r': 0.9839901477832512},
                         {'a': 0.6405657123145913,
                          'f1': 0.6538205980066445,
                          'p': 0.49873289406994425,
                          'r': 0.9488910318225651},
                         {'a': 0.7027027027027027,
                          'f1': 0.5104450499545866,
                          'p': 0.34820322180916974,
                          'r': 0.95578231292517},
                         {'a': 0.635424636572303,
                          'f1': 0.5960152607036879,
                          'p': 0.43023255813953487,
                          'r': 0.9696551724137931},
                         {'a': 0.6326188881446752,
                          'f1': 0.643715492042871,
                          'p': 0.4789753504108265,
                          'r': 0.9811881188118812},
                         {'a': 0.6926658905704307,
                          'f1': 0.4903474903474903,
                          'p': 0.33377135348226017,
                          'r': 0.9236363636363636},
                         {'a': 0.6427613941018767,
                          'f1': 0.6451398135818909,
                          'p': 0.480893300248139,
                          'r': 0.9797775530839231}],
 'news.yahoo.com;2010': [{'a': 0.9145150034891836,
                          'f1': 0.8627450980392156,
                          'p': 0.9734513274336283,
                          'r': 0.7746478873239436},
                         {'a': 0.9459720212252773,
                          'f1': 0.7795275590551182,
                          'p': 0.9339622641509434,
                          'r': 0.668918918918919},
                         {'a': 0.9225324419976406,
                          'f1': 0.8300258843830888,
                          'p': 0.993801652892562,
                          'r': 0.7125925925925926},
                         {'a': 0.9102055535521096,
                          'f1': 0.844666250779788,
                          'p': 0.9797395079594791,
                          'r': 0.7423245614035088},
                         {'a': 0.9120772946859903,
                          'f1': 0.8788282290279628,
                          'p': 0.9801980198019802,
                          'r': 0.7964601769911505},
                         {'a': 0.9412811387900356,
                          'f1': 0.8341708542713568,
                          'p': 0.9880952380952381,
                          'r': 0.7217391304347827},
                         {'a': 0.9192590003495281,
                          'f1': 0.8705882352941178,
                          'p': 0.9961538461538462,
                          'r': 0.7731343283582089},
                         {'a': 0.9275755228505035,
                          'f1': 0.8361086765994742,
                          'p': 0.9794661190965093,
                          'r': 0.7293577981651376},
                         {'a': 0.9123287671232877,
                          'f1': 0.8717434869739478,
                          'p': 0.9764309764309764,
                          'r': 0.7873303167420814},
                         {'a': 0.9394069617533305,
                          'f1': 0.8060522696011004,
                          'p': 0.9865319865319865,
                          'r': 0.6813953488372093},
                         {'a': 0.9531757070004636,
                          'f1': 0.7634660421545667,
                          'p': 0.9878787878787879,
                          'r': 0.6221374045801527},
                         {'a': 0.9602941176470589,
                          'f1': 0.8265524625267666,
                          'p': 1.0,
                          'r': 0.7043795620437956},
                         {'a': 0.9043835616438356,
                          'f1': 0.8942103667778114,
                          'p': 0.9742404227212682,
                          'r': 0.8263305322128851},
                         {'a': 0.9643753135975915,
                          'f1': 0.7815384615384615,
                          'p': 0.9477611940298507,
                          'r': 0.6649214659685864},
                         {'a': 0.9111328125,
                          'f1': 0.8667642752562226,
                          'p': 0.9866666666666667,
                          'r': 0.7728459530026109},
                         {'a': 0.9223492313756405,
                          'f1': 0.8476411446249034,
                          'p': 0.982078853046595,
                          'r': 0.745578231292517},
                         {'a': 0.9252,
                          'f1': 0.8411214953271028,
                          'p': 0.9705882352941176,
                          'r': 0.7421289355322339},
                         {'a': 0.9230142566191446,
                          'f1': 0.81524926686217,
                          'p': 0.954233409610984,
                          'r': 0.71160409556314},
                         {'a': 0.9148277197057685,
                          'f1': 0.8234349919743178,
                          'p': 0.9697542533081286,
                          'r': 0.7154811715481172},
                         {'a': 0.9201252936570086,
                          'f1': 0.8423493044822257,
                          'p': 0.9697508896797153,
                          'r': 0.744535519125683},
                         {'a': 0.9262926292629263,
                          'f1': 0.8540305010893247,
                          'p': 0.98989898989899,
                          'r': 0.7509578544061303},
                         {'a': 0.9045075125208681,
                          'f1': 0.8593903638151424,
                          'p': 0.9909297052154195,
                          'r': 0.7586805555555556},
                         {'a': 0.9005681818181818,
                          'f1': 0.8379629629629629,
                          'p': 0.9488859764089121,
                          'r': 0.7502590673575129},
                         {'a': 0.9154834347532116,
                          'f1': 0.8697916666666666,
                          'p': 0.9800469483568075,
                          'r': 0.7818352059925093},
                         {'a': 0.9470640569395018,
                          'f1': 0.7901234567901235,
                          'p': 1.0,
                          'r': 0.6530612244897959}],
 'news.yahoo.com;2015': [{'a': 0.9882233167322455,
                          'f1': 0.39887640449438205,
                          'p': 1.0,
                          'r': 0.24912280701754386},
                         {'a': 0.9932281113362482,
                          'f1': 0.7039627039627039,
                          'p': 1.0,
                          'r': 0.5431654676258992},
                         {'a': 0.9941599139022538,
                          'f1': 0.7031375703942075,
                          'p': 0.9010309278350516,
                          'r': 0.5765171503957783},
                         {'a': 0.9857477450540689,
                          'f1': 0.5769230769230769,
                          'p': 1.0,
                          'r': 0.40540540540540543},
                         {'a': 0.9917226786158825,
                          'f1': 0.65,
                          'p': 1.0,
                          'r': 0.48148148148148145},
                         {'a': 0.9783373738953625,
                          'f1': 0.4529295589203423,
                          'p': 1.0,
                          'r': 0.2927659574468085},
                         {'a': 0.9826389758749405,
                          'f1': 0.38942731277533044,
                          'p': 1.0,
                          'r': 0.24179431072210067},
                         {'a': 0.9834301869012093,
                          'f1': 0.5104408352668214,
                          'p': 0.9969788519637462,
                          'r': 0.34303534303534305},
                         {'a': 0.9899885237980188,
                          'f1': 0.7208421052631578,
                          'p': 0.9344978165938864,
                          'r': 0.5867032213845099},
                         {'a': 0.990784854563691,
                          'f1': 0.6565420560747663,
                          'p': 0.9689655172413794,
                          'r': 0.49646643109540634},
                         {'a': 0.9969702607170383,
                          'f1': 0.6298701298701298,
                          'p': 1.0,
                          'r': 0.4597156398104265},
                         {'a': 0.9887662593614506,
                          'f1': 0.4697674418604651,
                          'p': 0.9950738916256158,
                          'r': 0.3074581430745814},
                         {'a': 0.9886793404266048,
                          'f1': 0.7357268981753973,
                          'p': 0.9765625,
                          'r': 0.5901794145420207},
                         {'a': 0.9866768678767412,
                          'f1': 0.5574057843996494,
                          'p': 1.0,
                          'r': 0.3863912515188335},
                         {'a': 0.990561797752809,
                          'f1': 0.7015130674002752,
                          'p': 0.9227985524728589,
                          'r': 0.5658284023668639},
                         {'a': 0.9942057382785164,
                          'f1': 0.7198917456021651,
                          'p': 1.0,
                          'r': 0.5623678646934461},
                         {'a': 0.9894407606655824,
                          'f1': 0.532150776053215,
                          'p': 1.0,
                          'r': 0.36253776435045315},
                         {'a': 0.9958237627897265,
                          'f1': 0.6962616822429907,
                          'p': 1.0,
                          'r': 0.5340501792114696},
                         {'a': 0.9890295146315075,
                          'f1': 0.5198237885462555,
                          'p': 0.9957805907172996,
                          'r': 0.35171385991058124},
                         {'a': 0.9872469069938775,
                          'f1': 0.5116731517509727,
                          'p': 1.0,
                          'r': 0.3437908496732026},
                         {'a': 0.9939347798502728,
                          'f1': 0.5394990366088632,
                          'p': 1.0,
                          'r': 0.36939313984168864},
                         {'a': 0.9936686256047275,
                          'f1': 0.7406914893617021,
                          'p': 1.0,
                          'r': 0.5881731784582893},
                         {'a': 0.9797237661315331,
                          'f1': 0.6157323688969258,
                          'p': 1.0,
                          'r': 0.4448073154800784},
                         {'a': 0.9842777595807403,
                          'f1': 0.7354330708661416,
                          'p': 0.9915074309978769,
                          'r': 0.5844806007509387},
                         {'a': 0.9963831652783867,
                          'f1': 0.6787204450625869,
                          'p': 0.991869918699187,
                          'r': 0.5158562367864693}],
 'thenation.com;2000': [{'a': 0.8446475195822454,
                         'f1': 0.8781985670419652,
                         'p': 0.9285714285714286,
                         'r': 0.8330097087378641},
                        {'a': 0.5586890243902439,
                         'f1': 0.4405797101449276,
                         'p': 0.9230769230769231,
                         'r': 0.2893401015228426},
                        {'a': 0.9499589827727646,
                         'f1': 0.951004016064257,
                         'p': 1.0,
                         'r': 0.9065849923430321},
                        {'a': 0.39465363610232823,
                         'f1': 0.4204733076499725,
                         'p': 1.0,
                         'r': 0.2662020905923345},
                        {'a': 0.9079545454545455,
                         'f1': 0.9127155172413793,
                         'p': 0.9918032786885246,
                         'r': 0.845309381237525},
                        {'a': 0.9419191919191919,
                         'f1': 0.9510117145899893,
                         'p': 1.0,
                         'r': 0.9065989847715736},
                        {'a': 0.45465807730426167,
                         'f1': 0.5257487610428787,
                         'p': 1.0,
                         'r': 0.3566208710903245},
                        {'a': 0.5339805825242718,
                         'f1': 0.6196668021129622,
                         'p': 1.0,
                         'r': 0.4489255225198705},
                        {'a': 0.6594516594516594,
                         'f1': 0.6921739130434783,
                         'p': 1.0,
                         'r': 0.5292553191489362},
                        {'a': 0.6827697262479872,
                         'f1': 0.6391941391941391,
                         'p': 0.9971428571428571,
                         'r': 0.47035040431266845},
                        {'a': 0.9518647007805724,
                         'f1': 0.9670525378450578,
                         'p': 1.0,
                         'r': 0.9362068965517242},
                        {'a': 0.9259962049335864,
                         'f1': 0.932797242963814,
                         'p': 0.9914529914529915,
                         'r': 0.8806941431670282},
                        {'a': 0.8371794871794872,
                         'f1': 0.5836065573770493,
                         'p': 1.0,
                         'r': 0.41203703703703703},
                        {'a': 0.8746987951807229,
                         'f1': 0.7219251336898396,
                         'p': 0.9246575342465754,
                         'r': 0.5921052631578947},
                        {'a': 0.611353711790393,
                         'f1': 0.6123210952084629,
                         'p': 0.917910447761194,
                         'r': 0.45938375350140054},
                        {'a': 0.6970684039087948,
                         'f1': 0.6699787083037615,
                         'p': 1.0,
                         'r': 0.503735325506937},
                        {'a': 0.729595015576324,
                         'f1': 0.758082497212932,
                         'p': 0.9985315712187959,
                         'r': 0.6109613656783468},
                        {'a': 0.6265652951699463,
                         'f1': 0.6980108499095841,
                         'p': 0.9979317476732161,
                         'r': 0.5367074527252503},
                        {'a': 0.5507531106745253,
                         'f1': 0.44408427876823336,
                         'p': 1.0,
                         'r': 0.28541666666666665},
                        {'a': 0.7037037037037037,
                         'f1': 0.6769759450171822,
                         'p': 0.9248826291079812,
                         'r': 0.5338753387533876},
                        {'a': 0.46155560508134613,
                         'f1': 0.5520949202817945,
                         'p': 1.0,
                         'r': 0.38130601792573626},
                        {'a': 0.9740562978337008,
                         'f1': 0.9856999856999857,
                         'p': 0.9998549463301422,
                         'r': 0.9719402143260011},
                        {'a': 0.9788867562380038,
                         'f1': 0.9860317460317459,
                         'p': 1.0,
                         'r': 0.9724483406386976},
                        {'a': 0.9400119976004799,
                         'f1': 0.9517839922854388,
                         'p': 0.9989878542510121,
                         'r': 0.9088397790055248},
                        {'a': 0.9589619794809897,
                         'f1': 0.9693417493237151,
                         'p': 1.0,
                         'r': 0.9405074365704287}],
 'thenation.com;2005': [{'a': 0.585047248471373,
                         'f1': 0.6848216170572093,
                         'p': 0.5250890255746197,
                         'r': 0.9842233009708737},
                        {'a': 0.5575221238938053,
                         'f1': 0.08088235294117646,
                         'p': 0.3013698630136986,
                         'r': 0.04670912951167728},
                        {'a': 0.5626654898499559,
                         'f1': 0.6605001712915383,
                         'p': 0.5210810810810811,
                         'r': 0.90177736202058},
                        {'a': 0.6723021582733812,
                         'f1': 0.7732138411750062,
                         'p': 0.6711322385479689,
                         'r': 0.9119201409277745},
                        {'a': 0.6308724832214765,
                         'f1': 0.6263586956521738,
                         'p': 0.5214932126696833,
                         'r': 0.7840136054421769},
                        {'a': 0.5353455123113582,
                         'f1': 0.34047350620067646,
                         'p': 1.0,
                         'r': 0.20516304347826086},
                        {'a': 0.5850678733031675,
                         'f1': 0.6533081285444234,
                         'p': 0.5106382978723404,
                         'r': 0.906610703043022},
                        {'a': 0.9050416054821341,
                         'f1': 0.927122464312547,
                         'p': 0.9060205580029369,
                         'r': 0.9492307692307692},
                        {'a': 0.6445198836081474,
                         'f1': 0.7173158503663711,
                         'p': 0.56672760511883,
                         'r': 0.976890756302521},
                        {'a': 0.6381254404510218,
                         'f1': 0.6748971193415637,
                         'p': 0.5192401363857769,
                         'r': 0.9638336347197106},
                        {'a': 0.6437659033078881,
                         'f1': 0.7270955165692007,
                         'p': 0.5819032761310452,
                         'r': 0.9688311688311688},
                        {'a': 0.6027813993915688,
                         'f1': 0.6652014652014653,
                         'p': 0.5424133811230586,
                         'r': 0.8598484848484849},
                        {'a': 0.6371323529411764,
                         'f1': 0.6863679694947569,
                         'p': 0.5299313052011776,
                         'r': 0.9738503155996393},
                        {'a': 0.5930548019533369,
                         'f1': 0.6651785714285714,
                         'p': 0.5461876832844574,
                         'r': 0.8504566210045662},
                        {'a': 0.6191155492154066,
                         'f1': 0.7178584008453682,
                         'p': 0.5955581531268265,
                         'r': 0.9033687943262412},
                        {'a': 0.5311720698254364,
                         'f1': 0.6709451575262544,
                         'p': 0.5232029117379435,
                         'r': 0.9349593495934959},
                        {'a': 0.6631016042780749,
                         'f1': 0.677584442169908,
                         'p': 0.5196232339089482,
                         'r': 0.9735294117647059},
                        {'a': 0.6610948600083577,
                         'f1': 0.7157378198387663,
                         'p': 0.5653377630121816,
                         'r': 0.9751671442215855},
                        {'a': 0.9358600583090378,
                         'f1': 0.9330289193302891,
                         'p': 0.9967479674796748,
                         'r': 0.876967095851216},
                        {'a': 0.6625796959293772,
                         'f1': 0.6733143399810066,
                         'p': 0.5367146101438305,
                         'r': 0.9031847133757962},
                        {'a': 0.650623119896863,
                         'f1': 0.682297772567409,
                         'p': 0.5243243243243243,
                         'r': 0.9765100671140939},
                        {'a': 0.6420922570016474,
                         'f1': 0.6852589641434261,
                         'p': 0.5264329437952142,
                         'r': 0.9813278008298755},
                        {'a': 0.6931268151016456,
                         'f1': 0.7000946073793755,
                         'p': 0.5514157973174366,
                         'r': 0.9585492227979274},
                        {'a': 0.6468101460415066,
                         'f1': 0.6853817185895241,
                         'p': 0.5273972602739726,
                         'r': 0.978494623655914},
                        {'a': 0.611731843575419,
                         'f1': 0.689316048278945,
                         'p': 0.5627737226277372,
                         'r': 0.889273356401384}],
 'thenation.com;2010': [{'a': 0.8974690082644629,
                         'f1': 0.8335429769392033,
                         'p': 0.9783464566929134,
                         'r': 0.7260774287801315},
                        {'a': 0.8736388959230185,
                         'f1': 0.8011159824631326,
                         'p': 0.9262672811059908,
                         'r': 0.7057584269662921},
                        {'a': 0.8186367969494757,
                         'f1': 0.7138021812711546,
                         'p': 0.6706713780918728,
                         'r': 0.7628617363344051},
                        {'a': 0.8985587583148559,
                         'f1': 0.8361683079677708,
                         'p': 0.9006750241080038,
                         'r': 0.7802840434419381},
                        {'a': 0.8827338129496403,
                         'f1': 0.84559520050521,
                         'p': 0.9516702203269367,
                         'r': 0.7607954545454545},
                        {'a': 0.9713763702801461,
                         'f1': 0.838487972508591,
                         'p': 1.0,
                         'r': 0.7218934911242604},
                        {'a': 0.9152489947417259,
                         'f1': 0.7936746987951806,
                         'p': 0.9133448873483535,
                         'r': 0.7017310252996005},
                        {'a': 0.8848305875038857,
                         'f1': 0.7561697926949654,
                         'p': 0.945679012345679,
                         'r': 0.6299342105263158},
                        {'a': 0.9503234750462107,
                         'f1': 0.9554034432690314,
                         'p': 1.0,
                         'r': 0.914614773629865},
                        {'a': 0.9136125654450262,
                         'f1': 0.881720430107527,
                         'p': 0.9309366130558183,
                         'r': 0.8374468085106384},
                        {'a': 0.8967013888888888,
                         'f1': 0.8238776517020227,
                         'p': 0.9371492704826038,
                         'r': 0.7350352112676056},
                        {'a': 0.8633467075761152,
                         'f1': 0.8214616096207215,
                         'p': 0.8522072936660269,
                         'r': 0.7928571428571428},
                        {'a': 0.8523025084238113,
                         'f1': 0.7997970058360823,
                         'p': 0.9104563835932987,
                         'r': 0.7131221719457014},
                        {'a': 0.8708053691275168,
                         'f1': 0.781869688385269,
                         'p': 0.9165085388994307,
                         'r': 0.6817219477769937},
                        {'a': 0.8937481655415321,
                         'f1': 0.8204365079365079,
                         'p': 0.9168514412416852,
                         'r': 0.7423698384201077},
                        {'a': 0.8776053215077605,
                         'f1': 0.7641025641025642,
                         'p': 0.8975903614457831,
                         'r': 0.6651785714285714},
                        {'a': 0.9319354838709677,
                         'f1': 0.8894709271870089,
                         'p': 0.9988235294117647,
                         'r': 0.8016997167138811},
                        {'a': 0.9277665414620052,
                         'f1': 0.8982912937347437,
                         'p': 0.9874776386404294,
                         'r': 0.8238805970149253},
                        {'a': 0.8638649084527085,
                         'f1': 0.7378995433789955,
                         'p': 0.947022972339428,
                         'r': 0.604428485936565},
                        {'a': 0.9063896923481461,
                         'f1': 0.7639257294429708,
                         'p': 0.9042386185243328,
                         'r': 0.661308840413318},
                        {'a': 0.8862889189711854,
                         'f1': 0.7646116893514813,
                         'p': 0.9371933267909716,
                         'r': 0.6457065584854631},
                        {'a': 0.9436460974922514,
                         'f1': 0.9279538904899135,
                         'p': 1.0,
                         'r': 0.8655913978494624},
                        {'a': 0.6287976037655113,
                         'f1': 0.3380389164441053,
                         'p': 0.4071691176470588,
                         'r': 0.28897586431833006},
                        {'a': 0.9347004856988667,
                         'f1': 0.9170664838930773,
                         'p': 0.9660649819494584,
                         'r': 0.87279843444227},
                        {'a': 0.9066123472265747,
                         'f1': 0.8281430219146482,
                         'p': 0.9472295514511874,
                         'r': 0.735655737704918}],
 'thenation.com;2015': [{'a': 0.946078431372549,
                         'f1': 0.9426784783741532,
                         'p': 0.9901477832512315,
                         'r': 0.8995524614619592},
                        {'a': 0.9442379182156134,
                         'f1': 0.8966812773951159,
                         'p': 1.0,
                         'r': 0.8127128263337117},
                        {'a': 0.8494423791821561,
                         'f1': 0.7423117709437964,
                         'p': 1.0,
                         'r': 0.5902192242833052},
                        {'a': 0.908189880020866,
                         'f1': 0.9222614840989399,
                         'p': 1.0,
                         'r': 0.8557377049180328},
                        {'a': 0.887252276379218,
                         'f1': 0.8522288522288523,
                         'p': 1.0,
                         'r': 0.7425076452599388},
                        {'a': 0.9353161998267399,
                         'f1': 0.9143730886850152,
                         'p': 0.9819376026272578,
                         'r': 0.8555078683834049},
                        {'a': 0.9,
                         'f1': 0.8534482758620691,
                         'p': 1.0,
                         'r': 0.7443609022556391},
                        {'a': 0.9417114510128152,
                         'f1': 0.7262135922330096,
                         'p': 1.0,
                         'r': 0.5701219512195121},
                        {'a': 0.9472396925227113,
                         'f1': 0.9018843404808318,
                         'p': 0.9733520336605891,
                         'r': 0.8401937046004843},
                        {'a': 0.8967308279865567,
                         'f1': 0.8422035480859009,
                         'p': 1.0,
                         'r': 0.7274193548387097},
                        {'a': 0.9602739726027397,
                         'f1': 0.6561264822134386,
                         'p': 0.7280701754385965,
                         'r': 0.5971223021582733},
                        {'a': 0.9408020369191598,
                         'f1': 0.9013785790031813,
                         'p': 1.0,
                         'r': 0.8204633204633205},
                        {'a': 0.9402285379431585,
                         'f1': 0.9176755447941889,
                         'p': 0.9938811188811189,
                         'r': 0.8523238380809596},
                        {'a': 0.918348623853211,
                         'f1': 0.8781378366042902,
                         'p': 1.0,
                         'r': 0.7827502034174125},
                        {'a': 0.9087022900763359,
                         'f1': 0.8624022089277495,
                         'p': 1.0,
                         'r': 0.7580906148867314},
                        {'a': 0.9512598099958695,
                         'f1': 0.7915194346289752,
                         'p': 0.9955555555555555,
                         'r': 0.656891495601173},
                        {'a': 0.9454264250994255,
                         'f1': 0.9476584022038568,
                         'p': 1.0,
                         'r': 0.900523560209424},
                        {'a': 0.6411385437961944,
                         'f1': 0.6352301790281331,
                         'p': 1.0,
                         'r': 0.4654485828062778},
                        {'a': 0.93375,
                         'f1': 0.9380599922088041,
                         'p': 0.9893179950698439,
                         'r': 0.8918518518518519},
                        {'a': 0.7591389868250139,
                         'f1': 0.746583365872706,
                         'p': 1.0,
                         'r': 0.5956386292834891},
                        {'a': 0.9417808219178082,
                         'f1': 0.9124941506785212,
                         'p': 0.9938837920489296,
                         'r': 0.8434256055363322},
                        {'a': 0.9275653923541247,
                         'f1': 0.9077598828696926,
                         'p': 0.9864757358790772,
                         'r': 0.8406779661016949},
                        {'a': 0.677887405687754,
                         'f1': 0.6287625418060201,
                         'p': 1.0,
                         'r': 0.4585365853658537},
                        {'a': 0.9623137598597721,
                         'f1': 0.7839195979899497,
                         'p': 0.975,
                         'r': 0.6554621848739496},
                        {'a': 0.9448846021357217,
                         'f1': 0.8991172761664564,
                         'p': 0.9648173207036536,
                         'r': 0.8417945690672963}],
 'www.cnn.com;2000': [{'a': 0.8507183010618363,
                       'f1': 0.7704130643611912,
                       'p': 0.7711538461538462,
                       'r': 0.7696737044145874},
                      {'a': 0.8021071919377004,
                       'f1': 0.8197747183979975,
                       'p': 0.8249370277078085,
                       'r': 0.8146766169154229},
                      {'a': 0.9952137843012125,
                       'f1': 0.9973835688121403,
                       'p': 0.9987772925764192,
                       'r': 0.9959937293154503},
                      {'a': 0.9286966686148451,
                       'f1': 0.8451776649746192,
                       'p': 1.0,
                       'r': 0.7318681318681318},
                      {'a': 0.922009253139458,
                       'f1': 0.8319088319088319,
                       'p': 0.948051948051948,
                       'r': 0.7411167512690355},
                      {'a': 0.9009966777408638,
                       'f1': 0.9131701631701632,
                       'p': 0.948547215496368,
                       'r': 0.8803370786516854},
                      {'a': 0.6760705289672544,
                       'f1': 0.4716516023007395,
                       'p': 1.0,
                       'r': 0.3086021505376344},
                      {'a': 0.8764044943820225,
                       'f1': 0.8687127024722933,
                       'p': 0.8993821712268314,
                       'r': 0.8400659521846661},
                      {'a': 0.8862650602409639,
                       'f1': 0.8627906976744186,
                       'p': 0.9333333333333333,
                       'r': 0.8021621621621622},
                      {'a': 0.9357525282569898,
                       'f1': 0.9133226324237561,
                       'p': 1.0,
                       'r': 0.8404726735598228},
                      {'a': 0.6663623916020082,
                       'f1': 0.2755203171456888,
                       'p': 1.0,
                       'r': 0.15977011494252874},
                      {'a': 0.7270194986072424,
                       'f1': 0.5394736842105263,
                       'p': 1.0,
                       'r': 0.36936936936936937},
                      {'a': 0.7570621468926554,
                       'f1': 0.4691358024691357,
                       'p': 0.9008620689655172,
                       'r': 0.3171471927162367},
                      {'a': 0.736372646184341,
                       'f1': 0.5737179487179487,
                       'p': 0.9972144846796658,
                       'r': 0.4026996625421822},
                      {'a': 0.6722007722007722,
                       'f1': 0.6092959042797975,
                       'p': 1.0,
                       'r': 0.4381204500330907},
                      {'a': 0.8166958552247519,
                       'f1': 0.45296167247386765,
                       'p': 1.0,
                       'r': 0.2927927927927928},
                      {'a': 0.5186170212765957,
                       'f1': 0.5310880829015544,
                       'p': 0.3630460448642267,
                       'r': 0.9887459807073955},
                      {'a': 0.9403578528827038,
                       'f1': 0.7836538461538463,
                       'p': 0.9106145251396648,
                       'r': 0.6877637130801688},
                      {'a': 0.7419700214132763,
                       'f1': 0.5218253968253967,
                       'p': 1.0,
                       'r': 0.3530201342281879},
                      {'a': 0.9235550031075201,
                       'f1': 0.880466472303207,
                       'p': 1.0,
                       'r': 0.7864583333333334},
                      {'a': 0.9272848565710473,
                       'f1': 0.8436154949784791,
                       'p': 0.9245283018867925,
                       'r': 0.7757255936675461},
                      {'a': 0.8321878579610539,
                       'f1': 0.860542598762494,
                       'p': 0.7971781305114638,
                       'r': 0.9348500517063082},
                      {'a': 0.8614357262103506,
                       'f1': 0.8948035487959443,
                       'p': 0.8485576923076923,
                       'r': 0.9463806970509383},
                      {'a': 0.8153811045184847,
                       'f1': 0.8413414394979408,
                       'p': 0.837890625,
                       'r': 0.8448207955888145},
                      {'a': 0.8842740504082357,
                       'f1': 0.8522212148685403,
                       'p': 1.0,
                       'r': 0.7424960505529226}],
 'www.cnn.com;2005': [{'a': 0.9157894736842105,
                       'f1': 0.8086560364464692,
                       'p': 0.8897243107769424,
                       'r': 0.7411273486430062},
                      {'a': 0.9466992665036675,
                       'f1': 0.8784838350055741,
                       'p': 1.0,
                       'r': 0.7833001988071571},
                      {'a': 0.9277802392556491,
                       'f1': 0.9032640949554895,
                       'p': 0.9548306148055207,
                       'r': 0.8569819819819819},
                      {'a': 0.9211599456275487,
                       'f1': 0.8634222919937206,
                       'p': 0.9417808219178082,
                       'r': 0.7971014492753623},
                      {'a': 0.9371980676328503,
                       'f1': 0.8286969253294291,
                       'p': 0.9248366013071896,
                       'r': 0.7506631299734748},
                      {'a': 0.9365595770638471,
                       'f1': 0.9073634204275535,
                       'p': 0.9845360824742269,
                       'r': 0.8414096916299559},
                      {'a': 0.9320987654320988,
                       'f1': 0.8307692307692308,
                       'p': 0.954983922829582,
                       'r': 0.7351485148514851},
                      {'a': 0.9394101876675603,
                       'f1': 0.8355167394468704,
                       'p': 0.9896551724137931,
                       'r': 0.7229219143576826},
                      {'a': 0.6995422388680815,
                       'f1': 0.45714285714285713,
                       'p': 1.0,
                       'r': 0.2962962962962963},
                      {'a': 0.9416666666666667,
                       'f1': 0.7835051546391752,
                       'p': 0.8962264150943396,
                       'r': 0.6959706959706959},
                      {'a': 0.9505253940455342,
                       'f1': 0.927703134996801,
                       'p': 0.9890859481582538,
                       'r': 0.8734939759036144},
                      {'a': 0.9399692149820421,
                       'f1': 0.8557336621454994,
                       'p': 0.9327956989247311,
                       'r': 0.7904328018223234},
                      {'a': 0.9251286850725315,
                       'f1': 0.8545454545454546,
                       'p': 0.93812375249501,
                       'r': 0.7846410684474123},
                      {'a': 0.9263456090651558,
                       'f1': 0.902803738317757,
                       'p': 0.982706002034588,
                       'r': 0.8349178910976663},
                      {'a': 0.9317899958660604,
                       'f1': 0.9061967026719727,
                       'p': 1.0,
                       'r': 0.8284823284823285},
                      {'a': 0.9287894201424212,
                       'f1': 0.8368298368298368,
                       'p': 0.9324675324675324,
                       'r': 0.758985200845666},
                      {'a': 0.9395946999220577,
                       'f1': 0.9034267912772586,
                       'p': 0.9539473684210527,
                       'r': 0.8579881656804734},
                      {'a': 0.8941469489414695,
                       'f1': 0.8355899419729208,
                       'p': 0.8426527958387516,
                       'r': 0.8286445012787724},
                      {'a': 0.9521841794569067,
                       'f1': 0.8748068006182381,
                       'p': 1.0,
                       'r': 0.7774725274725275},
                      {'a': 0.9363021420518602,
                       'f1': 0.7600849256900213,
                       'p': 0.9675675675675676,
                       'r': 0.6258741258741258},
                      {'a': 0.9316666666666666,
                       'f1': 0.8996328029375765,
                       'p': 0.9658344283837057,
                       'r': 0.8419243986254296},
                      {'a': 0.936697247706422,
                       'f1': 0.9103896103896104,
                       'p': 0.9615912208504801,
                       'r': 0.8643649815043156},
                      {'a': 0.8574810606060606,
                       'f1': 0.6745945945945946,
                       'p': 1.0,
                       'r': 0.5089722675367048},
                      {'a': 0.9239130434782609,
                       'f1': 0.8044692737430167,
                       'p': 0.9310344827586207,
                       'r': 0.7081967213114754},
                      {'a': 0.9269644603847408,
                       'f1': 0.9263642340565417,
                       'p': 0.9650684931506849,
                       'r': 0.8906447534766119}],
 'www.cnn.com;2010': [{'a': 0.8882575757575758,
                       'f1': 0.8585131894484412,
                       'p': 0.9445910290237467,
                       'r': 0.7868131868131868},
                      {'a': 0.9171597633136095,
                       'f1': 0.8315789473684211,
                       'p': 0.9262981574539364,
                       'r': 0.7544338335607094},
                      {'a': 0.8902396665508857,
                       'f1': 0.8541089566020315,
                       'p': 0.9352881698685541,
                       'r': 0.7858963466440102},
                      {'a': 0.7690233672857999,
                       'f1': 0.6506570004531038,
                       'p': 1.0,
                       'r': 0.4822028206850235},
                      {'a': 0.9425168306576903,
                       'f1': 0.6855524079320113,
                       'p': 0.7806451612903226,
                       'r': 0.6111111111111112},
                      {'a': 0.9251021334543804,
                       'f1': 0.7950310559006212,
                       'p': 0.8767123287671232,
                       'r': 0.7272727272727273},
                      {'a': 0.9073372373406821,
                       'f1': 0.7223942208462332,
                       'p': 1.0,
                       'r': 0.5654281098546042},
                      {'a': 0.9104534973097618,
                       'f1': 0.8516868236791854,
                       'p': 0.9462517680339463,
                       'r': 0.7743055555555556},
                      {'a': 0.8958742632612967,
                       'f1': 0.8387096774193549,
                       'p': 0.9503448275862069,
                       'r': 0.7505446623093682},
                      {'a': 0.8983481575603558,
                       'f1': 0.8846431146359048,
                       'p': 0.9496904024767802,
                       'r': 0.8279352226720648},
                      {'a': 0.9372256365232661,
                       'f1': 0.7803379416282642,
                       'p': 0.8668941979522184,
                       'r': 0.7094972067039106},
                      {'a': 0.9000246244767298,
                       'f1': 0.8426356589147287,
                       'p': 0.9419410745233969,
                       'r': 0.7622720897615708},
                      {'a': 0.8999645264278113,
                       'f1': 0.8347010550996483,
                       'p': 0.940554821664465,
                       'r': 0.7502634351949421},
                      {'a': 0.9135744480976985,
                       'f1': 0.8979478646699944,
                       'p': 0.9625445897740785,
                       'r': 0.8414760914760915},
                      {'a': 0.9635541033052658,
                       'f1': 0.7105788423153693,
                       'p': 1.0,
                       'r': 0.5510835913312694},
                      {'a': 0.9022356953391436,
                       'f1': 0.7637362637362638,
                       'p': 0.8597938144329897,
                       'r': 0.6869851729818781},
                      {'a': 0.9041458394589826,
                       'f1': 0.8888130968622101,
                       'p': 0.9651851851851851,
                       'r': 0.8236409608091024},
                      {'a': 0.9070523236919077,
                       'f1': 0.8307692307692307,
                       'p': 0.9410187667560321,
                       'r': 0.7436440677966102},
                      {'a': 0.8965958535961095,
                       'f1': 0.9026036644165863,
                       'p': 0.9609856262833676,
                       'r': 0.850909090909091},
                      {'a': 0.9271417133706965,
                       'f1': 0.8040904198062434,
                       'p': 0.9986631016042781,
                       'r': 0.672972972972973},
                      {'a': 0.9422322336869641,
                       'f1': 0.5320776927604474,
                       'p': 0.5095828635851184,
                       'r': 0.5566502463054187},
                      {'a': 0.8882996353994034,
                       'f1': 0.8623928133932218,
                       'p': 0.9378330373001776,
                       'r': 0.7981859410430839},
                      {'a': 0.9054219323277619,
                       'f1': 0.8063439065108514,
                       'p': 0.8977695167286245,
                       'r': 0.7318181818181818},
                      {'a': 0.889171165449349,
                       'f1': 0.8483268144285093,
                       'p': 0.9384615384615385,
                       'r': 0.7739888977002379},
                      {'a': 0.8889970788704966,
                       'f1': 0.7976331360946747,
                       'p': 0.9453015427769986,
                       'r': 0.6898669396110543}],
 'www.cnn.com;2015': [{'a': 0.9276850663243474,
                       'f1': 0.9095773140716962,
                       'p': 0.9670079635949943,
                       'r': 0.8585858585858586},
                      {'a': 0.8943286476005817,
                       'f1': 0.771488469601677,
                       'p': 0.8867469879518072,
                       'r': 0.6827458256029685},
                      {'a': 0.9351593068753493,
                       'f1': 0.8176100628930817,
                       'p': 0.9090909090909091,
                       'r': 0.7428571428571429},
                      {'a': 0.9237203744274048,
                       'f1': 0.800208659363589,
                       'p': 0.9539800995024875,
                       'r': 0.6891284815813118},
                      {'a': 0.8840033500837521,
                       'f1': 0.7432808155699723,
                       'p': 0.9176201372997712,
                       'r': 0.6246105919003115},
                      {'a': 0.9238329238329238,
                       'f1': 0.8730548730548731,
                       'p': 0.9586330935251799,
                       'r': 0.8015037593984963},
                      {'a': 0.9314317059791553,
                       'f1': 0.8639825897714907,
                       'p': 0.9452380952380952,
                       'r': 0.7955911823647295},
                      {'a': 0.9285714285714286,
                       'f1': 0.9018663455749548,
                       'p': 0.9529262086513995,
                       'r': 0.856},
                      {'a': 0.8128253175098896,
                       'f1': 0.5977628635346756,
                       'p': 0.5150346954510409,
                       'r': 0.7121535181236673},
                      {'a': 0.9754299754299754,
                       'f1': 0.7257383966244725,
                       'p': 0.9148936170212766,
                       'r': 0.6013986013986014},
                      {'a': 0.914683430624158,
                       'f1': 0.7921225382932167,
                       'p': 0.9305912596401028,
                       'r': 0.6895238095238095},
                      {'a': 0.9545049063336307,
                       'f1': 0.7866108786610879,
                       'p': 0.9894736842105263,
                       'r': 0.6527777777777778},
                      {'a': 0.7984522207267833,
                       'f1': 0.5513108614232209,
                       'p': 1.0,
                       'r': 0.38055842812823165},
                      {'a': 0.6317081725710277,
                       'f1': 0.467005076142132,
                       'p': 1.0,
                       'r': 0.304635761589404},
                      {'a': 0.885599753314832,
                       'f1': 0.8621330360460795,
                       'p': 0.9731543624161074,
                       'r': 0.7738492328218812},
                      {'a': 0.9383365200764818,
                       'f1': 0.9099790648988137,
                       'p': 0.965925925925926,
                       'r': 0.8601583113456465},
                      {'a': 0.9326794471689701,
                       'f1': 0.7691131498470949,
                       'p': 0.9195612431444241,
                       'r': 0.6609724047306176},
                      {'a': 0.9405116002379535,
                       'f1': 0.8466257668711656,
                       'p': 0.9550173010380623,
                       'r': 0.7603305785123967},
                      {'a': 0.9242323097463284,
                       'f1': 0.8789333333333333,
                       'p': 0.944954128440367,
                       'r': 0.8215353938185443},
                      {'a': 0.9140605762127555,
                       'f1': 0.8198244708311823,
                       'p': 0.9647630619684082,
                       'r': 0.7127468581687613},
                      {'a': 0.9191570881226053,
                       'f1': 0.7417380660954713,
                       'p': 0.9323076923076923,
                       'r': 0.6158536585365854},
                      {'a': 0.9372705018359853,
                       'f1': 0.9337641357027463,
                       'p': 0.9796610169491525,
                       'r': 0.8919753086419753},
                      {'a': 0.9366327474560592,
                       'f1': 0.857736240913811,
                       'p': 0.9096916299559471,
                       'r': 0.8113948919449901},
                      {'a': 0.9310344827586207,
                       'f1': 0.9246353322528365,
                       'p': 0.9556113902847572,
                       'r': 0.8956043956043956},
                      {'a': 0.9313113291703836,
                       'f1': 0.8372093023255813,
                       'p': 0.9565217391304348,
                       'r': 0.7443609022556391}],
 'www.esquire.com;2000': [{'a': 0.9737726967047747,
                           'f1': 0.9630331753554502,
                           'p': 0.9639468690702088,
                           'r': 0.9621212121212122},
                          {'a': 0.7165178571428571,
                           'f1': 0.6930884485258578,
                           'p': 0.5390977443609023,
                           'r': 0.9702300405953992},
                          {'a': 0.7581413820492454,
                           'f1': 0.7117841930903929,
                           'p': 0.5641410352588146,
                           'r': 0.9641025641025641},
                          {'a': 0.925392670157068,
                           'f1': 0.8589108910891089,
                           'p': 0.9665738161559888,
                           'r': 0.7728285077951003},
                          {'a': 0.6791298436437797,
                           'f1': 0.6722222222222222,
                           'p': 0.5148936170212766,
                           'r': 0.968},
                          {'a': 0.7834461218115565,
                           'f1': 0.6876876876876877,
                           'p': 0.5432977461447213,
                           'r': 0.9366053169734151},
                          {'a': 0.8449367088607594,
                           'f1': 0.7151162790697674,
                           'p': 0.5765625,
                           'r': 0.9413265306122449},
                          {'a': 0.6927413671599718,
                           'f1': 0.6909992912827781,
                           'p': 0.540765391014975,
                           'r': 0.956820412168793},
                          {'a': 0.8056112224448898,
                           'f1': 0.7015384615384616,
                           'p': 0.562962962962963,
                           'r': 0.9306122448979591},
                          {'a': 0.6749562171628721,
                           'f1': 0.6839237057220708,
                           'p': 0.5251046025104602,
                           'r': 0.98046875},
                          {'a': 0.9626647144948756,
                           'f1': 0.9428891377379619,
                           'p': 0.958997722095672,
                           'r': 0.9273127753303965},
                          {'a': 0.7986414361960213,
                           'f1': 0.7285807717462394,
                           'p': 0.5931842385516507,
                           'r': 0.9440677966101695},
                          {'a': 0.901394422310757,
                           'f1': 0.8821428571428572,
                           'p': 0.9840637450199203,
                           'r': 0.7993527508090615},
                          {'a': 0.7823639774859287,
                           'f1': 0.6877523553162853,
                           'p': 0.53732912723449,
                           'r': 0.9551401869158879},
                          {'a': 0.7575499787324542,
                           'f1': 0.6888646288209607,
                           'p': 0.536108751062022,
                           'r': 0.9633587786259542},
                          {'a': 0.909716908951798,
                           'f1': 0.8228228228228228,
                           'p': 0.9927536231884058,
                           'r': 0.7025641025641025},
                          {'a': 0.671599718111346,
                           'f1': 0.6878767582049566,
                           'p': 0.5310237849017581,
                           'r': 0.9762357414448669},
                          {'a': 0.7365937365937366,
                           'f1': 0.675818373812038,
                           'p': 0.5199025182778229,
                           'r': 0.9653092006033183},
                          {'a': 0.8163615560640732,
                           'f1': 0.5128983308042488,
                           'p': 0.9941176470588236,
                           'r': 0.3456032719836401},
                          {'a': 0.9113001215066828,
                           'f1': 0.7286245353159851,
                           'p': 0.7075812274368231,
                           'r': 0.7509578544061303},
                          {'a': 0.7780187997107737,
                           'f1': 0.5210608424336973,
                           'p': 0.9881656804733728,
                           'r': 0.3538135593220339},
                          {'a': 0.6996644295302014,
                           'f1': 0.6851363236587511,
                           'p': 0.5353951890034364,
                           'r': 0.9511599511599511},
                          {'a': 0.7891674127126231,
                           'f1': 0.726639582124202,
                           'p': 0.5894538606403014,
                           'r': 0.9470499243570348},
                          {'a': 0.9047619047619048,
                           'f1': 0.5,
                           'p': 1.0,
                           'r': 0.3333333333333333},
                          {'a': 0.7882797731568998,
                           'f1': 0.6918844566712518,
                           'p': 0.5414424111948332,
                           'r': 0.9580952380952381}],
 'www.esquire.com;2005': [{'a': 0.7011988933292346,
                           'f1': 0.6727272727272726,
                           'p': 0.5149484536082474,
                           'r': 0.9699029126213592},
                          {'a': 0.7443633952254642,
                           'f1': 0.711991034740381,
                           'p': 0.565914489311164,
                           'r': 0.959718026183283},
                          {'a': 0.765329295987888,
                           'f1': 0.6839959225280325,
                           'p': 0.5283464566929134,
                           'r': 0.9696531791907514},
                          {'a': 0.7264665757162346,
                           'f1': 0.6763518966908797,
                           'p': 0.5153751537515375,
                           'r': 0.9835680751173709},
                          {'a': 0.7106342694856421,
                           'f1': 0.6779065683175273,
                           'p': 0.517426273458445,
                           'r': 0.9826883910386965},
                          {'a': 0.7599527000394166,
                           'f1': 0.6666666666666667,
                           'p': 0.5182978723404256,
                           'r': 0.9340490797546013},
                          {'a': 0.9681505609844372,
                           'f1': 0.9708416169648775,
                           'p': 0.966358839050132,
                           'r': 0.9753661784287616},
                          {'a': 0.7455896007428041,
                           'f1': 0.7055873925501434,
                           'p': 0.5574419920769667,
                           'r': 0.9609756097560975},
                          {'a': 0.7292619203135206,
                           'f1': 0.6964481874771147,
                           'p': 0.539727582292849,
                           'r': 0.9814241486068112},
                          {'a': 0.7399790867898223,
                           'f1': 0.691225165562914,
                           'p': 0.5315085932527053,
                           'r': 0.9881656804733728},
                          {'a': 0.9515327257663628,
                           'f1': 0.9372654155495979,
                           'p': 1.0,
                           'r': 0.8819374369323916},
                          {'a': 0.8085387323943662,
                           'f1': 0.7014413177762525,
                           'p': 0.5566448801742919,
                           'r': 0.948051948051948},
                          {'a': 0.8998505231689088,
                           'f1': 0.8069164265129682,
                           'p': 0.7394366197183099,
                           'r': 0.8879492600422833},
                          {'a': 0.7064709806537692,
                           'f1': 0.6711509715994021,
                           'p': 0.5157955198161975,
                           'r': 0.960427807486631},
                          {'a': 0.7431657104286197,
                           'f1': 0.7060641174198531,
                           'p': 0.5519323671497585,
                           'r': 0.9796355841371919},
                          {'a': 0.7434146341463415,
                           'f1': 0.6837675350701403,
                           'p': 0.5354676710608914,
                           'r': 0.9456762749445676},
                          {'a': 0.7243314625288875,
                           'f1': 0.6835922697991663,
                           'p': 0.5259475218658892,
                           'r': 0.9761904761904762},
                          {'a': 0.730173775671406,
                           'f1': 0.7053140096618359,
                           'p': 0.5503500269251481,
                           'r': 0.9817483189241114},
                          {'a': 0.9309168443496801,
                           'f1': 0.9139213602550478,
                           'p': 0.9988385598141696,
                           'r': 0.8423114593535749},
                          {'a': 0.670131845841785,
                           'f1': 0.6764486446157673,
                           'p': 0.5130139569973595,
                           'r': 0.9927007299270073},
                          {'a': 0.8014857614527445,
                           'f1': 0.7280949689089881,
                           'p': 0.5930018416206262,
                           'r': 0.9428989751098097},
                          {'a': 0.8043654001616815,
                           'f1': 0.7215189873417721,
                           'p': 1.0,
                           'r': 0.5643564356435643},
                          {'a': 0.7193373685887225,
                           'f1': 0.6903339191564146,
                           'p': 0.5360262008733624,
                           'r': 0.9693978282329714},
                          {'a': 0.7080589526497335,
                           'f1': 0.6766238277179576,
                           'p': 0.5200213561131874,
                           'r': 0.9681908548707754},
                          {'a': 0.7203242617255357,
                           'f1': 0.7131828978622328,
                           'p': 0.5583449558344956,
                           'r': 0.9868529170090387}],
 'www.esquire.com;2010': [{'a': 0.9346173340091232,
                           'f1': 0.8348271446862996,
                           'p': 1.0,
                           'r': 0.7164835164835165},
                          {'a': 0.7797348110033644,
                           'f1': 0.6999191156645996,
                           'p': 1.0,
                           'r': 0.53836582330983},
                          {'a': 0.9638989169675091,
                           'f1': 0.7808764940239044,
                           'p': 1.0,
                           'r': 0.6405228758169934},
                          {'a': 0.9221207508878742,
                           'f1': 0.863978732831192,
                           'p': 0.9989754098360656,
                           'r': 0.7611241217798594},
                          {'a': 0.9253433208489388,
                           'f1': 0.8788001621402514,
                           'p': 1.0,
                           'r': 0.7838033261026753},
                          {'a': 0.9481931563799169,
                           'f1': 0.8667763157894737,
                           'p': 1.0,
                           'r': 0.7648766328011611},
                          {'a': 0.9485791610284168,
                           'f1': 0.8141809290953546,
                           'p': 1.0,
                           'r': 0.6865979381443299},
                          {'a': 0.9499289772727273,
                           'f1': 0.9118198874296435,
                           'p': 1.0,
                           'r': 0.8379310344827586},
                          {'a': 0.9291297550807712,
                           'f1': 0.8708452041785375,
                           'p': 1.0,
                           'r': 0.7712363330529857},
                          {'a': 0.9065871012164334,
                           'f1': 0.8578414250785888,
                           'p': 1.0,
                           'r': 0.7510703363914373},
                          {'a': 0.9147849462365591,
                           'f1': 0.8151603498542274,
                           'p': 0.9776223776223776,
                           'r': 0.699},
                          {'a': 0.9237913138486752,
                           'f1': 0.848451928299837,
                           'p': 1.0,
                           'r': 0.7367924528301887},
                          {'a': 0.9150480256136606,
                           'f1': 0.8850375505488157,
                           'p': 1.0,
                           'r': 0.7937823834196891},
                          {'a': 0.9463943841735801,
                           'f1': 0.7941176470588235,
                           'p': 1.0,
                           'r': 0.6585365853658537},
                          {'a': 0.7660303475281449,
                           'f1': 0.49631190727081137,
                           'p': 1.0,
                           'r': 0.33006306937631397},
                          {'a': 0.9638381668456857,
                           'f1': 0.7770419426048566,
                           'p': 0.9166666666666666,
                           'r': 0.6743295019157088},
                          {'a': 0.8408488063660478,
                           'f1': 0.4385026737967915,
                           'p': 0.3153846153846154,
                           'r': 0.7192982456140351},
                          {'a': 0.9118395026843741,
                           'f1': 0.8151658767772513,
                           'p': 0.9489655172413793,
                           'r': 0.7144340602284528},
                          {'a': 0.910455764075067,
                           'f1': 0.8397312859884837,
                           'p': 1.0,
                           'r': 0.7237386269644334},
                          {'a': 0.945724907063197,
                           'f1': 0.9274113357640039,
                           'p': 1.0,
                           'r': 0.8646477132262052},
                          {'a': 0.9508650519031142,
                           'f1': 0.7994350282485875,
                           'p': 1.0,
                           'r': 0.6658823529411765},
                          {'a': 0.956474428726877,
                           'f1': 0.8170731707317073,
                           'p': 1.0,
                           'r': 0.6907216494845361},
                          {'a': 0.9382239382239382,
                           'f1': 0.9364827312425564,
                           'p': 0.9995762711864407,
                           'r': 0.8808812546676624},
                          {'a': 0.9137479151775078,
                           'f1': 0.8700646087580762,
                           'p': 0.9869706840390879,
                           'r': 0.7779204107830552},
                          {'a': 0.9366423357664233,
                           'f1': 0.9121813031161473,
                           'p': 1.0,
                           'r': 0.8385416666666666}],
 'www.esquire.com;2015': [{'a': 0.9962800457840519,
                           'f1': 0.6953124999999999,
                           'p': 1.0,
                           'r': 0.5329341317365269},
                          {'a': 0.9908127871004031,
                           'f1': 0.7183908045977012,
                           'p': 0.9689922480620154,
                           'r': 0.5707762557077626},
                          {'a': 0.9943111785341804,
                           'f1': 0.6226415094339622,
                           'p': 0.6875,
                           'r': 0.5689655172413793},
                          {'a': 0.9760569024243638,
                           'f1': 0.6500732064421669,
                           'p': 0.9823008849557522,
                           'r': 0.48577680525164113},
                          {'a': 0.9717336405121616,
                           'f1': 0.7819548872180451,
                           'p': 0.9819742489270387,
                           'r': 0.6496308915388983},
                          {'a': 0.9599489795918368,
                           'f1': 0.7885047148630445,
                           'p': 1.0,
                           'r': 0.6508524833209784},
                          {'a': 0.983900643974241,
                           'f1': 0.7315950920245399,
                           'p': 0.9464285714285714,
                           'r': 0.59625},
                          {'a': 0.991984912776992,
                           'f1': 0.7310126582278481,
                           'p': 1.0,
                           'r': 0.5760598503740648},
                          {'a': 0.9764875970171968,
                           'f1': 0.8457314028956566,
                           'p': 0.994131455399061,
                           'r': 0.735881841876629},
                          {'a': 0.7979160374509212,
                           'f1': 0.6033552670579169,
                           'p': 1.0,
                           'r': 0.4320033955857385},
                          {'a': 0.9875337240673551,
                           'f1': 0.7476459510357816,
                           'p': 0.9341176470588235,
                           'r': 0.6232339089481946},
                          {'a': 0.9697059918124302,
                           'f1': 0.8421868941450175,
                           'p': 0.9881710646041856,
                           'r': 0.7337837837837838},
                          {'a': 0.989541995424623,
                           'f1': 0.7538461538461538,
                           'p': 1.0,
                           'r': 0.6049382716049383},
                          {'a': 0.9741717135732099,
                           'f1': 0.7720125786163522,
                           'p': 0.982982982982983,
                           'r': 0.6355987055016181},
                          {'a': 0.9799709328731038,
                           'f1': 0.7512690355329951,
                           'p': 1.0,
                           'r': 0.6016260162601627},
                          {'a': 0.9826589595375722,
                           'f1': 0.7859237536656891,
                           'p': 1.0,
                           'r': 0.6473429951690821},
                          {'a': 0.9890771600616161,
                           'f1': 0.7754318618042226,
                           'p': 1.0,
                           'r': 0.6332288401253918},
                          {'a': 0.9942106749505789,
                           'f1': 0.7421383647798743,
                           'p': 1.0,
                           'r': 0.59},
                          {'a': 0.9857518108731991,
                           'f1': 0.8171603677221654,
                           'p': 1.0,
                           'r': 0.690846286701209},
                          {'a': 0.9564857205144975,
                           'f1': 0.6772315653298836,
                           'p': 0.998093422306959,
                           'r': 0.5124816446402349},
                          {'a': 0.9936126244598911,
                           'f1': 0.7056277056277056,
                           'p': 1.0,
                           'r': 0.5451505016722408},
                          {'a': 0.9642882151109866,
                           'f1': 0.8755490483162518,
                           'p': 1.0,
                           'r': 0.7786458333333334},
                          {'a': 0.9439951823812801,
                           'f1': 0.6120381406436234,
                           'p': 0.9990272373540856,
                           'r': 0.4411512027491409},
                          {'a': 0.9583457304373698,
                           'f1': 0.7632850241545893,
                           'p': 0.9813664596273292,
                           'r': 0.6245059288537549},
                          {'a': 0.9908264328624776,
                           'f1': 0.8107202680067002,
                           'p': 1.0,
                           'r': 0.6816901408450704},
                          {'a': 0.9918893577121425,
                           'f1': 0.7510791366906474,
                           'p': 0.9775280898876404,
                           'r': 0.6098130841121495}],
 'www.forbes.com;2000': [{'a': 0.8303863785199738,
                          'f1': 0.7753686036426712,
                          'p': 0.945031712473573,
                          'r': 0.6573529411764706},
                         {'a': 0.8034188034188035,
                          'f1': 0.6993464052287581,
                          'p': 1.0,
                          'r': 0.5376884422110553},
                         {'a': 0.590282131661442,
                          'f1': 0.623017017594462,
                          'p': 0.9990749306197965,
                          'r': 0.4526404023470243},
                         {'a': 0.782394366197183,
                          'f1': 0.6967615309126594,
                          'p': 0.9943977591036415,
                          'r': 0.5362537764350453},
                         {'a': 0.9690721649484536,
                          'f1': 0.9189189189189189,
                          'p': 0.9902912621359223,
                          'r': 0.8571428571428571},
                         {'a': 0.9047005795235029,
                          'f1': 0.8800648298217179,
                          'p': 0.9345955249569707,
                          'r': 0.8315467075038285},
                         {'a': 0.9091880341880342,
                          'f1': 0.9170731707317074,
                          'p': 1.0,
                          'r': 0.8468468468468469},
                         {'a': 0.9722846441947566,
                          'f1': 0.9575200918484501,
                          'p': 0.9976076555023924,
                          'r': 0.9205298013245033},
                         {'a': 0.5246331236897275,
                          'f1': 0.33357825128581925,
                          'p': 0.9956140350877193,
                          'r': 0.2003530450132392},
                         {'a': 0.4484088717454195,
                          'f1': 0.4291417165668662,
                          'p': 1.0,
                          'r': 0.2731893265565438},
                         {'a': 0.8311048557353976,
                          'f1': 0.7241379310344828,
                          'p': 1.0,
                          'r': 0.5675675675675675},
                         {'a': 0.5359073359073359,
                          'f1': 0.5446969696969697,
                          'p': 1.0,
                          'r': 0.3742842269651223},
                         {'a': 0.8343419062027232,
                          'f1': 0.7622149837133552,
                          'p': 0.6789168278529981,
                          'r': 0.8688118811881188},
                         {'a': 0.8625261688764829,
                          'f1': 0.8122020972354623,
                          'p': 0.7593582887700535,
                          'r': 0.8729508196721312},
                         {'a': 0.9403131115459883,
                          'f1': 0.824207492795389,
                          'p': 1.0,
                          'r': 0.7009803921568627},
                         {'a': 0.9604456824512535,
                          'f1': 0.9621333333333333,
                          'p': 1.0,
                          'r': 0.9270298047276464},
                         {'a': 0.5666140073723012,
                          'f1': 0.3890126206384558,
                          'p': 0.9961977186311787,
                          'r': 0.24169741697416974},
                         {'a': 0.8874035989717224,
                          'f1': 0.893326838772528,
                          'p': 0.9434156378600823,
                          'r': 0.8482886216466234},
                         {'a': 0.861671469740634,
                          'f1': 0.8581560283687943,
                          'p': 0.8422273781902552,
                          'r': 0.8746987951807229},
                         {'a': 0.9573991031390134,
                          'f1': 0.8041237113402062,
                          'p': 0.9,
                          'r': 0.7267080745341615},
                         {'a': 0.8540145985401459,
                          'f1': 0.5833333333333334,
                          'p': 1.0,
                          'r': 0.4117647058823529},
                         {'a': 0.805316091954023,
                          'f1': 0.6372155287817938,
                          'p': 0.9444444444444444,
                          'r': 0.4808080808080808},
                         {'a': 0.7601776461880089,
                          'f1': 0.6872586872586873,
                          'p': 1.0,
                          'r': 0.5235294117647059},
                         {'a': 0.7995853489979268,
                          'f1': 0.6947368421052632,
                          'p': 0.9939759036144579,
                          'r': 0.5339805825242718},
                         {'a': 0.9746130030959752,
                          'f1': 0.9827441077441077,
                          'p': 0.9991442019683354,
                          'r': 0.9668737060041408},
                         {'a': 0.943067649028801,
                          'f1': 0.9377289377289377,
                          'p': 0.9785932721712538,
                          'r': 0.90014064697609},
                         {'a': 0.7785817655571635,
                          'f1': 0.5628571428571428,
                          'p': 0.9949494949494949,
                          'r': 0.39243027888446214},
                         {'a': 0.7691477885652643,
                          'f1': 0.7967711301044634,
                          'p': 1.0,
                          'r': 0.6621941594317285}],
 'www.forbes.com;2005': [{'a': 0.9793627805937726,
                          'f1': 0.8446866485013624,
                          'p': 1.0,
                          'r': 0.7311320754716981},
                         {'a': 0.9558127301420305,
                          'f1': 0.9254658385093169,
                          'p': 0.9961795606494747,
                          'r': 0.8641259320629661},
                         {'a': 0.9684620836286322,
                          'f1': 0.8571428571428571,
                          'p': 1.0,
                          'r': 0.75},
                         {'a': 0.9665127020785219,
                          'f1': 0.8971631205673758,
                          'p': 1.0,
                          'r': 0.8135048231511254},
                         {'a': 0.9735849056603774,
                          'f1': 0.9315960912052117,
                          'p': 1.0,
                          'r': 0.8719512195121951},
                         {'a': 0.9721510883482715,
                          'f1': 0.9295546558704454,
                          'p': 1.0,
                          'r': 0.8683812405446294},
                         {'a': 0.9735213204951857,
                          'f1': 0.8576709796672828,
                          'p': 1.0,
                          'r': 0.7508090614886731},
                         {'a': 0.9676314970432618,
                          'f1': 0.9089316987740806,
                          'p': 1.0,
                          'r': 0.8330658105939005},
                         {'a': 0.9707207207207207,
                          'f1': 0.9484126984126984,
                          'p': 1.0,
                          'r': 0.9018867924528302},
                         {'a': 0.3632946001367054,
                          'f1': 0.06240563663814796,
                          'p': 0.03237597911227154,
                          'r': 0.8611111111111112},
                         {'a': 0.9572057898049088,
                          'f1': 0.7848101265822784,
                          'p': 0.9018181818181819,
                          'r': 0.6946778711484594},
                         {'a': 0.9766102914717524,
                          'f1': 0.8712871287128713,
                          'p': 1.0,
                          'r': 0.7719298245614035},
                         {'a': 0.9791192103264996,
                          'f1': 0.8208469055374593,
                          'p': 1.0,
                          'r': 0.6961325966850829},
                         {'a': 0.9637952559300874,
                          'f1': 0.9131736526946108,
                          'p': 1.0,
                          'r': 0.8402203856749312},
                         {'a': 0.9633767846058349,
                          'f1': 0.9086687306501547,
                          'p': 1.0,
                          'r': 0.8326241134751773},
                         {'a': 0.9724086502609992,
                          'f1': 0.8221153846153847,
                          'p': 1.0,
                          'r': 0.6979591836734694},
                         {'a': 0.9671484888304862,
                          'f1': 0.9196141479099678,
                          'p': 1.0,
                          'r': 0.8511904761904762},
                         {'a': 0.9684918935454268,
                          'f1': 0.9372333942717855,
                          'p': 1.0,
                          'r': 0.8818807339449541},
                         {'a': 0.9581077229980052,
                          'f1': 0.9119233073696824,
                          'p': 1.0,
                          'r': 0.8381057268722467},
                         {'a': 0.9697617593158216,
                          'f1': 0.9325153374233129,
                          'p': 1.0,
                          'r': 0.8735632183908046},
                         {'a': 0.9543435340572557,
                          'f1': 0.905273937532002,
                          'p': 0.9932584269662922,
                          'r': 0.8316086547507056},
                         {'a': 0.9660590823381521,
                          'f1': 0.8957528957528956,
                          'p': 1.0,
                          'r': 0.8111888111888111},
                         {'a': 0.9642306506321308,
                          'f1': 0.9056910569105691,
                          'p': 1.0,
                          'r': 0.8276374442793462},
                         {'a': 0.9477208344063868,
                          'f1': 0.9189620758483035,
                          'p': 1.0,
                          'r': 0.8500738552437223},
                         {'a': 0.9615692554043235,
                          'f1': 0.9262295081967213,
                          'p': 1.0,
                          'r': 0.8625954198473282}],
 'www.forbes.com;2010': [{'a': 0.9427609427609428,
                          'f1': 0.7763157894736843,
                          'p': 1.0,
                          'r': 0.6344086021505376},
                         {'a': 0.8760211436809227,
                          'f1': 0.8512110726643599,
                          'p': 1.0,
                          'r': 0.7409638554216867},
                         {'a': 0.8811096433289299,
                          'f1': 0.7560975609756097,
                          'p': 1.0,
                          'r': 0.6078431372549019},
                         {'a': 0.92909211398277,
                          'f1': 0.8790960451977402,
                          'p': 1.0,
                          'r': 0.7842741935483871},
                         {'a': 0.72544080604534,
                          'f1': 0.6132008516678495,
                          'p': 1.0,
                          'r': 0.4421699078812692},
                         {'a': 0.8275418275418276,
                          'f1': 0.6641604010025062,
                          'p': 1.0,
                          'r': 0.4971857410881801},
                         {'a': 0.9052504526252263,
                          'f1': 0.7936925098554534,
                          'p': 1.0,
                          'r': 0.6579520697167756},
                         {'a': 0.8332403792526492,
                          'f1': 0.7463952502120441,
                          'p': 1.0,
                          'r': 0.5953991880920162},
                         {'a': 0.799404761904762,
                          'f1': 0.6340933767643865,
                          'p': 1.0,
                          'r': 0.4642289348171701},
                         {'a': 0.8348402652200121,
                          'f1': 0.5898203592814371,
                          'p': 1.0,
                          'r': 0.4182590233545648},
                         {'a': 0.871380846325167,
                          'f1': 0.8232593726090284,
                          'p': 1.0,
                          'r': 0.6996098829648895},
                         {'a': 0.768370607028754,
                          'f1': 0.6539379474940334,
                          'p': 1.0,
                          'r': 0.4858156028368794},
                         {'a': 0.9394329896907216,
                          'f1': 0.9,
                          'p': 1.0,
                          'r': 0.8181818181818182},
                         {'a': 0.8744939271255061,
                          'f1': 0.8094820017559262,
                          'p': 0.9978354978354979,
                          'r': 0.6809453471196455},
                         {'a': 0.891973445986723,
                          'f1': 0.807733619763695,
                          'p': 1.0,
                          'r': 0.6774774774774774},
                         {'a': 0.7532649253731343,
                          'f1': 0.5977186311787072,
                          'p': 1.0,
                          'r': 0.4262472885032538},
                         {'a': 0.8991486574983628,
                          'f1': 0.8144578313253013,
                          'p': 1.0,
                          'r': 0.6869918699186992},
                         {'a': 0.8889636608344549,
                          'f1': 0.8014440433212997,
                          'p': 1.0,
                          'r': 0.6686746987951807},
                         {'a': 0.830264672036824,
                          'f1': 0.5668135095447872,
                          'p': 1.0,
                          'r': 0.39549180327868855},
                         {'a': 0.931582162492364,
                          'f1': 0.8766519823788547,
                          'p': 1.0,
                          'r': 0.7803921568627451},
                         {'a': 0.8647778493238892,
                          'f1': 0.7789473684210527,
                          'p': 1.0,
                          'r': 0.6379310344827587},
                         {'a': 0.8860011813349085,
                          'f1': 0.26615969581749055,
                          'p': 0.24475524475524477,
                          'r': 0.2916666666666667},
                         {'a': 0.960919540229885,
                          'f1': 0.8425925925925926,
                          'p': 1.0,
                          'r': 0.728},
                         {'a': 0.7646137787056367,
                          'f1': 0.5881278538812785,
                          'p': 1.0,
                          'r': 0.4165588615782665},
                         {'a': 0.9243964421855146,
                          'f1': 0.8874172185430463,
                          'p': 0.997872340425532,
                          'r': 0.7989778534923339}],
 'www.forbes.com;2015': [{'a': 0.9365008880994672,
                          'f1': 0.9004871259568545,
                          'p': 0.9984567901234568,
                          'r': 0.8200253485424588},
                         {'a': 0.9032418952618454,
                          'f1': 0.787280701754386,
                          'p': 0.8271889400921659,
                          'r': 0.7510460251046025},
                         {'a': 0.9362586605080832,
                          'f1': 0.8380281690140845,
                          'p': 1.0,
                          'r': 0.7212121212121212},
                         {'a': 0.9215399610136452,
                          'f1': 0.8328141225337489,
                          'p': 0.9502369668246445,
                          'r': 0.7412199630314233},
                         {'a': 0.9145673603504929,
                          'f1': 0.8397260273972602,
                          'p': 0.9668769716088328,
                          'r': 0.7421307506053268},
                         {'a': 0.922633744855967,
                          'f1': 0.8705234159779615,
                          'p': 0.9708141321044547,
                          'r': 0.7890137328339576},
                         {'a': 0.9355492501013376,
                          'f1': 0.9121061359867331,
                          'p': 0.9903961584633854,
                          'r': 0.8452868852459017},
                         {'a': 0.9029615626969124,
                          'f1': 0.8363443145589797,
                          'p': 0.9936868686868687,
                          'r': 0.7220183486238532},
                         {'a': 0.9293148308759757,
                          'f1': 0.8317853457172343,
                          'p': 0.9482352941176471,
                          'r': 0.7408088235294118},
                         {'a': 0.8809116809116809,
                          'f1': 0.6313932980599647,
                          'p': 0.5718849840255591,
                          'r': 0.7047244094488189},
                         {'a': 0.9453213077790305,
                          'f1': 0.7913978494623656,
                          'p': 1.0,
                          'r': 0.6548042704626335},
                         {'a': 0.893961179007908,
                          'f1': 0.8516842634489694,
                          'p': 0.981460023174971,
                          'r': 0.7522202486678508},
                         {'a': 0.6261583267143236,
                          'f1': 0.5878575598365441,
                          'p': 0.42417860151642794,
                          'r': 0.9572243346007605},
                         {'a': 0.9178931061192874,
                          'f1': 0.8806306306306306,
                          'p': 1.0,
                          'r': 0.7867203219315896},
                         {'a': 0.9328013439731205,
                          'f1': 0.8703403565640195,
                          'p': 0.9853211009174312,
                          'r': 0.7793904208998549},
                         {'a': 0.9234042553191489,
                          'f1': 0.8376753507014029,
                          'p': 0.9372197309417041,
                          'r': 0.7572463768115942},
                         {'a': 0.9119669876203577,
                          'f1': 0.817923186344239,
                          'p': 0.9965337954939342,
                          'r': 0.6936067551266586},
                         {'a': 0.9446854663774403,
                          'f1': 0.8197879858657243,
                          'p': 1.0,
                          'r': 0.6946107784431138},
                         {'a': 0.8281726995202792,
                          'f1': 0.49872773536895676,
                          'p': 0.9702970297029703,
                          'r': 0.3356164383561644},
                         {'a': 0.9091597274791824,
                          'f1': 0.8675496688741723,
                          'p': 0.966789667896679,
                          'r': 0.7867867867867868},
                         {'a': 0.9475457170356112,
                          'f1': 0.7824351297405189,
                          'p': 0.9702970297029703,
                          'r': 0.6555183946488294},
                         {'a': 0.9291196388261851,
                          'f1': 0.8697095435684647,
                          'p': 1.0,
                          'r': 0.7694566813509545},
                         {'a': 0.7276136896390061,
                          'f1': 0.16881258941344776,
                          'p': 0.10154905335628227,
                          'r': 0.5},
                         {'a': 0.925293894577171,
                          'f1': 0.8932249322493225,
                          'p': 0.976303317535545,
                          'r': 0.8231768231768232},
                         {'a': 0.9201661282879557,
                          'f1': 0.8571428571428572,
                          'p': 0.9026086956521739,
                          'r': 0.8160377358490566}],
 'www.foxnews.com;2000': [{'a': 0.9600840336134454,
                           'f1': 0.9304029304029304,
                           'p': 0.9719387755102041,
                           'r': 0.892271662763466},
                          {'a': 0.942347288949897,
                           'f1': 0.8099547511312217,
                           'p': 0.927461139896373,
                           'r': 0.7188755020080321},
                          {'a': 0.9672988881621976,
                           'f1': 0.9517374517374517,
                           'p': 0.9801192842942346,
                           'r': 0.924953095684803},
                          {'a': 0.9288888888888889,
                           'f1': 0.9132007233273057,
                           'p': 0.9317343173431735,
                           'r': 0.8953900709219859},
                          {'a': 0.9309967141292442,
                           'f1': 0.823529411764706,
                           'p': 0.9245283018867925,
                           'r': 0.7424242424242424},
                          {'a': 0.5391111111111111,
                           'f1': 0.41904761904761895,
                           'p': 0.949238578680203,
                           'r': 0.26887131560028754},
                          {'a': 0.669826224328594,
                           'f1': 0.6412017167381975,
                           'p': 0.49209486166007904,
                           'r': 0.9199507389162561},
                          {'a': 0.9034021871202916,
                           'f1': 0.8555858310626704,
                           'p': 0.9057692307692308,
                           'r': 0.810671256454389},
                          {'a': 0.5517985611510792,
                           'f1': 0.3963178294573643,
                           'p': 1.0,
                           'r': 0.24712990936555893},
                          {'a': 0.784608580274215,
                           'f1': 0.6528866714183892,
                           'p': 0.5044052863436124,
                           'r': 0.9252525252525252},
                          {'a': 0.9619834710743802,
                           'f1': 0.8872549019607843,
                           'p': 0.9627659574468085,
                           'r': 0.8227272727272728},
                          {'a': 0.9275123558484349,
                           'f1': 0.8825622775800711,
                           'p': 0.9668615984405458,
                           'r': 0.8117839607201309},
                          {'a': 0.9364723467862481,
                           'f1': 0.864,
                           'p': 0.9407665505226481,
                           'r': 0.7988165680473372},
                          {'a': 0.921907394609537,
                           'f1': 0.8599752168525403,
                           'p': 0.9278074866310161,
                           'r': 0.8013856812933026},
                          {'a': 0.7894736842105263,
                           'f1': 0,
                           'p': 0.0,
                           'r': 0.0},
                          {'a': 0.8938700823421775,
                           'f1': 0.8764643237486687,
                           'p': 0.8974918211559433,
                           'r': 0.8563995837669095},
                          {'a': 0.6889763779527559,
                           'f1': 0.6709139916687086,
                           'p': 0.5164089023010184,
                           'r': 0.9573426573426573},
                          {'a': 0.8617310832879695,
                           'f1': 0.8211267605633804,
                           'p': 0.9024767801857585,
                           'r': 0.7532299741602068},
                          {'a': 0.9519832985386222,
                           'f1': 0.9175627240143369,
                           'p': 0.9746192893401016,
                           'r': 0.8668171557562077},
                          {'a': 0.4395543560999239,
                           'f1': 0.5710956945400625,
                           'p': 1.0,
                           'r': 0.39967385664517086},
                          {'a': 0.8856559469116896,
                           'f1': 0.8690058479532163,
                           'p': 0.9229813664596274,
                           'r': 0.8209944751381215},
                          {'a': 0.6235827664399093,
                           'f1': 0.6656596173212487,
                           'p': 0.5225296442687747,
                           'r': 0.9167822468793343},
                          {'a': 0.5071530758226037,
                           'f1': 0.4263114071606994,
                           'p': 0.9029982363315696,
                           'r': 0.2790190735694823},
                          {'a': 0.9578270192994996,
                           'f1': 0.9222661396574441,
                           'p': 0.9459459459459459,
                           'r': 0.8997429305912596},
                          {'a': 0.7453245324532454,
                           'f1': 0.4961915125136018,
                           'p': 1.0,
                           'r': 0.3299565846599132}],
 'www.foxnews.com;2005': [{'a': 0.6880616174582799,
                           'f1': 0.39627329192546584,
                           'p': 0.996875,
                           'r': 0.24728682170542635},
                          {'a': 0.8248344370860927,
                           'f1': 0.46403242147922996,
                           'p': 1.0,
                           'r': 0.3021108179419525},
                          {'a': 0.8542776559072391,
                           'f1': 0.6676197283774125,
                           'p': 1.0,
                           'r': 0.5010729613733905},
                          {'a': 0.8399228543876567,
                           'f1': 0.6332842415316642,
                           'p': 1.0,
                           'r': 0.46336206896551724},
                          {'a': 0.8785112359550562,
                           'f1': 0.6103603603603603,
                           'p': 1.0,
                           'r': 0.4392220421393841},
                          {'a': 0.9488549618320611,
                           'f1': 0.7781456953642385,
                           'p': 0.9957627118644068,
                           'r': 0.6385869565217391},
                          {'a': 0.7437912606098711,
                           'f1': 0.4765574823378292,
                           'p': 1.0,
                           'r': 0.3128161888701518},
                          {'a': 0.956738768718802,
                           'f1': 0.8391089108910892,
                           'p': 1.0,
                           'r': 0.7228144989339019},
                          {'a': 0.8563197253892363,
                           'f1': 0.8810152284263959,
                           'p': 1.0,
                           'r': 0.787334422064961},
                          {'a': 0.9310839913854989,
                           'f1': 0.5914893617021277,
                           'p': 1.0,
                           'r': 0.4199395770392749},
                          {'a': 0.8295792605184871,
                           'f1': 0.5928934010152285,
                           'p': 1.0,
                           'r': 0.4213564213564214},
                          {'a': 0.9512195121951219,
                           'f1': 0.8247422680412371,
                           'p': 1.0,
                           'r': 0.7017543859649122},
                          {'a': 0.8676780446691951,
                           'f1': 0.5589887640449438,
                           'p': 1.0,
                           'r': 0.38791423001949316},
                          {'a': 0.9077522737115634,
                           'f1': 0.5515789473684211,
                           'p': 1.0,
                           'r': 0.3808139534883721},
                          {'a': 0.8716216216216216,
                           'f1': 0.7250172294968986,
                           'p': 1.0,
                           'r': 0.5686486486486486},
                          {'a': 0.8850500484339684,
                           'f1': 0.7427745664739885,
                           'p': 1.0,
                           'r': 0.5908045977011495},
                          {'a': 0.8043065231158961,
                           'f1': 0.48756218905472637,
                           'p': 1.0,
                           'r': 0.3223684210526316},
                          {'a': 0.950974824910089,
                           'f1': 0.9465648854961832,
                           'p': 1.0,
                           'r': 0.8985507246376812},
                          {'a': 0.9013592233009708,
                           'f1': 0.5780730897009967,
                           'p': 1.0,
                           'r': 0.40654205607476634},
                          {'a': 0.8660714285714286,
                           'f1': 0.612736660929432,
                           'p': 0.9971988795518207,
                           'r': 0.4422360248447205},
                          {'a': 0.7598978288633461,
                           'f1': 0.5943905070118662,
                           'p': 1.0,
                           'r': 0.42287029930928627},
                          {'a': 0.880038083148207,
                           'f1': 0.7374999999999999,
                           'p': 1.0,
                           'r': 0.5841584158415841},
                          {'a': 0.8610858356081286,
                           'f1': 0.552734375,
                           'p': 1.0,
                           'r': 0.38191632928475033},
                          {'a': 0.799636803874092,
                           'f1': 0.4283246977547496,
                           'p': 1.0,
                           'r': 0.2725274725274725},
                          {'a': 0.8341918866709594,
                           'f1': 0.5850120870265915,
                           'p': 1.0,
                           'r': 0.4134396355353075}],
 'www.foxnews.com;2010': [{'a': 0.9653776978417267,
                           'f1': 0.7673716012084592,
                           'p': 0.9477611940298507,
                           'r': 0.6446700507614214},
                          {'a': 0.9319708846584547,
                           'f1': 0.8762098828323994,
                           'p': 1.0,
                           'r': 0.7796917497733454},
                          {'a': 0.5895837970175829,
                           'f1': 0.1564501372369625,
                           'p': 0.1024565608148592,
                           'r': 0.3307543520309478},
                          {'a': 0.967741935483871,
                           'f1': 0.7279693486590039,
                           'p': 1.0,
                           'r': 0.572289156626506},
                          {'a': 0.9438202247191011,
                           'f1': 0.8416751787538305,
                           'p': 0.9856459330143541,
                           'r': 0.7344028520499108},
                          {'a': 0.9300877441268044,
                           'f1': 0.8662696264212235,
                           'p': 1.0,
                           'r': 0.7640878701050621},
                          {'a': 0.9392059553349876,
                           'f1': 0.830155979202773,
                           'p': 1.0,
                           'r': 0.7096296296296296},
                          {'a': 0.9322242760320394,
                           'f1': 0.835820895522388,
                           'p': 1.0,
                           'r': 0.717948717948718},
                          {'a': 0.9450628366247756,
                           'f1': 0.8298109010011124,
                           'p': 0.9815789473684211,
                           'r': 0.7186897880539499},
                          {'a': 0.9287733182589033,
                           'f1': 0.851063829787234,
                           'p': 1.0,
                           'r': 0.7407407407407407},
                          {'a': 0.9482876712328767,
                           'f1': 0.788218793828892,
                           'p': 1.0,
                           'r': 0.6504629629629629},
                          {'a': 0.9593064401981599,
                           'f1': 0.8073701842546064,
                           'p': 1.0,
                           'r': 0.6769662921348315},
                          {'a': 0.9402577118313159,
                           'f1': 0.7627906976744185,
                           'p': 1.0,
                           'r': 0.6165413533834586},
                          {'a': 0.9521594684385382,
                           'f1': 0.9222462203023758,
                           'p': 1.0,
                           'r': 0.8557114228456913},
                          {'a': 0.9442724458204335,
                           'f1': 0.8815789473684211,
                           'p': 1.0,
                           'r': 0.788235294117647},
                          {'a': 0.9681200187529302,
                           'f1': 0.7536231884057971,
                           'p': 1.0,
                           'r': 0.6046511627906976},
                          {'a': 0.9273439855290926,
                           'f1': 0.8218773096821876,
                           'p': 1.0,
                           'r': 0.6976160602258469},
                          {'a': 0.6764936081398383,
                           'f1': 0.42325581395348844,
                           'p': 1.0,
                           'r': 0.26843657817109146},
                          {'a': 0.9613186813186814,
                           'f1': 0.7499999999999999,
                           'p': 1.0,
                           'r': 0.6},
                          {'a': 0.9436220472440945,
                           'f1': 0.9025585193249864,
                           'p': 0.9940047961630696,
                           'r': 0.8265204386839482},
                          {'a': 0.9545642296571665,
                           'f1': 0.8286604361370716,
                           'p': 1.0,
                           'r': 0.7074468085106383},
                          {'a': 0.9436713055003313,
                           'f1': 0.8032407407407407,
                           'p': 1.0,
                           'r': 0.6711798839458414},
                          {'a': 0.9277333333333333,
                           'f1': 0.9045438534695315,
                           'p': 1.0,
                           'r': 0.8257234726688103},
                          {'a': 0.9587061252580867,
                           'f1': 0.8176291793313069,
                           'p': 1.0,
                           'r': 0.6915167095115681},
                          {'a': 0.9327091866588648,
                           'f1': 0.8985890652557319,
                           'p': 1.0,
                           'r': 0.8158526821457166}],
 'www.foxnews.com;2015': [{'a': 0.9051359516616314,
                           'f1': 0.9191138588356518,
                           'p': 1.0,
                           'r': 0.8503336510962822},
                          {'a': 0.8552253116011506,
                           'f1': 0.7101727447216891,
                           'p': 1.0,
                           'r': 0.5505952380952381},
                          {'a': 0.9160516605166051,
                           'f1': 0.7392550143266474,
                           'p': 1.0,
                           'r': 0.5863636363636363},
                          {'a': 0.9129158512720157,
                           'f1': 0.8258317025440314,
                           'p': 1.0,
                           'r': 0.7033333333333334},
                          {'a': 0.9149888143176734,
                           'f1': 0.8642857142857143,
                           'p': 1.0,
                           'r': 0.7610062893081762},
                          {'a': 0.9223529411764706,
                           'f1': 0.8081395348837209,
                           'p': 1.0,
                           'r': 0.6780487804878049},
                          {'a': 0.9106957424714434,
                           'f1': 0.8401486988847583,
                           'p': 0.9617021276595744,
                           'r': 0.7458745874587459},
                          {'a': 0.9127906976744186,
                           'f1': 0.817391304347826,
                           'p': 1.0,
                           'r': 0.6911764705882353},
                          {'a': 0.9160883280757098,
                           'f1': 0.9156626506024095,
                           'p': 0.971736204576043,
                           'r': 0.8657074340527577},
                          {'a': 0.9453044375644994,
                           'f1': 0.7557603686635943,
                           'p': 0.9879518072289156,
                           'r': 0.6119402985074627},
                          {'a': 0.923931623931624,
                           'f1': 0.8894409937888199,
                           'p': 0.9944444444444445,
                           'r': 0.8044943820224719},
                          {'a': 0.9222614840989399,
                           'f1': 0.8653061224489795,
                           'p': 1.0,
                           'r': 0.762589928057554},
                          {'a': 0.8947368421052632,
                           'f1': 0.8706240487062405,
                           'p': 0.9470198675496688,
                           'r': 0.8056338028169014},
                          {'a': 0.9029911075181891,
                           'f1': 0.8846153846153847,
                           'p': 0.9484536082474226,
                           'r': 0.8288288288288288},
                          {'a': 0.664783427495292,
                           'f1': 0.6270949720670391,
                           'p': 1.0,
                           'r': 0.45676500508647},
                          {'a': 0.880080280983442,
                           'f1': 0.896938335489435,
                           'p': 0.9701492537313433,
                           'r': 0.8340016038492382},
                          {'a': 0.9053708439897699,
                           'f1': 0.778443113772455,
                           'p': 1.0,
                           'r': 0.6372549019607843},
                          {'a': 0.9132446500867554,
                           'f1': 0.9291115311909264,
                           'p': 0.9859578736208626,
                           'r': 0.8784629133154602},
                          {'a': 0.9028077753779697,
                           'f1': 0.884318766066838,
                           'p': 0.9520295202952029,
                           'r': 0.8256},
                          {'a': 0.8988218988218988,
                           'f1': 0.9050715214564369,
                           'p': 0.9613259668508287,
                           'r': 0.855036855036855},
                          {'a': 0.8882521489971347,
                           'f1': 0.8768161718256474,
                           'p': 1.0,
                           'r': 0.7806524184476941},
                          {'a': 0.9101401483924155,
                           'f1': 0.8919722497522299,
                           'p': 0.9933774834437086,
                           'r': 0.8093525179856115},
                          {'a': 0.9297445255474452,
                           'f1': 0.8888888888888888,
                           'p': 0.9903536977491961,
                           'r': 0.806282722513089},
                          {'a': 0.918673087212413,
                           'f1': 0.9186295503211991,
                           'p': 0.9988358556461001,
                           'r': 0.8503468780971258},
                          {'a': 0.8640308582449373,
                           'f1': 0.7692307692307692,
                           'p': 0.8303886925795053,
                           'r': 0.7164634146341463},
                          {'a': 0.8988235294117647,
                           'f1': 0.8848728246318608,
                           'p': 0.9880418535127056,
                           'r': 0.8012121212121213}],
 'www.latimes.com;2000': [{'a': 0.9631710362047441,
                           'f1': 0.9702170620898536,
                           'p': 1.0,
                           'r': 0.942156862745098},
                          {'a': 0.9692982456140351,
                           'f1': 0.9770114942528736,
                           'p': 0.9991603694374476,
                           'r': 0.9558232931726908},
                          {'a': 0.8843243243243243,
                           'f1': 0.8065099457504521,
                           'p': 0.7533783783783784,
                           'r': 0.867704280155642},
                          {'a': 0.586791350087668,
                           'f1': 0.6683864915572233,
                           'p': 0.5166787527193618,
                           'r': 0.9462151394422311},
                          {'a': 0.9768353528153956,
                           'f1': 0.9850333870596362,
                           'p': 1.0,
                           'r': 0.970508166969147},
                          {'a': 0.9508670520231214,
                           'f1': 0.9593884376493073,
                           'p': 0.9990049751243781,
                           'r': 0.9227941176470589},
                          {'a': 0.9480851063829787,
                           'f1': 0.9576976421636615,
                           'p': 1.0,
                           'r': 0.9188290086493679},
                          {'a': 0.6155627605372858,
                           'f1': 0.6171586715867159,
                           'p': 0.4482412060301508,
                           'r': 0.9903774981495189},
                          {'a': 0.9587509637625289,
                           'f1': 0.9621238938053098,
                           'p': 0.9926953981008035,
                           'r': 0.9333791208791209},
                          {'a': 0.9217479674796748,
                           'f1': 0.8960863697705803,
                           'p': 0.8759894459102903,
                           'r': 0.9171270718232044},
                          {'a': 0.9888304862023654,
                           'f1': 0.9886058981233244,
                           'p': 0.9839893262174784,
                           'r': 0.9932659932659933},
                          {'a': 0.976868923902112,
                           'f1': 0.9853720585117659,
                           'p': 0.9987107864202837,
                           'r': 0.9723849372384937},
                          {'a': 0.5878859857482185,
                           'f1': 0.6235081374321881,
                           'p': 0.46195069667738475,
                           'r': 0.9588431590656284},
                          {'a': 0.9581375480563862,
                           'f1': 0.970605878824235,
                           'p': 0.9993823347745522,
                           'r': 0.9434402332361516},
                          {'a': 0.9673340358271865,
                           'f1': 0.9756480754124116,
                           'p': 1.0,
                           'r': 0.9524539877300614},
                          {'a': 0.9689880304678999,
                           'f1': 0.9768386834620074,
                           'p': 0.999168744804655,
                           'r': 0.9554848966613673},
                          {'a': 0.547372184483375,
                           'f1': 0.6681520314547837,
                           'p': 0.5036554040703418,
                           'r': 0.9922148695990658},
                          {'a': 0.9588285229202037,
                           'f1': 0.9667921944539541,
                           'p': 1.0,
                           'r': 0.9357190192180251},
                          {'a': 0.9155844155844156,
                           'f1': 0.9444584066348328,
                           'p': 0.9152459814905017,
                           'r': 0.9755970924195223},
                          {'a': 0.9590093936806149,
                           'f1': 0.9711884753901561,
                           'p': 0.9993823347745522,
                           'r': 0.9445417396380619},
                          {'a': 0.9416740872662511,
                           'f1': 0.9591518553164952,
                           'p': 0.9558732131758857,
                           'r': 0.9624530663329162},
                          {'a': 0.593610443146685,
                           'f1': 0.6662905500705218,
                           'p': 0.5023394300297745,
                           'r': 0.9891122278056952},
                          {'a': 0.9425493716337523,
                           'f1': 0.9293598233995586,
                           'p': 0.9976303317535545,
                           'r': 0.8698347107438017},
                          {'a': 0.9481915933528837,
                           'f1': 0.96262341325811,
                           'p': 0.9578947368421052,
                           'r': 0.9673990077958894},
                          {'a': 0.5512445095168375,
                           'f1': 0.6666666666666666,
                           'p': 0.5012264922322158,
                           'r': 0.9951298701298701}],
 'www.latimes.com;2005': [{'a': 0.948905109489051,
                           'f1': 0.9319860085503303,
                           'p': 0.9844006568144499,
                           'r': 0.8848708487084871},
                          {'a': 0.9635167464114832,
                           'f1': 0.9160935350756534,
                           'p': 0.9970059880239521,
                           'r': 0.8473282442748091},
                          {'a': 0.9582608695652174,
                           'f1': 0.9414062499999999,
                           'p': 0.9796747967479674,
                           'r': 0.9060150375939849},
                          {'a': 0.7890421170331718,
                           'f1': 0.7477718360071302,
                           'p': 0.6313017306245298,
                           'r': 0.9169398907103825},
                          {'a': 0.9575688073394495,
                           'f1': 0.927734375,
                           'p': 0.9978991596638656,
                           'r': 0.8667883211678832},
                          {'a': 0.9576115001842979,
                           'f1': 0.9675416313858313,
                           'p': 0.9867587795048935,
                           'r': 0.9490586932447398},
                          {'a': 0.9471264367816092,
                           'f1': 0.8959276018099547,
                           'p': 0.9428571428571428,
                           'r': 0.853448275862069},
                          {'a': 0.955537258130918,
                           'f1': 0.9455645161290323,
                           'p': 1.0,
                           'r': 0.8967495219885278},
                          {'a': 0.9694876223373633,
                           'f1': 0.9689877121123465,
                           'p': 1.0,
                           'r': 0.9398410896708286},
                          {'a': 0.9604596147347076,
                           'f1': 0.9632883589582679,
                           'p': 1.0,
                           'r': 0.9291767554479419},
                          {'a': 0.9369823550594166,
                           'f1': 0.9247958745165448,
                           'p': 0.9380993897122929,
                           'r': 0.911864406779661},
                          {'a': 0.957493649449619,
                           'f1': 0.9677087353660105,
                           'p': 0.9902580305423907,
                           'r': 0.9461635220125786},
                          {'a': 0.9594400574300072,
                           'f1': 0.9376723662437948,
                           'p': 0.9770114942528736,
                           'r': 0.9013785790031813},
                          {'a': 0.8977384464110127,
                           'f1': 0.8695652173913043,
                           'p': 0.8673894912427023,
                           'r': 0.8717518860016764},
                          {'a': 0.9604658289917254,
                           'f1': 0.9502506748939452,
                           'p': 0.9959579628132579,
                           'r': 0.9085545722713865},
                          {'a': 0.952431289640592,
                           'f1': 0.92776886035313,
                           'p': 0.9780033840947546,
                           'r': 0.8824427480916031},
                          {'a': 0.9533881707794751,
                           'f1': 0.9538222739619713,
                           'p': 0.9808459696727854,
                           'r': 0.9282477341389728},
                          {'a': 0.9487951807228916,
                           'f1': 0.9254385964912281,
                           'p': 0.9693721286370597,
                           'r': 0.8853146853146853},
                          {'a': 0.9546485260770975,
                           'f1': 0.940119760479042,
                           'p': 0.9751552795031055,
                           'r': 0.9075144508670521},
                          {'a': 0.9646723646723647,
                           'f1': 0.8702928870292888,
                           'p': 1.0,
                           'r': 0.7703703703703704},
                          {'a': 0.971253534401508,
                           'f1': 0.9623689080814312,
                           'p': 1.0,
                           'r': 0.9274673008323424},
                          {'a': 0.9659307713273372,
                           'f1': 0.9713499885399954,
                           'p': 0.996238834038552,
                           'r': 0.9476744186046512},
                          {'a': 0.8859364873622813,
                           'f1': 0.9097435897435897,
                           'p': 0.8751850024666995,
                           'r': 0.9471436198611852},
                          {'a': 0.9604497867390461,
                           'f1': 0.9536784741144414,
                           'p': 0.9803921568627451,
                           'r': 0.9283819628647215},
                          {'a': 0.9742086752637749,
                           'f1': 0.8986175115207373,
                           'p': 1.0,
                           'r': 0.8158995815899581}],
 'www.latimes.com;2010': [{'a': 0.8955705485479613,
                           'f1': 0.7965714285714285,
                           'p': 0.8142523364485982,
                           'r': 0.7796420581655481},
                          {'a': 0.8341388959552277,
                           'f1': 0.6756218905472636,
                           'p': 0.6057091882247992,
                           'r': 0.7637795275590551},
                          {'a': 0.9462897526501767,
                           'f1': 0.8025974025974025,
                           'p': 0.9142011834319527,
                           'r': 0.7152777777777778},
                          {'a': 0.8927089508002372,
                           'f1': 0.7338235294117647,
                           'p': 0.7414561664190193,
                           'r': 0.7263464337700145},
                          {'a': 0.9135488557936796,
                           'f1': 0.9086722947045281,
                           'p': 0.99915611814346,
                           'r': 0.8332160450387052},
                          {'a': 0.9060402684563759,
                           'f1': 0.8895078922934077,
                           'p': 1.0,
                           'r': 0.8010033444816054},
                          {'a': 0.8509485094850948,
                           'f1': 0.7208121827411168,
                           'p': 0.6691800188501413,
                           'r': 0.7810781078107811},
                          {'a': 0.9312366737739872,
                           'f1': 0.7888707037643208,
                           'p': 0.9757085020242915,
                           'r': 0.6620879120879121},
                          {'a': 0.9042372881355932,
                           'f1': 0.8765027322404372,
                           'p': 0.9987546699875467,
                           'r': 0.7809152872444012},
                          {'a': 0.9,
                           'f1': 0.8254799301919722,
                           'p': 0.9978902953586498,
                           'r': 0.7038690476190477},
                          {'a': 0.9313348706123494,
                           'f1': 0.48262548262548266,
                           'p': 0.4139072847682119,
                           'r': 0.5787037037037037},
                          {'a': 0.8951198630136986,
                           'f1': 0.8608745031232256,
                           'p': 1.0,
                           'r': 0.7557328015952144},
                          {'a': 0.913083538083538,
                           'f1': 0.8236760124610593,
                           'p': 0.887248322147651,
                           'r': 0.7686046511627908},
                          {'a': 0.8584374234631399,
                           'f1': 0.7493495229835212,
                           'p': 0.7454702329594478,
                           'r': 0.7532693984306887},
                          {'a': 0.8582366589327146,
                           'f1': 0.6267562614538791,
                           'p': 0.5099403578528827,
                           'r': 0.8129952456418383},
                          {'a': 0.9435728048444811,
                           'f1': 0.718019257221458,
                           'p': 0.9961832061068703,
                           'r': 0.5612903225806452},
                          {'a': 0.9309129362002115,
                           'f1': 0.764988009592326,
                           'p': 0.996875,
                           'r': 0.6206225680933852},
                          {'a': 0.885989010989011,
                           'f1': 0.7940446650124069,
                           'p': 0.8154943934760448,
                           'r': 0.7736943907156673},
                          {'a': 0.8802727961606466,
                           'f1': 0.7044887780548629,
                           'p': 0.671021377672209,
                           'r': 0.7414698162729659},
                          {'a': 0.8554421768707483,
                           'f1': 0.708904109589041,
                           'p': 0.672077922077922,
                           'r': 0.75},
                          {'a': 0.8950665622552858,
                           'f1': 0.8769513314967861,
                           'p': 0.9989539748953975,
                           'r': 0.7815057283142389},
                          {'a': 0.8741605839416058,
                           'f1': 0.7432995830851697,
                           'p': 0.7098976109215017,
                           'r': 0.78},
                          {'a': 0.9407265774378585,
                           'f1': 0.8605697151424287,
                           'p': 1.0,
                           'r': 0.7552631578947369},
                          {'a': 0.9051293690422152,
                           'f1': 0.8625904010519394,
                           'p': 1.0,
                           'r': 0.7583815028901734},
                          {'a': 0.9363989250522544,
                           'f1': 0.6091743119266055,
                           'p': 0.578397212543554,
                           'r': 0.6434108527131783}],
 'www.latimes.com;2015': [{'a': 0.9588350602072249,
                           'f1': 0.6643835616438357,
                           'p': 0.6863207547169812,
                           'r': 0.6438053097345132},
                          {'a': 0.9603662898841036,
                           'f1': 0.6674669867947178,
                           'p': 0.7239583333333334,
                           'r': 0.6191536748329621},
                          {'a': 0.9700942236788201,
                           'f1': 0.7596048298572996,
                           'p': 0.9611111111111111,
                           'r': 0.6279491833030852},
                          {'a': 0.9149560117302052,
                           'f1': 0.806881243063263,
                           'p': 0.9261146496815287,
                           'r': 0.7148475909537857},
                          {'a': 0.9128578603716725,
                           'f1': 0.6953467954345919,
                           'p': 0.7841584158415842,
                           'r': 0.6246056782334385},
                          {'a': 0.9721741637831603,
                           'f1': 0.6841243862520459,
                           'p': 0.7827715355805244,
                           'r': 0.6075581395348837},
                          {'a': 0.8880750743877317,
                           'f1': 0.7854322071083808,
                           'p': 0.8380149812734082,
                           'r': 0.7390586292320397},
                          {'a': 0.9693372898120672,
                           'f1': 0.741973840665874,
                           'p': 0.859504132231405,
                           'r': 0.6527196652719666},
                          {'a': 0.9617381798305548,
                           'f1': 0.7188755020080322,
                           'p': 0.8063063063063063,
                           'r': 0.6485507246376812},
                          {'a': 0.9368078175895765,
                           'f1': 0.7155425219941349,
                           'p': 0.7625,
                           'r': 0.6740331491712708},
                          {'a': 0.9742035522977164,
                           'f1': 0.6817391304347825,
                           'p': 0.7716535433070866,
                           'r': 0.6105919003115264},
                          {'a': 0.9573299535276721,
                           'f1': 0.596537949400799,
                           'p': 0.5572139303482587,
                           'r': 0.6418338108882522},
                          {'a': 0.9434896591902127,
                           'f1': 0.756281407035176,
                           'p': 0.9039039039039038,
                           'r': 0.6501079913606912},
                          {'a': 0.9738910724312184,
                           'f1': 0.7565445026178009,
                           'p': 0.9665551839464883,
                           'r': 0.621505376344086},
                          {'a': 0.9716981132075472,
                           'f1': 0.7155172413793103,
                           'p': 0.8383838383838383,
                           'r': 0.6240601503759399},
                          {'a': 0.9757288525061036,
                           'f1': 0.7371695178849144,
                           'p': 0.8777777777777778,
                           'r': 0.6353887399463807},
                          {'a': 0.9687057490795808,
                           'f1': 0.7308160779537151,
                           'p': 0.9009009009009009,
                           'r': 0.6147540983606558},
                          {'a': 0.952079316992564,
                           'f1': 0.6813186813186813,
                           'p': 0.7251461988304093,
                           'r': 0.6424870466321243},
                          {'a': 0.9491685818575099,
                           'f1': 0.6952998379254458,
                           'p': 0.7486910994764397,
                           'r': 0.649016641452345},
                          {'a': 0.9303079416531604,
                           'f1': 0.712182061579652,
                           'p': 0.7150537634408602,
                           'r': 0.7093333333333334},
                          {'a': 0.9679585840212677,
                           'f1': 0.773938795656466,
                           'p': 0.9095127610208816,
                           'r': 0.6735395189003437},
                          {'a': 0.9389312977099237,
                           'f1': 0.7403740374037403,
                           'p': 0.7964497041420119,
                           'r': 0.6916752312435765},
                          {'a': 0.9298974785259074,
                           'f1': 0.7850467289719627,
                           'p': 0.90234375,
                           'r': 0.6947368421052632},
                          {'a': 0.85451244813278,
                           'f1': 0.5442729488220958,
                           'p': 0.4646324549237171,
                           'r': 0.6568627450980392},
                          {'a': 0.9361760660247593,
                           'f1': 0.7478260869565218,
                           'p': 0.8797953964194374,
                           'r': 0.6502835538752363}],
 'www.nymag.com;2000': [{'a': 0.6562015503875969,
                         'f1': 0.6643965191070753,
                         'p': 0.5011415525114156,
                         'r': 0.9854096520763187},
                        {'a': 0.6747474747474748,
                         'f1': 0.6773547094188377,
                         'p': 0.5146163215590743,
                         'r': 0.9906213364595545},
                        {'a': 0.6821366024518388,
                         'f1': 0.7055961070559611,
                         'p': 0.5576923076923077,
                         'r': 0.9602649006622517},
                        {'a': 0.7287602265575834,
                         'f1': 0.6781179985063481,
                         'p': 0.5206422018348624,
                         'r': 0.9721627408993576},
                        {'a': 0.918724279835391,
                         'f1': 0.802992518703242,
                         'p': 0.71875,
                         'r': 0.9096045197740112},
                        {'a': 0.9187848729076256,
                         'f1': 0.9184816428126945,
                         'p': 1.0,
                         'r': 0.8492520138089759},
                        {'a': 0.6364130434782609,
                         'f1': 0.7112645662494604,
                         'p': 0.5590230664857531,
                         'r': 0.9774614472123369},
                        {'a': 0.7027649769585254,
                         'f1': 0.7196870925684485,
                         'p': 0.5738045738045738,
                         'r': 0.965034965034965},
                        {'a': 0.6856641823761508,
                         'f1': 0.7084180561203741,
                         'p': 0.5586914688903143,
                         'r': 0.9677777777777777},
                        {'a': 0.37794169301018615,
                         'f1': 0.3127667830811021,
                         'p': 0.18822979915927138,
                         'r': 0.9243119266055045},
                        {'a': 0.9503154574132492,
                         'f1': 0.9340314136125654,
                         'p': 0.9570815450643777,
                         'r': 0.9120654396728016},
                        {'a': 0.5611620795107034,
                         'f1': 0.46221111805121795,
                         'p': 0.305532617671346,
                         'r': 0.9487179487179487},
                        {'a': 0.6966764829617165,
                         'f1': 0.7284369114877589,
                         'p': 0.583232810615199,
                         'r': 0.9699097291875627},
                        {'a': 0.6543959971408149,
                         'f1': 0.7058107696988135,
                         'p': 0.5558217537134643,
                         'r': 0.9666666666666667},
                        {'a': 0.719661733615222,
                         'f1': 0.7458796473744731,
                         'p': 0.6066084788029925,
                         'r': 0.9681592039800995},
                        {'a': 0.6765909936732415,
                         'f1': 0.7194058766548272,
                         'p': 0.56519533231862,
                         'r': 0.9893428063943162},
                        {'a': 0.4783904619970194,
                         'f1': 0.4573643410852713,
                         'p': 0.2993404363267377,
                         'r': 0.9688013136288999},
                        {'a': 0.7954545454545454,
                         'f1': 0.6976284584980237,
                         'p': 0.5472868217054263,
                         'r': 0.9618528610354223},
                        {'a': 0.7296473661297345,
                         'f1': 0.7312851579402855,
                         'p': 0.5855855855855856,
                         'r': 0.9735023041474654},
                        {'a': 0.9650655021834061,
                         'f1': 0.9514170040485831,
                         'p': 0.9978768577494692,
                         'r': 0.9090909090909091},
                        {'a': 0.7527233115468409,
                         'f1': 0.7423382519863791,
                         'p': 0.6078066914498141,
                         'r': 0.9533527696793003},
                        {'a': 0.748221906116643,
                         'f1': 0.7332998493219487,
                         'p': 0.5910931174089069,
                         'r': 0.9656084656084656},
                        {'a': 0.8039473684210526,
                         'f1': 0.7675507020280811,
                         'p': 0.643979057591623,
                         'r': 0.9498069498069498},
                        {'a': 0.81292984869326,
                         'f1': 0.7142857142857142,
                         'p': 0.5695142378559463,
                         'r': 0.9577464788732394},
                        {'a': 0.6928920238741183,
                         'f1': 0.6784090909090909,
                         'p': 0.5325602140945584,
                         'r': 0.9342723004694836}],
 'www.nymag.com;2005': [{'a': 0.8853681267474371,
                         'f1': 0.8427109974424553,
                         'p': 0.9969742813918305,
                         'r': 0.7297895902547066},
                        {'a': 0.8919308357348703,
                         'f1': 0.869866975130133,
                         'p': 0.8826291079812206,
                         'r': 0.8574686431014823},
                        {'a': 0.9452120057170081,
                         'f1': 0.9274447949526813,
                         'p': 0.9972862957937585,
                         'r': 0.8667452830188679},
                        {'a': 0.8766066838046273,
                         'f1': 0.8312236286919831,
                         'p': 0.933649289099526,
                         'r': 0.7490494296577946},
                        {'a': 0.8331611570247934,
                         'f1': 0.7536231884057971,
                         'p': 0.9199255121042831,
                         'r': 0.6382428940568475},
                        {'a': 0.8696343402225755,
                         'f1': 0.7396825396825397,
                         'p': 0.667621776504298,
                         'r': 0.8291814946619217},
                        {'a': 0.8841172460804363,
                         'f1': 0.824742268041237,
                         'p': 0.7766990291262136,
                         'r': 0.8791208791208791},
                        {'a': 0.8512231652521218,
                         'f1': 0.8382193268186754,
                         'p': 0.7758793969849246,
                         'r': 0.911452184179457},
                        {'a': 0.6941661756040071,
                         'f1': 0.4352557127312296,
                         'p': 1.0,
                         'r': 0.27816411682892905},
                        {'a': 0.9042386185243328,
                         'f1': 0.9068702290076337,
                         'p': 0.8892215568862275,
                         'r': 0.9252336448598131},
                        {'a': 0.8643503093764874,
                         'f1': 0.8585607940446649,
                         'p': 0.9019812304483837,
                         'r': 0.8191287878787878},
                        {'a': 0.7875962707742197,
                         'f1': 0.7660714285714286,
                         'p': 0.9976744186046511,
                         'r': 0.6217391304347826},
                        {'a': 0.8513513513513513,
                         'f1': 0.7601895734597156,
                         'p': 0.7609108159392789,
                         'r': 0.759469696969697},
                        {'a': 0.8478886756238004,
                         'f1': 0.8131997642899234,
                         'p': 0.8204518430439952,
                         'r': 0.8060747663551402},
                        {'a': 0.7420901246404602,
                         'f1': 0.5816485225505443,
                         'p': 0.9946808510638298,
                         'r': 0.41098901098901097},
                        {'a': 0.6163265306122448,
                         'f1': 0.329635499207607,
                         'p': 0.9904761904761905,
                         'r': 0.19771863117870722},
                        {'a': 0.9282868525896414,
                         'f1': 0.931063829787234,
                         'p': 1.0,
                         'r': 0.8710191082802548},
                        {'a': 0.8963878326996197,
                         'f1': 0.8593548387096773,
                         'p': 0.9985007496251874,
                         'r': 0.7542468856172141},
                        {'a': 0.8954954954954955,
                         'f1': 0.8780231335436383,
                         'p': 1.0,
                         'r': 0.7825679475164011},
                        {'a': 0.8159057437407953,
                         'f1': 0.7068021892103206,
                         'p': 1.0,
                         'r': 0.5465538089480049},
                        {'a': 0.935415787252005,
                         'f1': 0.9293302540415704,
                         'p': 1.0,
                         'r': 0.8679896462467644},
                        {'a': 0.9458272327964861,
                         'f1': 0.9342806394316164,
                         'p': 0.9974715549936789,
                         'r': 0.878619153674833},
                        {'a': 0.857969489742241,
                         'f1': 0.8190348525469169,
                         'p': 0.7955729166666666,
                         'r': 0.8439226519337016},
                        {'a': 0.8697347893915757,
                         'f1': 0.7496251874062968,
                         'p': 0.6830601092896175,
                         'r': 0.8305647840531561},
                        {'a': 0.7050666666666666,
                         'f1': 0.3471074380165289,
                         'p': 0.9932432432432432,
                         'r': 0.21030042918454936},
                        {'a': 0.8810240963855421,
                         'f1': 0.8611599297012302,
                         'p': 0.9972862957937585,
                         'r': 0.7577319587628866}],
 'www.nymag.com;2010': [{'a': 0.9721243191284845,
                         'f1': 0.8104575163398692,
                         'p': 0.9946524064171123,
                         'r': 0.6838235294117647},
                        {'a': 0.9522651261781696,
                         'f1': 0.8494726749760307,
                         'p': 0.9888392857142857,
                         'r': 0.7445378151260504},
                        {'a': 0.9771388985105646,
                         'f1': 0.6451612903225807,
                         'p': 0.75,
                         'r': 0.5660377358490566},
                        {'a': 0.9851056459993073,
                         'f1': 0.8088888888888888,
                         'p': 1.0,
                         'r': 0.6791044776119403},
                        {'a': 0.9591102387962054,
                         'f1': 0.806201550387597,
                         'p': 0.966542750929368,
                         'r': 0.6914893617021277},
                        {'a': 0.9645460569913851,
                         'f1': 0.701949860724234,
                         'p': 1.0,
                         'r': 0.5407725321888412},
                        {'a': 0.972083035075161,
                         'f1': 0.7089552238805971,
                         'p': 0.7723577235772358,
                         'r': 0.6551724137931034},
                        {'a': 0.9582146248812915,
                         'f1': 0.8350000000000001,
                         'p': 1.0,
                         'r': 0.7167381974248928},
                        {'a': 0.9703389830508474,
                         'f1': 0.7878787878787877,
                         'p': 0.949438202247191,
                         'r': 0.6733067729083665},
                        {'a': 0.9740728585493929,
                         'f1': 0.8029925187032418,
                         'p': 0.9252873563218391,
                         'r': 0.7092511013215859},
                        {'a': 0.9304210763341589,
                         'f1': 0.8874316939890711,
                         'p': 1.0,
                         'r': 0.7976424361493124},
                        {'a': 0.9719626168224299,
                         'f1': 0.8168421052631579,
                         'p': 1.0,
                         'r': 0.6903914590747331},
                        {'a': 0.9803921568627451,
                         'f1': 0.7586206896551725,
                         'p': 0.9072164948453608,
                         'r': 0.6518518518518519},
                        {'a': 0.979016167870657,
                         'f1': 0.655367231638418,
                         'p': 0.7532467532467533,
                         'r': 0.58},
                        {'a': 0.9739617666446935,
                         'f1': 0.824053452115813,
                         'p': 1.0,
                         'r': 0.7007575757575758},
                        {'a': 0.9578518014955812,
                         'f1': 0.7416666666666667,
                         'p': 0.8317757009345794,
                         'r': 0.6691729323308271},
                        {'a': 0.9702767338571917,
                         'f1': 0.8087912087912088,
                         'p': 1.0,
                         'r': 0.6789667896678967},
                        {'a': 0.9638633377135348,
                         'f1': 0.8214285714285715,
                         'p': 1.0,
                         'r': 0.696969696969697},
                        {'a': 0.9265220433869839,
                         'f1': 0.8529411764705882,
                         'p': 1.0,
                         'r': 0.7435897435897436},
                        {'a': 0.9691056910569106,
                         'f1': 0.7076923076923076,
                         'p': 0.7876712328767124,
                         'r': 0.6424581005586593},
                        {'a': 0.9162702188392008,
                         'f1': 0.6507936507936508,
                         'p': 0.9919354838709677,
                         'r': 0.484251968503937},
                        {'a': 0.9654392764857881,
                         'f1': 0.79383429672447,
                         'p': 0.958139534883721,
                         'r': 0.6776315789473685},
                        {'a': 0.9751638496033115,
                         'f1': 0.8341013824884793,
                         'p': 1.0,
                         'r': 0.7154150197628458},
                        {'a': 0.9737931034482759,
                         'f1': 0.716417910447761,
                         'p': 0.8275862068965517,
                         'r': 0.631578947368421},
                        {'a': 0.8861423220973783,
                         'f1': 0.8324761204996327,
                         'p': 1.0,
                         'r': 0.7130270610446822}],
 'www.nymag.com;2015': [{'a': 0.9973263789967347,
                         'f1': 0.061538461538461535,
                         'p': 0.12903225806451613,
                         'r': 0.04040404040404041},
                        {'a': 0.9960415527610716,
                         'f1': 0.08121827411167513,
                         'p': 0.25806451612903225,
                         'r': 0.04819277108433735},
                        {'a': 0.9945108378536079,
                         'f1': 0.7974481658692185,
                         'p': 1.0,
                         'r': 0.6631299734748011},
                        {'a': 0.9888726445743989,
                         'f1': 0.8212266202696824,
                         'p': 0.972193614830072,
                         'r': 0.7108433734939759},
                        {'a': 0.9659774668812678,
                         'f1': 0.8799160985841636,
                         'p': 0.9895812856300373,
                         'r': 0.79213217938631},
                        {'a': 0.9845847704961528,
                         'f1': 0.828562997934494,
                         'p': 0.972972972972973,
                         'r': 0.7214799588900308},
                        {'a': 0.9972365997017282,
                         'f1': 0.11267605633802819,
                         'p': 0.2962962962962963,
                         'r': 0.06956521739130435},
                        {'a': 0.997323177366703,
                         'f1': 0.7630057803468209,
                         'p': 1.0,
                         'r': 0.616822429906542},
                        {'a': 0.9957284615890123,
                         'f1': 0.04878048780487805,
                         'p': 0.18518518518518517,
                         'r': 0.028089887640449437},
                        {'a': 0.996647530566633,
                         'f1': 0.07272727272727274,
                         'p': 0.2222222222222222,
                         'r': 0.043478260869565216},
                        {'a': 0.9914777680906713,
                         'f1': 0.03931203931203931,
                         'p': 0.2962962962962963,
                         'r': 0.021052631578947368},
                        {'a': 0.9953479247821091,
                         'f1': 0.09782608695652174,
                         'p': 0.25,
                         'r': 0.060810810810810814},
                        {'a': 0.9955191256830601,
                         'f1': 0.046511627906976744,
                         'p': 0.16129032258064516,
                         'r': 0.02717391304347826},
                        {'a': 0.8656373582135499,
                         'f1': 0.11867039453246349,
                         'p': 0.0648336727766463,
                         'r': 0.6996336996336996},
                        {'a': 0.9467264878315456,
                         'f1': 0.8626822157434402,
                         'p': 0.9902945113788487,
                         'r': 0.7642045454545454},
                        {'a': 0.9953803038928055,
                         'f1': 0.06222222222222222,
                         'p': 0.25925925925925924,
                         'r': 0.03535353535353535},
                        {'a': 0.9970220499682498,
                         'f1': 0.25274725274725274,
                         'p': 0.7419354838709677,
                         'r': 0.152317880794702},
                        {'a': 0.9475871623181713,
                         'f1': 0.9535312180143296,
                         'p': 0.9814580699536452,
                         'r': 0.9271496815286624},
                        {'a': 0.9949688286120529,
                         'f1': 0.04958677685950413,
                         'p': 0.2222222222222222,
                         'r': 0.027906976744186046},
                        {'a': 0.9940562038372449,
                         'f1': 0.04895104895104895,
                         'p': 0.25925925925925924,
                         'r': 0.02702702702702703},
                        {'a': 0.9929066130473637,
                         'f1': 0.07971014492753623,
                         'p': 0.3055555555555556,
                         'r': 0.04583333333333333},
                        {'a': 0.9938557337300932,
                         'f1': 0.8095644748078564,
                         'p': 1.0,
                         'r': 0.6800573888091822},
                        {'a': 0.9965037257172825,
                         'f1': 0.047619047619047616,
                         'p': 0.12903225806451613,
                         'r': 0.029197080291970802},
                        {'a': 0.9978291853963381,
                         'f1': 0.038834951456310676,
                         'p': 0.06451612903225806,
                         'r': 0.027777777777777776},
                        {'a': 0.9967108148408035,
                         'f1': 0.0625,
                         'p': 0.18518518518518517,
                         'r': 0.03759398496240601},
                        {'a': 0.9946543319299801,
                         'f1': 0.78814489571899,
                         'p': 0.9835616438356164,
                         'r': 0.6575091575091575}]}
</span></span></span><span class="fold-message">[About 4035 more lines. Double-click to unfold]
</span><span class="command"><span class="prompt">&gt;&gt;&gt; </span>avg_results = {}
<span class="prompt">... </span><span class="keyword">for</span> key,val <span class="keyword">in</span> trimmed_eatiht_results.items():
<span class="prompt">... </span>    domain, year = key.split(<span class="string">";"</span>)
<span class="prompt">... </span>    
<span class="prompt">... </span>    <span class="keyword">if</span> domain <span class="keyword">not</span> <span class="keyword">in</span> avg_results:
<span class="prompt">... </span>        avg_results[domain] = {year:{<span class="string">'avg_precision'</span>:<span class="builtin">sum</span>([d[<span class="string">'p'</span>] <span class="keyword">for</span> d <span class="keyword">in</span> val])/<span class="builtin">len</span>(val),
<span class="prompt">... </span>                                     <span class="string">'avg_recall'</span>:<span class="builtin">sum</span>([d[<span class="string">'r'</span>] <span class="keyword">for</span> d <span class="keyword">in</span> val])/<span class="builtin">len</span>(val),
<span class="prompt">... </span>                                     <span class="string">'avg_f1'</span>:<span class="builtin">sum</span>([d[<span class="string">'f1'</span>] <span class="keyword">for</span> d <span class="keyword">in</span> val])/<span class="builtin">len</span>(val),
<span class="prompt">... </span>                                     <span class="string">'avg_accuracy'</span>:<span class="builtin">sum</span>([d[<span class="string">'a'</span>] <span class="keyword">for</span> d <span class="keyword">in</span> val])/<span class="builtin">len</span>(val)}}
<span class="prompt">... </span>    <span class="keyword">else</span>:
<span class="prompt">... </span>        avg_results[domain][year] = {<span class="string">'avg_precision'</span>:<span class="builtin">sum</span>([d[<span class="string">'p'</span>] <span class="keyword">for</span> d <span class="keyword">in</span> val])/<span class="builtin">len</span>(val),
<span class="prompt">... </span>                                     <span class="string">'avg_recall'</span>:<span class="builtin">sum</span>([d[<span class="string">'r'</span>] <span class="keyword">for</span> d <span class="keyword">in</span> val])/<span class="builtin">len</span>(val),
<span class="prompt">... </span>                                     <span class="string">'avg_f1'</span>:<span class="builtin">sum</span>([d[<span class="string">'f1'</span>] <span class="keyword">for</span> d <span class="keyword">in</span> val])/<span class="builtin">len</span>(val),
<span class="prompt">... </span>                                     <span class="string">'avg_accuracy'</span>:<span class="builtin">sum</span>([d[<span class="string">'a'</span>] <span class="keyword">for</span> d <span class="keyword">in</span> val])/<span class="builtin">len</span>(val)}
<span class="prompt">... </span>        
<span class="prompt">... </span>        
<span class="prompt">... </span>    <span class="comment">#print("precision avg", sum([d['p'] for d in val])/len(val))</span>
<span class="prompt">... </span>
<span class="prompt">... </span>
<span class="prompt">... </span>mean_avgs = {<span class="string">'a'</span>:{},<span class="string">'p'</span>:{},<span class="string">'r'</span>:{},<span class="string">'f1'</span>:{}}
<span class="prompt">... </span>
<span class="prompt">... </span><span class="keyword">for</span> year <span class="keyword">in</span> [<span class="string">'2000'</span>,<span class="string">'2005'</span>,<span class="string">'2010'</span>,<span class="string">'2015'</span>]:
<span class="prompt">... </span>    
<span class="prompt">... </span>    
<span class="prompt">... </span>    mean_avgs[<span class="string">'a'</span>].update({year:<span class="builtin">sum</span>([val[year][<span class="string">'avg_accuracy'</span>] <span class="keyword">for</span> key,val <span class="keyword">in</span> avg_results.items()])/<span class="number">10</span>})
<span class="prompt">... </span>    mean_avgs[<span class="string">'p'</span>].update({year:<span class="builtin">sum</span>([val[year][<span class="string">'avg_precision'</span>] <span class="keyword">for</span> key,val <span class="keyword">in</span> avg_results.items()])/<span class="number">10</span>})
<span class="prompt">... </span>    mean_avgs[<span class="string">'r'</span>].update({year:<span class="builtin">sum</span>([val[year][<span class="string">'avg_recall'</span>] <span class="keyword">for</span> key,val <span class="keyword">in</span> avg_results.items()])/<span class="number">10</span>})
<span class="prompt">... </span>    mean_avgs[<span class="string">'f1'</span>].update({year:<span class="builtin">sum</span>([val[year][<span class="string">'avg_f1'</span>] <span class="keyword">for</span> key,val <span class="keyword">in</span> avg_results.items()])/<span class="number">10</span>})
<span class="prompt">... </span>    
<span class="prompt">... </span>    
<span class="prompt">... </span>
<span class="prompt">... </span>extractor_avgs[extractor] = avg_results
<span class="prompt">... </span>extractor_avgs[extractor][<span class="string">'mean_avgs'</span>] = mean_avgs
<span class="prompt">... </span>
<span class="prompt">... </span>pickle.dump(avg_results,<span class="builtin">open</span>(os.path.join(basepath,<span class="string">'avgs.pkl'</span>),<span class="string">'wb'</span>))
</span><span class="commandsep"></span><span class="output"><span class="exception">Traceback (most recent call last):
  File "&lt;pyshell#15&gt;", line 32, in &lt;module&gt;
    extractor_avgs[extractor] = avg_results
NameError: name 'extractor_avgs' is not defined
</span></span><span class="command"><span class="prompt">&gt;&gt;&gt; </span>avg_results = {}
<span class="prompt">... </span>extractor_results = {}
<span class="prompt">... </span>extractor = <span class="string">"eatiht"</span>
<span class="prompt">... </span><span class="keyword">for</span> key,val <span class="keyword">in</span> trimmed_eatiht_results.items():
<span class="prompt">... </span>    domain, year = key.split(<span class="string">";"</span>)
<span class="prompt">... </span>    
<span class="prompt">... </span>    <span class="keyword">if</span> domain <span class="keyword">not</span> <span class="keyword">in</span> avg_results:
<span class="prompt">... </span>        avg_results[domain] = {year:{<span class="string">'avg_precision'</span>:<span class="builtin">sum</span>([d[<span class="string">'p'</span>] <span class="keyword">for</span> d <span class="keyword">in</span> val])/<span class="builtin">len</span>(val),
<span class="prompt">... </span>                                     <span class="string">'avg_recall'</span>:<span class="builtin">sum</span>([d[<span class="string">'r'</span>] <span class="keyword">for</span> d <span class="keyword">in</span> val])/<span class="builtin">len</span>(val),
<span class="prompt">... </span>                                     <span class="string">'avg_f1'</span>:<span class="builtin">sum</span>([d[<span class="string">'f1'</span>] <span class="keyword">for</span> d <span class="keyword">in</span> val])/<span class="builtin">len</span>(val),
<span class="prompt">... </span>                                     <span class="string">'avg_accuracy'</span>:<span class="builtin">sum</span>([d[<span class="string">'a'</span>] <span class="keyword">for</span> d <span class="keyword">in</span> val])/<span class="builtin">len</span>(val)}}
<span class="prompt">... </span>    <span class="keyword">else</span>:
<span class="prompt">... </span>        avg_results[domain][year] = {<span class="string">'avg_precision'</span>:<span class="builtin">sum</span>([d[<span class="string">'p'</span>] <span class="keyword">for</span> d <span class="keyword">in</span> val])/<span class="builtin">len</span>(val),
<span class="prompt">... </span>                                     <span class="string">'avg_recall'</span>:<span class="builtin">sum</span>([d[<span class="string">'r'</span>] <span class="keyword">for</span> d <span class="keyword">in</span> val])/<span class="builtin">len</span>(val),
<span class="prompt">... </span>                                     <span class="string">'avg_f1'</span>:<span class="builtin">sum</span>([d[<span class="string">'f1'</span>] <span class="keyword">for</span> d <span class="keyword">in</span> val])/<span class="builtin">len</span>(val),
<span class="prompt">... </span>                                     <span class="string">'avg_accuracy'</span>:<span class="builtin">sum</span>([d[<span class="string">'a'</span>] <span class="keyword">for</span> d <span class="keyword">in</span> val])/<span class="builtin">len</span>(val)}
<span class="prompt">... </span>        
<span class="prompt">... </span>        
<span class="prompt">... </span>    <span class="comment">#print("precision avg", sum([d['p'] for d in val])/len(val))</span>
<span class="prompt">... </span>
<span class="prompt">... </span>
<span class="prompt">... </span>mean_avgs = {<span class="string">'a'</span>:{},<span class="string">'p'</span>:{},<span class="string">'r'</span>:{},<span class="string">'f1'</span>:{}}
<span class="prompt">... </span>
<span class="prompt">... </span><span class="keyword">for</span> year <span class="keyword">in</span> [<span class="string">'2000'</span>,<span class="string">'2005'</span>,<span class="string">'2010'</span>,<span class="string">'2015'</span>]:
<span class="prompt">... </span>    
<span class="prompt">... </span>    
<span class="prompt">... </span>    mean_avgs[<span class="string">'a'</span>].update({year:<span class="builtin">sum</span>([val[year][<span class="string">'avg_accuracy'</span>] <span class="keyword">for</span> key,val <span class="keyword">in</span> avg_results.items()])/<span class="number">10</span>})
<span class="prompt">... </span>    mean_avgs[<span class="string">'p'</span>].update({year:<span class="builtin">sum</span>([val[year][<span class="string">'avg_precision'</span>] <span class="keyword">for</span> key,val <span class="keyword">in</span> avg_results.items()])/<span class="number">10</span>})
<span class="prompt">... </span>    mean_avgs[<span class="string">'r'</span>].update({year:<span class="builtin">sum</span>([val[year][<span class="string">'avg_recall'</span>] <span class="keyword">for</span> key,val <span class="keyword">in</span> avg_results.items()])/<span class="number">10</span>})
<span class="prompt">... </span>    mean_avgs[<span class="string">'f1'</span>].update({year:<span class="builtin">sum</span>([val[year][<span class="string">'avg_f1'</span>] <span class="keyword">for</span> key,val <span class="keyword">in</span> avg_results.items()])/<span class="number">10</span>})
<span class="prompt">... </span>    
<span class="prompt">... </span>    
<span class="prompt">... </span>
<span class="prompt">... </span>extractor_avgs[extractor] = avg_results
<span class="prompt">... </span>extractor_avgs[extractor][<span class="string">'mean_avgs'</span>] = mean_avgs
<span class="prompt">... </span>
<span class="prompt">... </span>pickle.dump(avg_results,<span class="builtin">open</span>(os.path.join(basepath,<span class="string">'avgs.pkl'</span>),<span class="string">'wb'</span>))
</span><span class="commandsep"></span><span class="output"><span class="exception">Traceback (most recent call last):
  File "&lt;pyshell#16&gt;", line 34, in &lt;module&gt;
    extractor_avgs[extractor] = avg_results
NameError: name 'extractor_avgs' is not defined
</span></span><span class="command"><span class="prompt">&gt;&gt;&gt; </span>avg_results = {}
<span class="prompt">... </span>extractor_avgs = {}
<span class="prompt">... </span>extractor = <span class="string">"eatiht"</span>
<span class="prompt">... </span><span class="keyword">for</span> key,val <span class="keyword">in</span> trimmed_eatiht_results.items():
<span class="prompt">... </span>    domain, year = key.split(<span class="string">";"</span>)
<span class="prompt">... </span>    
<span class="prompt">... </span>    <span class="keyword">if</span> domain <span class="keyword">not</span> <span class="keyword">in</span> avg_results:
<span class="prompt">... </span>        avg_results[domain] = {year:{<span class="string">'avg_precision'</span>:<span class="builtin">sum</span>([d[<span class="string">'p'</span>] <span class="keyword">for</span> d <span class="keyword">in</span> val])/<span class="builtin">len</span>(val),
<span class="prompt">... </span>                                     <span class="string">'avg_recall'</span>:<span class="builtin">sum</span>([d[<span class="string">'r'</span>] <span class="keyword">for</span> d <span class="keyword">in</span> val])/<span class="builtin">len</span>(val),
<span class="prompt">... </span>                                     <span class="string">'avg_f1'</span>:<span class="builtin">sum</span>([d[<span class="string">'f1'</span>] <span class="keyword">for</span> d <span class="keyword">in</span> val])/<span class="builtin">len</span>(val),
<span class="prompt">... </span>                                     <span class="string">'avg_accuracy'</span>:<span class="builtin">sum</span>([d[<span class="string">'a'</span>] <span class="keyword">for</span> d <span class="keyword">in</span> val])/<span class="builtin">len</span>(val)}}
<span class="prompt">... </span>    <span class="keyword">else</span>:
<span class="prompt">... </span>        avg_results[domain][year] = {<span class="string">'avg_precision'</span>:<span class="builtin">sum</span>([d[<span class="string">'p'</span>] <span class="keyword">for</span> d <span class="keyword">in</span> val])/<span class="builtin">len</span>(val),
<span class="prompt">... </span>                                     <span class="string">'avg_recall'</span>:<span class="builtin">sum</span>([d[<span class="string">'r'</span>] <span class="keyword">for</span> d <span class="keyword">in</span> val])/<span class="builtin">len</span>(val),
<span class="prompt">... </span>                                     <span class="string">'avg_f1'</span>:<span class="builtin">sum</span>([d[<span class="string">'f1'</span>] <span class="keyword">for</span> d <span class="keyword">in</span> val])/<span class="builtin">len</span>(val),
<span class="prompt">... </span>                                     <span class="string">'avg_accuracy'</span>:<span class="builtin">sum</span>([d[<span class="string">'a'</span>] <span class="keyword">for</span> d <span class="keyword">in</span> val])/<span class="builtin">len</span>(val)}
<span class="prompt">... </span>        
<span class="prompt">... </span>        
<span class="prompt">... </span>    <span class="comment">#print("precision avg", sum([d['p'] for d in val])/len(val))</span>
<span class="prompt">... </span>
<span class="prompt">... </span>
<span class="prompt">... </span>mean_avgs = {<span class="string">'a'</span>:{},<span class="string">'p'</span>:{},<span class="string">'r'</span>:{},<span class="string">'f1'</span>:{}}
<span class="prompt">... </span>
<span class="prompt">... </span><span class="keyword">for</span> year <span class="keyword">in</span> [<span class="string">'2000'</span>,<span class="string">'2005'</span>,<span class="string">'2010'</span>,<span class="string">'2015'</span>]:
<span class="prompt">... </span>    
<span class="prompt">... </span>    
<span class="prompt">... </span>    mean_avgs[<span class="string">'a'</span>].update({year:<span class="builtin">sum</span>([val[year][<span class="string">'avg_accuracy'</span>] <span class="keyword">for</span> key,val <span class="keyword">in</span> avg_results.items()])/<span class="number">10</span>})
<span class="prompt">... </span>    mean_avgs[<span class="string">'p'</span>].update({year:<span class="builtin">sum</span>([val[year][<span class="string">'avg_precision'</span>] <span class="keyword">for</span> key,val <span class="keyword">in</span> avg_results.items()])/<span class="number">10</span>})
<span class="prompt">... </span>    mean_avgs[<span class="string">'r'</span>].update({year:<span class="builtin">sum</span>([val[year][<span class="string">'avg_recall'</span>] <span class="keyword">for</span> key,val <span class="keyword">in</span> avg_results.items()])/<span class="number">10</span>})
<span class="prompt">... </span>    mean_avgs[<span class="string">'f1'</span>].update({year:<span class="builtin">sum</span>([val[year][<span class="string">'avg_f1'</span>] <span class="keyword">for</span> key,val <span class="keyword">in</span> avg_results.items()])/<span class="number">10</span>})
<span class="prompt">... </span>    
<span class="prompt">... </span>    
<span class="prompt">... </span>
<span class="prompt">... </span>extractor_avgs[extractor] = avg_results
<span class="prompt">... </span>extractor_avgs[extractor][<span class="string">'mean_avgs'</span>] = mean_avgs
<span class="prompt">... </span>
<span class="prompt">... </span>pickle.dump(avg_results,<span class="builtin">open</span>(os.path.join(basepath,<span class="string">'avgs.pkl'</span>),<span class="string">'wb'</span>))
</span><span class="commandsep"></span><span class="output"><span class="exception">Traceback (most recent call last):
  File "&lt;pyshell#17&gt;", line 37, in &lt;module&gt;
    pickle.dump(avg_results,open(os.path.join(basepath,'avgs.pkl'),'wb'))
NameError: name 'basepath' is not defined
</span></span><span class="command"><span class="prompt">&gt;&gt;&gt; </span>eatiht_result_path = <span class="string">'c:/crawlToTheFuture/crawl-to-the-future/testing/eatiht_results.pkl'</span>
<span class="prompt">... </span>
<span class="prompt">... </span>
<span class="prompt">... </span>avg_results = {}
<span class="prompt">... </span>extractor_avgs = {}
<span class="prompt">... </span>extractor = <span class="string">"eatiht"</span>
<span class="prompt">... </span><span class="keyword">for</span> key,val <span class="keyword">in</span> trimmed_eatiht_results.items():
<span class="prompt">... </span>    domain, year = key.split(<span class="string">";"</span>)
<span class="prompt">... </span>    
<span class="prompt">... </span>    <span class="keyword">if</span> domain <span class="keyword">not</span> <span class="keyword">in</span> avg_results:
<span class="prompt">... </span>        avg_results[domain] = {year:{<span class="string">'avg_precision'</span>:<span class="builtin">sum</span>([d[<span class="string">'p'</span>] <span class="keyword">for</span> d <span class="keyword">in</span> val])/<span class="builtin">len</span>(val),
<span class="prompt">... </span>                                     <span class="string">'avg_recall'</span>:<span class="builtin">sum</span>([d[<span class="string">'r'</span>] <span class="keyword">for</span> d <span class="keyword">in</span> val])/<span class="builtin">len</span>(val),
<span class="prompt">... </span>                                     <span class="string">'avg_f1'</span>:<span class="builtin">sum</span>([d[<span class="string">'f1'</span>] <span class="keyword">for</span> d <span class="keyword">in</span> val])/<span class="builtin">len</span>(val),
<span class="prompt">... </span>                                     <span class="string">'avg_accuracy'</span>:<span class="builtin">sum</span>([d[<span class="string">'a'</span>] <span class="keyword">for</span> d <span class="keyword">in</span> val])/<span class="builtin">len</span>(val)}}
<span class="prompt">... </span>    <span class="keyword">else</span>:
<span class="prompt">... </span>        avg_results[domain][year] = {<span class="string">'avg_precision'</span>:<span class="builtin">sum</span>([d[<span class="string">'p'</span>] <span class="keyword">for</span> d <span class="keyword">in</span> val])/<span class="builtin">len</span>(val),
<span class="prompt">... </span>                                     <span class="string">'avg_recall'</span>:<span class="builtin">sum</span>([d[<span class="string">'r'</span>] <span class="keyword">for</span> d <span class="keyword">in</span> val])/<span class="builtin">len</span>(val),
<span class="prompt">... </span>                                     <span class="string">'avg_f1'</span>:<span class="builtin">sum</span>([d[<span class="string">'f1'</span>] <span class="keyword">for</span> d <span class="keyword">in</span> val])/<span class="builtin">len</span>(val),
<span class="prompt">... </span>                                     <span class="string">'avg_accuracy'</span>:<span class="builtin">sum</span>([d[<span class="string">'a'</span>] <span class="keyword">for</span> d <span class="keyword">in</span> val])/<span class="builtin">len</span>(val)}
<span class="prompt">... </span>        
<span class="prompt">... </span>        
<span class="prompt">... </span>    <span class="comment">#print("precision avg", sum([d['p'] for d in val])/len(val))</span>
<span class="prompt">... </span>
<span class="prompt">... </span>
<span class="prompt">... </span>mean_avgs = {<span class="string">'a'</span>:{},<span class="string">'p'</span>:{},<span class="string">'r'</span>:{},<span class="string">'f1'</span>:{}}
<span class="prompt">... </span>
<span class="prompt">... </span><span class="keyword">for</span> year <span class="keyword">in</span> [<span class="string">'2000'</span>,<span class="string">'2005'</span>,<span class="string">'2010'</span>,<span class="string">'2015'</span>]:
<span class="prompt">... </span>    
<span class="prompt">... </span>    
<span class="prompt">... </span>    mean_avgs[<span class="string">'a'</span>].update({year:<span class="builtin">sum</span>([val[year][<span class="string">'avg_accuracy'</span>] <span class="keyword">for</span> key,val <span class="keyword">in</span> avg_results.items()])/<span class="number">10</span>})
<span class="prompt">... </span>    mean_avgs[<span class="string">'p'</span>].update({year:<span class="builtin">sum</span>([val[year][<span class="string">'avg_precision'</span>] <span class="keyword">for</span> key,val <span class="keyword">in</span> avg_results.items()])/<span class="number">10</span>})
<span class="prompt">... </span>    mean_avgs[<span class="string">'r'</span>].update({year:<span class="builtin">sum</span>([val[year][<span class="string">'avg_recall'</span>] <span class="keyword">for</span> key,val <span class="keyword">in</span> avg_results.items()])/<span class="number">10</span>})
<span class="prompt">... </span>    mean_avgs[<span class="string">'f1'</span>].update({year:<span class="builtin">sum</span>([val[year][<span class="string">'avg_f1'</span>] <span class="keyword">for</span> key,val <span class="keyword">in</span> avg_results.items()])/<span class="number">10</span>})
<span class="prompt">... </span>    
<span class="prompt">... </span>    
<span class="prompt">... </span>
<span class="prompt">... </span>extractor_avgs[extractor] = avg_results
<span class="prompt">... </span>extractor_avgs[extractor][<span class="string">'mean_avgs'</span>] = mean_avgs
<span class="prompt">... </span>
<span class="prompt">... </span>pickle.dump(avg_results,<span class="builtin">open</span>(os.path.join(eatiht_result_path,<span class="string">'avgs.pkl'</span>),<span class="string">'wb'</span>))
</span><span class="commandsep"></span><span class="output"><span class="exception">Traceback (most recent call last):
  File "&lt;pyshell#18&gt;", line 40, in &lt;module&gt;
    pickle.dump(avg_results,open(os.path.join(eatiht_result_path,'avgs.pkl'),'wb'))
IOError: [Errno 2] No such file or directory: 'c:/crawlToTheFuture/crawl-to-the-future/testing/eatiht_results.pkl\\avgs.pkl'
</span></span><span class="command"><span class="prompt">&gt;&gt;&gt; </span>eatiht_result_path = <span class="string">'c:/crawlToTheFuture/crawl-to-the-future/testing/eatiht_results.pkl'</span>
<span class="prompt">... </span>eatiht_base_path = <span class="string">'c:/crawlToTheFuture/crawl-to-the-future/testing'</span>
<span class="prompt">... </span>
<span class="prompt">... </span>avg_results = {}
<span class="prompt">... </span>extractor_avgs = {}
<span class="prompt">... </span>extractor = <span class="string">"eatiht"</span>
<span class="prompt">... </span><span class="keyword">for</span> key,val <span class="keyword">in</span> trimmed_eatiht_results.items():
<span class="prompt">... </span>    domain, year = key.split(<span class="string">";"</span>)
<span class="prompt">... </span>    
<span class="prompt">... </span>    <span class="keyword">if</span> domain <span class="keyword">not</span> <span class="keyword">in</span> avg_results:
<span class="prompt">... </span>        avg_results[domain] = {year:{<span class="string">'avg_precision'</span>:<span class="builtin">sum</span>([d[<span class="string">'p'</span>] <span class="keyword">for</span> d <span class="keyword">in</span> val])/<span class="builtin">len</span>(val),
<span class="prompt">... </span>                                     <span class="string">'avg_recall'</span>:<span class="builtin">sum</span>([d[<span class="string">'r'</span>] <span class="keyword">for</span> d <span class="keyword">in</span> val])/<span class="builtin">len</span>(val),
<span class="prompt">... </span>                                     <span class="string">'avg_f1'</span>:<span class="builtin">sum</span>([d[<span class="string">'f1'</span>] <span class="keyword">for</span> d <span class="keyword">in</span> val])/<span class="builtin">len</span>(val),
<span class="prompt">... </span>                                     <span class="string">'avg_accuracy'</span>:<span class="builtin">sum</span>([d[<span class="string">'a'</span>] <span class="keyword">for</span> d <span class="keyword">in</span> val])/<span class="builtin">len</span>(val)}}
<span class="prompt">... </span>    <span class="keyword">else</span>:
<span class="prompt">... </span>        avg_results[domain][year] = {<span class="string">'avg_precision'</span>:<span class="builtin">sum</span>([d[<span class="string">'p'</span>] <span class="keyword">for</span> d <span class="keyword">in</span> val])/<span class="builtin">len</span>(val),
<span class="prompt">... </span>                                     <span class="string">'avg_recall'</span>:<span class="builtin">sum</span>([d[<span class="string">'r'</span>] <span class="keyword">for</span> d <span class="keyword">in</span> val])/<span class="builtin">len</span>(val),
<span class="prompt">... </span>                                     <span class="string">'avg_f1'</span>:<span class="builtin">sum</span>([d[<span class="string">'f1'</span>] <span class="keyword">for</span> d <span class="keyword">in</span> val])/<span class="builtin">len</span>(val),
<span class="prompt">... </span>                                     <span class="string">'avg_accuracy'</span>:<span class="builtin">sum</span>([d[<span class="string">'a'</span>] <span class="keyword">for</span> d <span class="keyword">in</span> val])/<span class="builtin">len</span>(val)}
<span class="prompt">... </span>        
<span class="prompt">... </span>        
<span class="prompt">... </span>    <span class="comment">#print("precision avg", sum([d['p'] for d in val])/len(val))</span>
<span class="prompt">... </span>
<span class="prompt">... </span>
<span class="prompt">... </span>mean_avgs = {<span class="string">'a'</span>:{},<span class="string">'p'</span>:{},<span class="string">'r'</span>:{},<span class="string">'f1'</span>:{}}
<span class="prompt">... </span>
<span class="prompt">... </span><span class="keyword">for</span> year <span class="keyword">in</span> [<span class="string">'2000'</span>,<span class="string">'2005'</span>,<span class="string">'2010'</span>,<span class="string">'2015'</span>]:
<span class="prompt">... </span>    
<span class="prompt">... </span>    
<span class="prompt">... </span>    mean_avgs[<span class="string">'a'</span>].update({year:<span class="builtin">sum</span>([val[year][<span class="string">'avg_accuracy'</span>] <span class="keyword">for</span> key,val <span class="keyword">in</span> avg_results.items()])/<span class="number">10</span>})
<span class="prompt">... </span>    mean_avgs[<span class="string">'p'</span>].update({year:<span class="builtin">sum</span>([val[year][<span class="string">'avg_precision'</span>] <span class="keyword">for</span> key,val <span class="keyword">in</span> avg_results.items()])/<span class="number">10</span>})
<span class="prompt">... </span>    mean_avgs[<span class="string">'r'</span>].update({year:<span class="builtin">sum</span>([val[year][<span class="string">'avg_recall'</span>] <span class="keyword">for</span> key,val <span class="keyword">in</span> avg_results.items()])/<span class="number">10</span>})
<span class="prompt">... </span>    mean_avgs[<span class="string">'f1'</span>].update({year:<span class="builtin">sum</span>([val[year][<span class="string">'avg_f1'</span>] <span class="keyword">for</span> key,val <span class="keyword">in</span> avg_results.items()])/<span class="number">10</span>})
<span class="prompt">... </span>    
<span class="prompt">... </span>    
<span class="prompt">... </span>
<span class="prompt">... </span>extractor_avgs[extractor] = avg_results
<span class="prompt">... </span>extractor_avgs[extractor][<span class="string">'mean_avgs'</span>] = mean_avgs
<span class="prompt">... </span>
<span class="prompt">... </span>pickle.dump(avg_results,<span class="builtin">open</span>(os.path.join(eatiht_base_path,<span class="string">'avgs.pkl'</span>),<span class="string">'wb'</span>))
</span><span class="commandsep"></span><span class="command"><span class="prompt">&gt;&gt;&gt; </span>extractor_results
</span><span class="commandsep"></span><span class="output"><span class="result-ind">2: </span><span class="result">{}
</span></span><span class="command"><span class="prompt">&gt;&gt;&gt; </span>extractor_avgs
</span><span class="commandsep"></span><span class="output"><span class="result-ind">3: </span><span class="result">{'eatiht': {'entertainment.msn.com': {'2000': {'avg_accuracy': 0.878226458639</span></span><span class="folded"><span class="output"><span class="result">663,
                                               'avg_f1': 0.7776401450560837,
                                               'avg_precision': 0.7809895902954578,
                                               'avg_recall': 0.8248412997464151},
                                      '2005': {'avg_accuracy': 0.9143227880115047,
                                               'avg_f1': 0.8100250325165012,
                                               'avg_precision': 0.9306181526661566,
                                               'avg_recall': 0.7506788040971138},
                                      '2010': {'avg_accuracy': 0.9105981447068229,
                                               'avg_f1': 0.7547600391625994,
                                               'avg_precision': 0.9591116105134913,
                                               'avg_recall': 0.66318597426345},
                                      '2015': {'avg_accuracy': 0.9800434319954887,
                                               'avg_f1': 0.7522973816033732,
                                               'avg_precision': 0.8774759262982088,
                                               'avg_recall': 0.6718317347646345}},
            'mean_avgs': {'a': {'2000': 0.8016842302788483,
                                '2005': 0.8375976388658456,
                                '2010': 0.9112655720742149,
                                '2015': 0.9439374766351447},
                          'f1': {'2000': 0.7402495103435647,
                                 '2005': 0.7648061987348103,
                                 '2010': 0.7856410570300729,
                                 '2015': 0.7194581067329326},
                          'p': {'2000': 0.8188812137666904,
                                '2005': 0.8204414832502849,
                                '2010': 0.9374857991893565,
                                '2015': 0.8848112236496515},
                          'r': {'2000': 0.7629577674848568,
                                '2005': 0.800445839092269,
                                '2010': 0.6917741729029527,
                                '2015': 0.6292682919588625}},
            'news.bbc.co.uk': {'2000': {'avg_accuracy': 0.7801424557526109,
                                        'avg_f1': 0.6407220493857138,
                                        'avg_precision': 0.8151192646595848,
                                        'avg_recall': 0.6079253620456607},
                               '2005': {'avg_accuracy': 0.8263657177684894,
                                        'avg_f1': 0.7743474575947391,
                                        'avg_precision': 0.7759439794297487,
                                        'avg_recall': 0.8426336001200153},
                               '2010': {'avg_accuracy': 0.9219708358842496,
                                        'avg_f1': 0.7768263196095718,
                                        'avg_precision': 0.9488260911878033,
                                        'avg_recall': 0.6667294365781038},
                               '2015': {'avg_accuracy': 0.9639845085604982,
                                        'avg_f1': 0.7659767308535694,
                                        'avg_precision': 0.9132419809489746,
                                        'avg_recall': 0.6638402458216882}},
            'news.yahoo.com': {'2000': {'avg_accuracy': 0.7780228797983223,
                                        'avg_f1': 0.7463531250175874,
                                        'avg_precision': 0.7612476929495509,
                                        'avg_recall': 0.7918118641170517},
                               '2005': {'avg_accuracy': 0.7034687007943923,
                                        'avg_f1': 0.6341621734787838,
                                        'avg_precision': 0.5043899578387142,
                                        'avg_recall': 0.9319664634558119},
                               '2010': {'avg_accuracy': 0.9255179013943237,
                                        'avg_f1': 0.8371233322749576,
                                        'avg_precision': 0.9776218108265357,
                                        'avg_recall': 0.7333055135375502},
                               '2015': {'avg_accuracy': 0.9893460394645375,
                                        'avg_f1': 0.6058897000309008,
                                        'avg_precision': 0.9870026399258761,
                                        'avg_recall': 0.44732805664318476}},
            'thenation.com': {'2000': {'avg_accuracy': 0.750037360435283,
                                       'avg_f1': 0.7416221475217819,
                                       'avg_precision': 0.9837921683808656,
                                       'avg_recall': 0.6311344962995613},
                              '2005': {'avg_accuracy': 0.6444220918257025,
                                       'avg_f1': 0.668542218409078,
                                       'avg_precision': 0.5869102540701906,
                                       'avg_recall': 0.8653876246345382},
                              '2010': {'avg_accuracy': 0.8876376322308915,
                                       'avg_f1': 0.8053051003976753,
                                       'avg_precision': 0.909742955966361,
                                       'avg_recall': 0.7268691166293663},
                              '2015': {'avg_accuracy': 0.9003880106234209,
                                       'avg_f1': 0.8400444073353461,
                                       'avg_precision': 0.982897564524634,
                                       'avg_recall': 0.7439733981303495}},
            'www.cnn.com': {'2000': {'avg_accuracy': 0.8238004517481676,
                                     'avg_f1': 0.7289587628352208,
                                     'avg_precision': 0.9161629883160631,
                                     'avg_recall': 0.6706051953276166},
                            '2005': {'avg_accuracy': 0.919976127871615,
                                     'avg_f1': 0.8387996836377389,
                                     'avg_precision': 0.9559779693068151,
                                     'avg_recall': 0.7598382772458616},
                            '2010': {'avg_accuracy': 0.904397972100545,
                                     'avg_f1': 0.803034551827662,
                                     'avg_precision': 0.9190540608611633,
                                     'avg_recall': 0.720367938515751},
                            '2015': {'avg_accuracy': 0.9050865273196554,
                                     'avg_f1': 0.7993324657479303,
                                     'avg_precision': 0.9319362497095548,
                                     'avg_recall': 0.7176341070085498}},
            'www.esquire.com': {'2000': {'avg_accuracy': 0.8025089990983143,
                                         'avg_f1': 0.7144518452878422,
                                         'avg_precision': 0.6922746324255855,
                                         'avg_recall': 0.8502588017931124},
                                '2005': {'avg_accuracy': 0.7701210111257204,
                                         'avg_f1': 0.7267751357389283,
                                         'avg_precision': 0.6180066873519628,
                                         'avg_recall': 0.9413535035210979},
                                '2010': {'avg_accuracy': 0.917713724757117,
                                         'avg_f1': 0.8140813900391529,
                                         'avg_precision': 0.9657664616790654,
                                         'avg_recall': 0.720823276473981},
                                '2015': {'avg_accuracy': 0.972749959685334,
                                         'avg_f1': 0.7442968420260976,
                                         'avg_precision': 0.9777928581767094,
                                         'avg_recall': 0.6058910891128433}},
            'www.forbes.com': {'2000': {'avg_accuracy': 0.8091785796413377,
                                        'avg_f1': 0.7388445804783836,
                                        'avg_precision': 0.9602798588690202,
                                        'avg_recall': 0.6424386899802277},
                               '2005': {'avg_accuracy': 0.9424401453110219,
                                        'avg_f1': 0.8614851126118714,
                                        'avg_precision': 0.9569452859418489,
                                        'avg_recall': 0.8162942552926418},
                               '2010': {'avg_accuracy': 0.8641714809006092,
                                        'avg_f1': 0.7327530754288866,
                                        'avg_precision': 0.9696185233206508,
                                        'avg_recall': 0.6014258806193916},
                               '2015': {'avg_accuracy': 0.8986697321180566,
                                        'avg_f1': 0.7870155318467539,
                                        'avg_precision': 0.8972134060775241,
                                        'avg_recall': 0.7335961110116219}},
            'www.foxnews.com': {'2000': {'avg_accuracy': 0.8108548107762594,
                                         'avg_f1': 0.7249702140649049,
                                         'avg_precision': 0.8388377342165464,
                                         'avg_recall': 0.706418493627554},
                                '2005': {'avg_accuracy': 0.8597143883177145,
                                         'avg_f1': 0.634271215632443,
                                         'avg_precision': 0.9995934636566491,
                                         'avg_recall': 0.48121791887371607},
                                '2010': {'avg_accuracy': 0.9204965971604794,
                                         'avg_f1': 0.7859592132141975,
                                         'avg_precision': 0.9604578972556221,
                                         'avg_recall': 0.6803906411927594},
                                '2015': {'avg_accuracy': 0.8973170757133413,
                                         'avg_f1': 0.8445052629365077,
                                         'avg_precision': 0.9800680098898277,
                                         'avg_recall': 0.7498983851213855}},
            'www.latimes.com': {'2000': {'avg_accuracy': 0.8632617476408376,
                                         'avg_f1': 0.8821950217638651,
                                         'avg_precision': 0.8544639335585639,
                                         'avg_recall': 0.9509115748205449},
                                '2005': {'avg_accuracy': 0.9460540482534168,
                                         'avg_f1': 0.9267798217502,
                                         'avg_precision': 0.9617522951230408,
                                         'avg_recall': 0.8988154606909472},
                                '2010': {'avg_accuracy': 0.8991441536199235,
                                         'avg_f1': 0.7681908772753533,
                                         'avg_precision': 0.828471014972406,
                                         'avg_recall': 0.735286387262563},
                                '2015': {'avg_accuracy': 0.9467728255373218,
                                         'avg_f1': 0.7157798752065295,
                                         'avg_precision': 0.8035509770759279,
                                         'avg_recall': 0.6527383490053367}},
            'www.nymag.com': {'2000': {'avg_accuracy': 0.720808559257688,
                                       'avg_f1': 0.7067372120242632,
                                       'avg_precision': 0.5856442739956657,
                                       'avg_recall': 0.9532318970908235},
                              '2005': {'avg_accuracy': 0.8490913693788785,
                                       'avg_f1': 0.7728741359778185,
                                       'avg_precision': 0.9142767871177219,
                                       'avg_recall': 0.7162724829909457},
                              '2010': {'avg_accuracy': 0.9610072779871861,
                                       'avg_f1': 0.7783766710706719,
                                       'avg_precision': 0.9361875653104671,
                                       'avg_recall': 0.6693575639566113},
                              '2015': {'avg_accuracy': 0.9850166553337936,
                                       'avg_f1': 0.33944286974231674,
                                       'avg_precision': 0.49693262386927906,
                                       'avg_recall': 0.30595144296903}}}}
</span></span></span><span class="fold-message">[About 175 more lines. Double-click to unfold]
</span><span class="command"><span class="prompt">&gt;&gt;&gt; </span>extractor_avgs[<span class="string">'eatiht'</span>][<span class="string">'mean_avgs'</span>]
</span><span class="commandsep"></span><span class="output"><span class="result-ind">4: </span><span class="result">{'a': {'2000': 0.8016842302788483,
       '2005': 0.8375976388658456,
       '2010': 0.9112655720742149,
       '2015': 0.9439374766351447},
 'f1': {'2000': 0.7402495103435647,
        '2005': 0.7648061987348103,
        '2010': 0.7856410570300729,
        '2015': 0.7194581067329326},
 'p': {'2000': 0.8188812137666904,
       '2005': 0.8204414832502849,
       '2010': 0.9374857991893565,
       '2015': 0.8848112236496515},
 'r': {'2000': 0.7629577674848568,
       '2005': 0.800445839092269,
       '2010': 0.6917741729029527,
       '2015': 0.6292682919588625}}
</span></span><span class="command"><span class="prompt">&gt;&gt;&gt; </span></span></body>
</html>
